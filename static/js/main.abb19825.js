/*! For license information please see main.abb19825.js.LICENSE.txt */
!function(){"use strict";var e={110:function(e,t,n){var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);h&&(o=o.concat(h(n)));for(var s=u(t),v=u(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!s||!s[y])){var g=f(n,y);try{c(t,y,g)}catch(k){}}}}return t}},746:function(e,t){var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case a:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case f:case m:case v:case u:return e;default:return t}}case i:return t}}}function w(e){return b(e)===h}t.AsyncMode=l,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return w(e)||b(e)===l},t.isConcurrentMode=w,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===f},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===m},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===s},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===s||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===g||e.$$typeof===k||e.$$typeof===_||e.$$typeof===y)},t.typeOf=b},309:function(e,t,n){e.exports=n(746)},463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var j,M=Object.assign;function F(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case w:return"Portal";case E:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,xe=null,Se=null;function Ee(e){if(e=ki(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),we(e.stateNode,e.type,t))}}function Ce(e){xe?Se?Se.push(e):Se=[e]:xe=e}function Te(){if(xe){var e=xe,t=Se;if(Se=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ie(e,t){return e(t)}function Ne(){}var Re=!1;function Pe(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ie(e,t,n)}finally{Re=!1,(null!==xe||null!==Se)&&(Ne(),Te())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var je=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){je=!0,Me=e}};function ze(e,t,n,r,i,a,o,s,u){je=!1,Me=null,Le.apply(Ve,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(qe(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,wt,xt,St,Et,Ct=!1,Tt=[],It=null,Nt=null,Rt=null,Pt=new Map,At=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function jt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=gi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){Ct=!1,null!==It&&Ft(It)&&(It=null),null!==Nt&&Ft(Nt)&&(Nt=null),null!==Rt&&Ft(Rt)&&(Rt=null),Pt.forEach(Ut),At.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function qt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&zt(It,e),null!==Nt&&zt(Nt,e),null!==Rt&&zt(Rt,e),Pt.forEach(t),At.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Mt(n),null===n.blockedOn&&Ot.shift()}var Bt=_.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Kt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Gt(e,t,n,r){if(Ht){var i=$t(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=jt(It,e,t,n,r,i),!0;case"dragenter":return Nt=jt(Nt,e,t,n,r,i),!0;case"mouseover":return Rt=jt(Rt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,jt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,At.set(a,jt(At.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&bt(a),null===(a=$t(e,t,n,r))&&Hr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=be(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=M({},cn,{view:0,detail:0}),fn=an(hn),dn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(M({},dn,{dataTransfer:0})),mn=an(M({},hn,{relatedTarget:0})),yn=an(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),_n=an(M({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return Sn}var Cn=M({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Cn),In=an(M({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Rn=an(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=M({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=an(Pn),On=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var jn=l&&"TextEvent"in window&&!Ln,Mn=l&&(!Dn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ce(r),0<(t=Kr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Fr(e,0)}function $n(e){if(G(_i(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&$n(Gn)){var t=[];Wn(t,Gn,e,be(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Gn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},xr={},Sr={};function Er(e){if(xr[e])return xr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return xr[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Cr=Er("animationend"),Tr=Er("animationiteration"),Ir=Er("animationstart"),Nr=Er("transitionend"),Rr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Rr.set(e,t),u(t,[e])}for(var Or=0;Or<Pr.length;Or++){var Dr=Pr[Or];Ar(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Ar(Cr,"onAnimationEnd"),Ar(Tr,"onAnimationIteration"),Ar(Ir,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(ze.apply(this,arguments),je){if(!je)throw Error(a(198));var l=Me;je=!1,Me=null,Fe||(Fe=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Mr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Mr(i,s,c),a=u}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(jr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=a,i=be(n),o=[];e:{var s=Rr.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":c="focus",u=mn;break;case"focusout":c="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Nn;break;case Cr:case Tr:case Ir:u=yn;break;case Nr:u=Rn;break;case"scroll":u=fn;break;case"wheel":u=An;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=In}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Ae(p,f))&&l.push(Wr(p,v,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===_e||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(h=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=In,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:_i(u),d=null==c?s:_i(c),(s=new l(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,gi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,u&&c)e:{for(f=c,p=0,d=l=u;d;d=Gr(d))p++;for(d=0,v=f;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)f=Gr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Gr(l),f=Gr(f)}l=null}else l=null;null!==u&&Qr(o,s,u,l,!1),null!==c&&null!==h&&Qr(o,h,c,l,!0)}if("select"===(u=(s=r?_i(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Yn;else if(Hn(s))if(Xn)m=or;else{m=ir;var y=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?_i(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,_r(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Mn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&qn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,qn=!0)),0<(y=Kr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=jn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Fr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ae(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Ae(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Ae(n,a))&&o.unshift(Wr(n,u,s)):i||null!=(u=Ae(n,a))&&o.push(Wr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,mi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[di]||null}var wi=[],xi=-1;function Si(e){return{current:e}}function Ei(e){0>xi||(e.current=wi[xi],wi[xi]=null,xi--)}function Ci(e,t){xi++,wi[xi]=e.current,e.current=t}var Ti={},Ii=Si(Ti),Ni=Si(!1),Ri=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ai(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ei(Ni),Ei(Ii)}function Di(e,t,n){if(Ii.current!==Ti)throw Error(a(168));Ci(Ii,t),Ci(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,B(e)||"Unknown",i));return M({},n,r)}function ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ri=Ii.current,Ci(Ii,e),Ci(Ni,Ni.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ii),Ci(Ii,e)):Ei(Ni),Ci(Ni,n)}var Fi=null,Ui=!1,Vi=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function qi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=kt;try{var n=Fi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ge(Ze,qi),i}finally{kt=t,Vi=!1}}return null}var Bi=[],Hi=0,Wi=null,Ki=0,Gi=[],Qi=0,$i=null,Yi=1,Xi="";function Ji(e,t){Bi[Hi++]=Ki,Bi[Hi++]=Wi,Wi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=Yi,Gi[Qi++]=Xi,Gi[Qi++]=$i,$i=e;var r=Yi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else Yi=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Wi;)Wi=Bi[--Hi],Bi[Hi]=null,Ki=Bi[--Hi],Bi[Hi]=null;for(;e===$i;)$i=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null,Yi=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=_.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Si(null),ga=null,ka=null,_a=null;function ba(){_a=ka=ga=null}function wa(e){var t=ya.current;Ei(ya),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,_a=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_s=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(_a!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ca=null;function Ta(e){null===Ca?Ca=[e]:Ca.push(e)}function Ia(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ra=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Aa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Iu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function ja(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ma(e,t,n,r){var i=e.updateQueue;Ra=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(o=0,l=c=u=null,s=a;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=M({},h,f);break e;case 2:Ra=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=h):l=l.next=d,o|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);ju|=o,e.lanes=o,e.memoizedState=h}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function qa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function Ba(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Ai(t)?Ri:Ii.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Ai(t)?Ri:Ii.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Ma(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===A&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case w:return(t=Fc(t,e.mode,n)).return=e,t;case A:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case w:return n.key===i?l(e,t,n,r):null;case A:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,h=a,v=a=0,m=null;null!==h&&v<s.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var y=d(i,h,s[v],u);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,h=m}if(v===s.length)return n(i,h),ia&&Ji(i,v),c;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return ia&&Ji(i,v),c}for(h=r(i,h);v<s.length;v++)null!==(m=p(h,i,v,s[v],u))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&h.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function m(i,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,v=s,m=s=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,m),null===h?l=k:h.sibling=k,h=k,v=y}if(g.done)return n(i,v),ia&&Ji(i,m),l;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=f(i,g.value,c))&&(s=o(g,s,m),null===h?l=g:h.sibling=g,h=g);return ia&&Ji(i,m),l}for(v=r(i,v);!g.done;m++,g=u.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),s=o(g,s,m),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ka(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Lc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Dc(o.type,o.key,o.props,null,r.mode,u)).ref=Ka(r,a,o),u.return=r,r=u)}return s(r);case w:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(o,r.mode,u)).return=r,r=a}return s(r);case A:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(L(o))return m(r,a,o,u);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Mc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Ya=$a(!0),Xa=$a(!1),Ja={},Za=Si(Ja),eo=Si(Ja),to=Si(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ci(to,t),Ci(eo,e),Ci(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Ci(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=ue(t,e.type);t!==n&&(Ci(eo,e),Ci(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var so=Si(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=_.ReactCurrentDispatcher,fo=_.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,_o=0,bo=0;function wo(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,_o=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,ho.current=cs,e=n(r,i)}while(ko)}if(ho.current=os,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==_o;return _o=0,e}function Co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Io(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var h=l.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=f,s=r):c=c.next=f,vo.lanes|=h,ju|=h}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(_s=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,ju|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ro(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(_s=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Ao(e,t){var n=vo,r=To(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,_s=!0),r=r.queue,Ho(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Do.bind(null,n,r,i,t),void 0,null),null===Nu)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,jo(t)&&Mo(e)}function Lo(e,t,n){return n((function(){jo(t)&&Mo(e)}))}function jo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Mo(e){var t=Na(e,1);null!==t&&nc(t,e,1,-1)}function Fo(e){var t=Co();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function zo(e,t,n,r){var i=Co();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function qo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function Bo(e,t){return zo(8390656,8,e,t)}function Ho(e,t){return qo(2048,8,e,t)}function Wo(e,t){return qo(4,2,e,t)}function Ko(e,t){return qo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4,4,Go.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,_s=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,ju|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function es(){return To().memoizedState}function ts(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ia(e,t,n,r))){nc(n,e,r,ec()),as(n,t,r)}}function ns(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ta(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ia(e,t,i,r))&&(nc(n,e,r,i=ec()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:Ea,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},ss={readContext:Ea,useCallback:function(e,t){return Co().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:Bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=Co();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Co();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Co().memoizedState=e},useState:Fo,useDebugValue:$o,useDeferredValue:function(e){return Co().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Zo.bind(null,e[1]),Co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Co();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Nu)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Bo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Co(),t=Nu.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=_o++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:Xo,useReducer:No,useRef:Vo,useState:function(){return No(Io)},useDebugValue:$o,useDeferredValue:function(e){return Jo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Io)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ao,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:Xo,useReducer:Ro,useRef:Vo,useState:function(){return Ro(Io)},useDebugValue:$o,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Ro(Io)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ao,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hu||(Hu=!0,Wu=r),fs(0,t)},n}function vs(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Ku?Ku=new Set([this]):Ku.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=_.ReactCurrentOwner,_s=!1;function bs(e,t,n,r){t.child=null===e?Xa(t,null,n,r):Ya(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Eo(),null===e||_s?(ia&&n&&ea(t),t.flags|=1,bs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function xs(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Ac(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(_s=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(_s=!0)}}return Ts(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Ou,Au),Au|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Ou,Au),Au|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ci(Ou,Au),Au|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ci(Ou,Au),Au|=r;return bs(e,t,i,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var a=Ai(n)?Ri:Ii.current;return a=Pi(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Eo(),null===e||_s?(ia&&r&&ea(t),t.flags|=1,bs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Is(e,t,n,r,i){if(Ai(n)){var a=!0;ji(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Bs(e,t),Ba(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Pi(t,c=Ai(n)?Ri:Ii.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Ha(t,o,r,c),Ra=!1;var f=t.memoizedState;o.state=f,Ma(t,r,o,i),u=t.memoizedState,s!==r||f!==u||Ni.current||Ra?("function"===typeof l&&(Va(t,n,l,r),u=t.memoizedState),(s=Ra||qa(t,n,s,r,f,u,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Aa(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ma(t.type,s),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ea(u):u=Pi(t,u=Ai(n)?Ri:Ii.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&Ha(t,o,r,u),Ra=!1,f=t.memoizedState,o.state=f,Ma(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||Ni.current||Ra?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Ra||qa(t,n,c,r,f,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,a,i)}function Ns(e,t,n,r,i,a){Cs(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Hs(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,s,a)):bs(e,t,s,a),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Rs(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Ps(e,t,n,r,i){return da(),pa(i),t.flags|=256,bs(e,t,n,r),t.child}var As,Os,Ds,Ls={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ms(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=jc(u,i,0,null),e=Lc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=js(n),t.memoizedState=Ls,e):Fs(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=jc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,s),t.child.memoizedState=js(s),t.memoizedState=Ls,o);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Us(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),_s||u){if(null!==(r=Nu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nc(r,e,i,-1))}return vc(),Us(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=Yi,Gi[Qi++]=Xi,Gi[Qi++]=$i,Yi=e.id,Xi=e.overflow,$i=t),t=Fs(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Oc(r,s):(s=Lc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?js(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Oc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fs(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function zs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bs(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vs(e,n,t);else if(19===e.tag)Vs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zs(t,!0,n,null,a);break;case"together":zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ju|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return Ai(t.type)&&Oi(),Ks(t),null;case 3:return r=t.stateNode,io(),Ei(Ni),Ei(Ii),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Ks(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ks(t),null}if(e=no(Za.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fi]=t,e[di]=r,As(e,t),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,u))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)Ds(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Ks(t),null;case 13:if(Ei(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Du&&(Du=3):vc())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return io(),null===e&&qr(t.stateNode.containerInfo),Ks(t),null;case 10:return wa(t.type._context),Ks(t),null;case 19:if(Ei(so),null===(o=t.memoizedState))return Ks(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Ws(o,!1);else{if(0!==Du||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Ws(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>qu&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Ks(t),null}else 2*Xe()-o.renderingStartTime>qu&&1073741824!==n&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=so.current,Ci(so,r?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Au)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qs(e,t){switch(ta(t),t.tag){case 1:return Ai(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ni),Ei(Ii),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(so),null;case 4:return io(),null;case 10:return wa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}As=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ds=function(e,t,n,r){n!==r&&(t.flags|=4)};var $s=!1,Ys=!1,Xs="function"===typeof WeakSet?WeakSet:Set,Js=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&eu(t,n,a)}i=i.next}while(i!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var lu=null,hu=!1;function fu(e,t,n){for(n=n.child;null!==n;)du(e,t,n),n=n.sibling}function du(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Ys||Zs(n,t);case 6:var r=lu,i=hu;lu=null,fu(e,t,n),hu=i,null!==(lu=r)&&(hu?(e=lu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lu.removeChild(n.stateNode));break;case 18:null!==lu&&(hu?(e=lu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),qt(e)):ui(lu,n.stateNode));break;case 4:r=lu,i=hu,lu=n.stateNode.containerInfo,hu=!0,fu(e,t,n),lu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&eu(n,t,o),i=i.next}while(i!==r)}fu(e,t,n);break;case 1:if(!Ys&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Sc(n,t,s)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?(Ys=(r=Ys)||null!==n.memoizedState,fu(e,t,n),Ys=r):fu(e,t,n);break;default:fu(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach((function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:lu=u.stateNode,hu=!1;break e;case 3:case 4:lu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===lu)throw Error(a(160));du(o,s,i),lu=null,hu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vu(t,e),yu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(m){Sc(e,e.return,m)}try{nu(5,e,e.return)}catch(m){Sc(e,e.return,m)}}break;case 1:vu(t,e),yu(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(vu(t,e),yu(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(m){Sc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&X(i,o),ke(u,s);var l=ke(u,o);for(s=0;s<c.length;s+=2){var h=c[s],f=c[s+1];"style"===h?me(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,l)}switch(u){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Sc(e,e.return,m)}}break;case 6:if(vu(t,e),yu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Sc(e,e.return,m)}}break;case 3:if(vu(t,e),yu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(m){Sc(e,e.return,m)}break;case 4:default:vu(t,e),yu(e);break;case 13:vu(t,e),yu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zu=Xe())),4&r&&pu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ys=(l=Ys)||h,vu(t,e),Ys=l):vu(t,e),yu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Js=e,h=e.child;null!==h;){for(f=Js=h;null!==Js;){switch(p=(d=Js).child,d.tag){case 0:case 11:case 14:case 15:nu(4,d,d.return);break;case 1:Zs(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Sc(r,n,m)}}break;case 5:Zs(d,d.return);break;case 22:if(null!==d.memoizedState){bu(f);continue}}null!==p?(p.return=d,Js=p):bu(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(m){Sc(e,e.return,m)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Sc(e,e.return,m)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vu(t,e),yu(e),4&r&&pu(e);case 21:}}function yu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),cu(e,su(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;uu(e,su(e),o);break;default:throw Error(a(161))}}catch(s){Sc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gu(e,t,n){Js=e,ku(e,t,n)}function ku(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var i=Js,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$s;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Ys;s=$s;var c=Ys;if($s=o,(Ys=u)&&!c)for(Js=i;null!==Js;)u=(o=Js).child,22===o.tag&&null!==o.memoizedState?wu(i):null!==u?(u.return=o,Js=u):wu(i);for(;null!==a;)Js=a,ku(a,t,n),a=a.sibling;Js=i,$s=s,Ys=c}_u(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Js=a):_u(e)}}function _u(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ys)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&qt(f)}}}break;default:throw Error(a(163))}Ys||512&t.flags&&iu(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function bu(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function wu(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){Sc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Sc(t,i,u)}}var a=t.return;try{iu(t)}catch(u){Sc(t,a,u)}break;case 5:var o=t.return;try{iu(t)}catch(u){Sc(t,o,u)}}}catch(u){Sc(t,t.return,u)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var xu,Su=Math.ceil,Eu=_.ReactCurrentDispatcher,Cu=_.ReactCurrentOwner,Tu=_.ReactCurrentBatchConfig,Iu=0,Nu=null,Ru=null,Pu=0,Au=0,Ou=Si(0),Du=0,Lu=null,ju=0,Mu=0,Fu=0,Uu=null,Vu=null,zu=0,qu=1/0,Bu=null,Hu=!1,Wu=null,Ku=null,Gu=!1,Qu=null,$u=0,Yu=0,Xu=null,Ju=-1,Zu=0;function ec(){return 0!==(6&Iu)?Xe():-1!==Ju?Ju:Ju=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Iu)&&0!==Pu?Pu&-Pu:null!==va.transition?(0===Zu&&(Zu=vt()),Zu):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yu)throw Yu=0,Xu=null,Error(a(185));yt(e,n,r),0!==(2&Iu)&&e===Nu||(e===Nu&&(0===(2&Iu)&&(Mu|=n),4===Du&&sc(e,Pu)),rc(e,r),1===n&&0===Iu&&0===(1&t.mode)&&(qu=Xe()+500,Ui&&qi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Nu?Pu:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(uc.bind(null,e)):zi(uc.bind(null,e)),oi((function(){0===(6&Iu)&&qi()})),n=null;else{switch(_t(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Ju=-1,Zu=0,0!==(6&Iu))throw Error(a(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ft(e,e===Nu?Pu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Iu;Iu|=2;var o=pc();for(Nu===e&&Pu===t||(Bu=null,qu=Xe()+500,fc(e,t));;)try{gc();break}catch(u){dc(e,u)}ba(),Eu.current=o,Iu=i,null!==Ru?t=0:(Nu=null,Pu=0,t=Du)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Lu,fc(e,0),sc(e,r),rc(e,Xe()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Lu,fc(e,0),sc(e,r),rc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:bc(e,Vu,Bu);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=zu+500-Xe())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,Vu,Bu),t);break}bc(e,Vu,Bu);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Su(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,Vu,Bu),r);break}bc(e,Vu,Bu);break;default:throw Error(a(329))}}}return rc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Uu;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Vu,Vu=n,null!==t&&oc(t)),e}function oc(e){null===Vu?Vu=e:Vu.push.apply(Vu,e)}function sc(e,t){for(t&=~Fu,t&=~Mu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Iu))throw Error(a(327));wc();var t=ft(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Lu,fc(e,0),sc(e,t),rc(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Vu,Bu),rc(e,Xe()),null}function cc(e,t){var n=Iu;Iu|=1;try{return e(t)}finally{0===(Iu=n)&&(qu=Xe()+500,Ui&&qi())}}function lc(e){null!==Qu&&0===Qu.tag&&0===(6&Iu)&&wc();var t=Iu;Iu|=1;var n=Tu.transition,r=kt;try{if(Tu.transition=null,kt=1,e)return e()}finally{kt=r,Tu.transition=n,0===(6&(Iu=t))&&qi()}}function hc(){Au=Ou.current,Ei(Ou)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ru)for(n=Ru.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Ei(Ni),Ei(Ii),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(so);break;case 10:wa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Nu=e,Ru=e=Oc(e.current,null),Pu=Au=t,Du=0,Lu=null,Fu=Mu=ju=0,Vu=Uu=null,null!==Ca){for(t=0;t<Ca.length;t++)if(null!==(r=(n=Ca[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ca=null}return e}function dc(e,t){for(;;){var n=Ru;try{if(ba(),ho.current=os,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,_o=0,Cu.current=null,null===n||null===n.return){Du=1,Lu=t,Ru=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Pu,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=u,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ys(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ms(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){ms(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&u.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gs(y,s,u,0,t),pa(ls(c,u));break e}}o=c=ls(c,u),4!==Du&&(Du=2),null===Uu?Uu=[o]:Uu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,ja(o,ps(0,c,t));break e;case 1:u=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ku||!Ku.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,ja(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}_c(n)}catch(_){t=_,Ru===n&&null!==n&&(Ru=n=n.return);continue}break}}function pc(){var e=Eu.current;return Eu.current=os,null===e?os:e}function vc(){0!==Du&&3!==Du&&2!==Du||(Du=4),null===Nu||0===(268435455&ju)&&0===(268435455&Mu)||sc(Nu,Pu)}function mc(e,t){var n=Iu;Iu|=2;var r=pc();for(Nu===e&&Pu===t||(Bu=null,fc(e,t));;)try{yc();break}catch(i){dc(e,i)}if(ba(),Iu=n,Eu.current=r,null!==Ru)throw Error(a(261));return Nu=null,Pu=0,Du}function yc(){for(;null!==Ru;)kc(Ru)}function gc(){for(;null!==Ru&&!$e();)kc(Ru)}function kc(e){var t=xu(e.alternate,e,Au);e.memoizedProps=e.pendingProps,null===t?_c(e):Ru=t,Cu.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gs(n,t,Au)))return void(Ru=n)}else{if(null!==(n=Qs(n,t)))return n.flags&=32767,void(Ru=n);if(null===e)return Du=6,void(Ru=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ru=t);Ru=t=e}while(null!==t);0===Du&&(Du=5)}function bc(e,t,n){var r=kt,i=Tu.transition;try{Tu.transition=null,kt=1,function(e,t,n,r){do{wc()}while(null!==Qu);if(0!==(6&Iu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Nu&&(Ru=Nu=null,Pu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gu||(Gu=!0,Nc(tt,(function(){return wc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tu.transition,Tu.transition=null;var s=kt;kt=1;var u=Iu;Iu|=4,Cu.current=null,function(e,t){if(ei=Ht,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var s=0,u=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(u=s+i),f!==o||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++h===r&&(c=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(a(163))}}catch(b){Sc(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}v=tu,tu=!1}(e,n),mu(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,gu(n,e,i),Ye(),Iu=u,kt=s,Tu.transition=o}else e.current=n;if(Gu&&(Gu=!1,Qu=e,$u=i),o=e.pendingLanes,0===o&&(Ku=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Hu)throw Hu=!1,e=Wu,Wu=null,e;0!==(1&$u)&&0!==e.tag&&wc(),o=e.pendingLanes,0!==(1&o)?e===Xu?Yu++:(Yu=0,Xu=e):Yu=0,qi()}(e,t,n,r)}finally{Tu.transition=i,kt=r}return null}function wc(){if(null!==Qu){var e=_t($u),t=Tu.transition,n=kt;try{if(Tu.transition=null,kt=16>e?16:e,null===Qu)var r=!1;else{if(e=Qu,Qu=null,$u=0,0!==(6&Iu))throw Error(a(331));var i=Iu;for(Iu|=4,Js=e.current;null!==Js;){var o=Js,s=o.child;if(0!==(16&Js.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Js=l;null!==Js;){var h=Js;switch(h.tag){case 0:case 11:case 15:nu(8,h,o)}var f=h.child;if(null!==f)f.return=h,Js=f;else for(;null!==Js;){var d=(h=Js).sibling,p=h.return;if(au(h),h===l){Js=null;break}if(null!==d){d.return=p,Js=d;break}Js=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Js=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Js=s;else e:for(;null!==Js;){if(0!==(2048&(o=Js).flags))switch(o.tag){case 0:case 11:case 15:nu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Js=g;break e}Js=o.return}}var k=e.current;for(Js=k;null!==Js;){var _=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==_)_.return=s,Js=_;else e:for(s=k;null!==Js;){if(0!==(2048&(u=Js).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(w){Sc(u,u.return,w)}if(u===s){Js=null;break e}var b=u.sibling;if(null!==b){b.return=u.return,Js=b;break e}Js=u.return}}if(Iu=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{kt=n,Tu.transition=t}}return!1}function xc(e,t,n){e=Da(e,t=ps(0,t=ls(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ku||!Ku.has(r))){t=Da(t,e=vs(t,e=ls(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Nu===e&&(Pu&n)===n&&(4===Du||3===Du&&(130023424&Pu)===Pu&&500>Xe()-zu?fc(e,0):Fu|=n),rc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Na(e,t))&&(yt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Cc(e,n)}function Nc(e,t){return Ge(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Rc(e,t,n,r)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Ac(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Lc(n.children,i,o,t);case S:s=8,i|=8;break;case E:return(e=Pc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case R:return(e=Pc(19,n,t,i)).elementType=R,e.lanes=o,e;case O:return jc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case T:s=9;break e;case I:s=11;break e;case P:s=14;break e;case A:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function jc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,s,u){return e=new Uc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function zc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function qc(e){if(!e)return Ti;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ai(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ai(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,a,o,s,u){return(e=Vc(n,r,!0,e,0,a,0,s,u)).context=qc(null),n=e.current,(a=Oa(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Hc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}xu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)_s=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _s=!1,function(e,t,n){switch(t.tag){case 3:Rs(t),da();break;case 5:ao(t);break;case 1:Ai(t.type)&&ji(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ms(e,t,n):(Ci(so,1&so.current),null!==(e=Hs(e,t,n))?e.sibling:null);Ci(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Hs(e,t,n)}(e,t,n);_s=0!==(131072&e.flags)}else _s=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bs(e,t),e=t.pendingProps;var i=Pi(t,Ii.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(r)?(o=!0,ji(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=Ns(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ac(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===P)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Is(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Rs(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Aa(e,t),Ma(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ps(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=Ps(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Hs(e,t,n);break e}bs(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Cs(e,t),bs(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Ms(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):bs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return bs(e,t,t.pendingProps,n),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ci(ya,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ni.current){t=Hs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),xa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}bs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ea(i)),t.flags|=1,bs(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xs(e,t,r,i=ma(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Bs(e,t),t.tag=1,Ai(r)?(e=!0,ji(t)):e=!1,Sa(t,n),Ba(t,r,i),Wa(t,r,i,n),Ns(null,t,r,!0,e,n);case 19:return qs(e,t,n);case 22:return Es(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Wc(o);s.call(e)}}Hc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Wc(u);s.call(e)}}var u=Vc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=u,e[pi]=u.current,qr(8===e.nodeType?e.parentNode:e),lc((function(){Hc(t,u,n,r)})),u}(n,t,e,i,r);return Wc(o)}Yc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hc(e,t,null,null)},Yc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Hc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Mt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Xe()),0===(6&Iu)&&(qu=Xe()+500,qi()))}break;case 13:lc((function(){var t=Na(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},wt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},xt=function(e){if(13===e.tag){var t=tc(e),n=Na(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},St=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},we=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));G(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[ki,_i,bi,Ce,Te,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return zc(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},459:function(e,t){var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case s:case o:case f:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case h:case v:case p:case u:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},900:function(e,t,n){n(459)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var _=k.prototype=new g;_.constructor=k,v(_,y.prototype),_.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,x={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:x.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+I(u,0):a,b(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var l=a+I(s=e[c],c);u+=N(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=N(s=s.value,t,i,l=a+I(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function R(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},O={transition:null},D={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function b(e){if(m=!1,_(e),!v)if(null!==r(c))v=!0,O(w);else{var t=r(l);null!==t&&D(b,t.startTime-e)}}function w(e,n){v=!1,m&&(m=!1,g(C),C=-1),p=!0;var a=d;try{for(_(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!N());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(c)&&i(c),_(n)}else i(c);f=r(c)}if(null!==f)var u=!0;else{var h=r(l);null!==h&&D(b,h.startTime-n),u=!1}return u}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,S=!1,E=null,C=-1,T=5,I=-1;function N(){return!(t.unstable_now()-I<T)}function R(){if(null!==E){var e=t.unstable_now();I=e;var n=!0;try{n=E(!0,e)}finally{n?x():(S=!1,E=null)}}else S=!1}if("function"===typeof k)x=function(){k(R)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,A=P.port2;P.port1.onmessage=R,x=function(){A.postMessage(null)}}else x=function(){y(R,0)};function O(e){E=e,S||(S=!0,x())}function D(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(C),C=-1):m=!0,D(b,a-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,O(w))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)},561:function(e,t,n){var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,s=r.useLayoutEffect,u=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return s((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},595:function(e,t,n){var r=n(791),i=n(248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,s=r.useRef,u=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var h=s(null);if(null===h.current){var f={hasValue:!1,value:null};h.current=f}else f=h.current;h=c((function(){function e(e){if(!u){if(u=!0,o=e,e=r(e),void 0!==i&&f.hasValue){var t=f.value;if(i(t,e))return s=t}return s=e}if(t=s,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,s=n)}var o,s,u=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,h[0],h[1]);return u((function(){f.hasValue=!0,f.value=d}),[d]),l(d),d}},248:function(e,t,n){e.exports=n(561)},327:function(e,t,n){e.exports=n(595)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".4924caac.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="5_big_project:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var h=c[l];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){s=h;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Shop/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunk_5_big_project=self.webpackChunk_5_big_project||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e=n(791),t=n.t(e,2),r=n(250);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(){a=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(R){l=function(e,t,n){return e[t]=n}}function h(e,t,n,i){var a=t&&t.prototype instanceof p?t:p,o=Object.create(a.prototype),s=new T(i||[]);return r(o,"_invoke",{value:x(e,n,s)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=h;var d={};function p(){}function v(){}function m(){}var y={};l(y,s,(function(){return this}));var g=Object.getPrototypeOf,k=g&&g(g(I([])));k&&k!==t&&n.call(k,s)&&(y=k);var _=m.prototype=p.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function a(r,o,s,u){var c=f(e[r],e,o);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==i(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){a("next",e,s,u)}),(function(e){a("throw",e,s,u)})):t.resolve(h).then((function(e){l.value=e,s(l)}),(function(e){return a("throw",e,s,u)}))}u(c.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=S(o,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function I(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:N}}function N(){return{value:void 0,done:!0}}return v.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:v,configurable:!0}),v.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(w.prototype),l(w.prototype,u,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(h(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(_),l(_,c,"Generator"),l(_,s,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function o(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(bu){return void n(bu)}s.done?t(u):Promise.resolve(u).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,u,"next",e)}function u(e){o(a,r,i,s,u,"throw",e)}s(void 0)}))}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function d(){return d="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=f(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},d.apply(this,arguments)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function g(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function k(e){var t=y();return function(){var n,r=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function _(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function S(e,t,n){return t&&x(e.prototype,t),n&&x(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function E(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t,n){return(t=w(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t,n){return T=y()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&v(i,n.prototype),i},T.apply(null,arguments)}function I(e){var t="function"===typeof Map?new Map:void 0;return I=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return T(e,arguments,h(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),v(n,e)},I(e)}var N=!1,R=!1,P="${JSCORE_VERSION}",A=function(e,t){if(!e)throw O(t)},O=function(e){return new Error("Firebase Database ("+P+") INTERNAL ASSERT FAILED: "+e)},D=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},L={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(D(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},j=function(e){var t=D(e);return L.encodeByteArray(t,!0)},M=function(e){return j(e).replace(/\./g,"")},F=function(e){try{return L.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function U(e){return V(void 0,e)}function V(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=V(e[n],t[n]));return e}function z(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function q(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(z())}function B(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function H(){return!0===N||!0===R}function W(){try{return"object"===typeof indexedDB}catch(e){return!1}}var K=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},G=function(){try{return K()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/Shop",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&F(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Q=function(e){var t,n;return null===(n=null===(t=G())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},$=function(e){var t=Q(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},Y=function(){var e;return null===(e=G())||void 0===e?void 0:e.config},X=function(e){var t;return null===(t=G())||void 0===t?void 0:t["_".concat(e)]},J=function(){function e(){var t=this;b(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return S(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Z(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[M(JSON.stringify({alg:"none",type:"JWT"})),M(JSON.stringify(a)),""].join(".")}var ee=function(e){m(n,e);var t=k(n);function n(e,r,i){var a;return b(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(p(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(p(a),te.prototype.create),a}return S(n)}(I(Error)),te=function(){function e(t,n,r){b(this,e),this.service=t,this.serviceName=n,this.errors=r}return S(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?ne(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new ee(n,a,t);return o}}]),e}();function ne(e,t){return e.replace(re,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var re=/\{\$([^}]+)}/g;function ie(e){return JSON.parse(e)}function ae(e){return JSON.stringify(e)}var oe=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=ie(F(a[0])||""),n=ie(F(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function se(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ue(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ce(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function le(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function he(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(fe(s)&&fe(u)){if(!he(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function fe(e){return null!==e&&"object"===typeof e}function de(e){for(var t=[],n=function(){var e=l(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function pe(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=l(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function ve(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var me=function(){function e(){b(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return S(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=f^l&(h^f),u=1518500249):(s=l^h^f,u=1859775393):p<60?(s=l&h|f&(l|h),u=2400959708):(s=l^h^f,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();var ye=function(){function e(t,n){var r=this;b(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return S(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=_(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ge),void 0===r.error&&(r.error=ge),void 0===r.complete&&(r.complete=ge);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ge(){}function ke(e,t){return"".concat(e," failed: ").concat(t," argument ")}var _e=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function be(e){return e&&e._delegate?e._delegate:e}var we=function(){function e(t,n,r){b(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return S(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),xe="[DEFAULT]",Se=function(){function e(t,n){b(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return S(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new J;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:xe})}catch(u){}var t,n=_(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(u){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=s(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(E(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),E(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=_(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=l(i.value,2),u=s[0],c=s[1],h=this.normalizeInstanceIdentifier(u);r===h&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=_(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(HS){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===xe?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(HS){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe;return this.component?this.component.multipleInstances?e:xe:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ee,Ce,Te=function(){function e(t){b(this,e),this.name=t,this.providers=new Map}return S(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Se(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ie=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ce||(Ce={}));var Ne={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},Re=Ce.INFO,Pe=(C(Ee={},Ce.DEBUG,"log"),C(Ee,Ce.VERBOSE,"log"),C(Ee,Ce.INFO,"info"),C(Ee,Ce.WARN,"warn"),C(Ee,Ce.ERROR,"error"),Ee),Ae=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Pe[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Oe=function(){function e(t){b(this,e),this.name=t,this._logLevel=Re,this._logHandler=Ae,this._userLogHandler=null,Ie.push(this)}return S(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ce))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Ne[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ce.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ce.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ce.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ce.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ce.INFO].concat(t)),this._logHandler.apply(this,[this,Ce.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ce.WARN].concat(t)),this._logHandler.apply(this,[this,Ce.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ce.ERROR].concat(t)),this._logHandler.apply(this,[this,Ce.ERROR].concat(t))}}]),e}();function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je,Me;var Fe=new WeakMap,Ue=new WeakMap,Ve=new WeakMap,ze=new WeakMap,qe=new WeakMap;var Be={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ue.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ve.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ke(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function He(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Me||(Me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ge(this),n),Ke(Fe.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ke(e.apply(Ge(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Ge(this),t].concat(r));return Ve.set(a,t.sort?t.sort():[t]),Ke(a)}}function We(e){return"function"===typeof e?He(e):(e instanceof IDBTransaction&&function(e){if(!Ue.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ue.set(e,t)}}(e),t=e,(je||(je=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Be):e);var t}function Ke(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Ke(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Fe.set(t,e)})).catch((function(){})),qe.set(t,e),t}(e);if(ze.has(e))return ze.get(e);var t=We(e);return t!==e&&(ze.set(e,t),qe.set(t,e)),t}var Ge=function(e){return qe.get(e)};var Qe,$e,Ye=["get","getKey","getAll","getAllKeys","count"],Xe=["put","add","delete","clear"],Je=new Map;function Ze(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Je.get(t))return Je.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Xe.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Ye.includes(n))){var o=function(){var e=s(a().mark((function e(t){var o,s,u,c,l,h,f=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s=this.transaction(t,i?"readwrite":"readonly"),u=s.store,c=f.length,l=new Array(c>1?c-1:0),h=1;h<c;h++)l[h-1]=f[h];return r&&(u=u.index(l.shift())),e.next=6,Promise.all([(o=u)[n].apply(o,l),i&&s.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Je.set(t,o),o}}}Be=function(e){return Le(Le({},e),{},{get:function(t,n,r){return Ze(t,n)||e.get(t,n,r)},has:function(t,n){return!!Ze(t,n)||e.has(t,n)}})}(Be);var et=function(){function e(t){b(this,e),this.container=t}return S(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var tt="@firebase/app",nt="0.9.0",rt=new Oe("@firebase/app"),it="[DEFAULT]",at=(C(Qe={},tt,"fire-core"),C(Qe,"@firebase/app-compat","fire-core-compat"),C(Qe,"@firebase/analytics","fire-analytics"),C(Qe,"@firebase/analytics-compat","fire-analytics-compat"),C(Qe,"@firebase/app-check","fire-app-check"),C(Qe,"@firebase/app-check-compat","fire-app-check-compat"),C(Qe,"@firebase/auth","fire-auth"),C(Qe,"@firebase/auth-compat","fire-auth-compat"),C(Qe,"@firebase/database","fire-rtdb"),C(Qe,"@firebase/database-compat","fire-rtdb-compat"),C(Qe,"@firebase/functions","fire-fn"),C(Qe,"@firebase/functions-compat","fire-fn-compat"),C(Qe,"@firebase/installations","fire-iid"),C(Qe,"@firebase/installations-compat","fire-iid-compat"),C(Qe,"@firebase/messaging","fire-fcm"),C(Qe,"@firebase/messaging-compat","fire-fcm-compat"),C(Qe,"@firebase/performance","fire-perf"),C(Qe,"@firebase/performance-compat","fire-perf-compat"),C(Qe,"@firebase/remote-config","fire-rc"),C(Qe,"@firebase/remote-config-compat","fire-rc-compat"),C(Qe,"@firebase/storage","fire-gcs"),C(Qe,"@firebase/storage-compat","fire-gcs-compat"),C(Qe,"@firebase/firestore","fire-fst"),C(Qe,"@firebase/firestore-compat","fire-fst-compat"),C(Qe,"fire-js","fire-js"),C(Qe,"firebase","fire-js-all"),Qe),ot=new Map,st=new Map;function ut(e,t){try{e.container.addComponent(t)}catch(n){rt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function ct(e){var t=e.name;if(st.has(t))return rt.debug("There were multiple attempts to register component ".concat(t,".")),!1;st.set(t,e);var n,r=_(ot.values());try{for(r.s();!(n=r.n()).done;){ut(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function lt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var ht=(C($e={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),C($e,"bad-app-name","Illegal App name: '{$appName}"),C($e,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),C($e,"app-deleted","Firebase App named '{$appName}' already deleted"),C($e,"no-options","Need to provide options, when not being deployed to hosting via source."),C($e,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),C($e,"invalid-log-argument","First argument to `onLog` must be null or a function."),C($e,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),C($e,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),C($e,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),C($e,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),$e),ft=new te("app","Firebase",ht),dt=function(){function e(t,n,r){var i=this;b(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new we("app",(function(){return i}),"PUBLIC"))}return S(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw ft.create("app-deleted",{appName:this._name})}}]),e}(),pt="9.15.0";function vt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:it,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw ft.create("bad-app-name",{appName:String(a)});if(n||(n=Y()),!n)throw ft.create("no-options");var o=ot.get(a);if(o){if(he(n,o.options)&&he(i,o.config))return o;throw ft.create("duplicate-app",{appName:a})}var s,u=new Te(a),c=_(st.values());try{for(c.s();!(s=c.n()).done;){var l=s.value;u.addComponent(l)}}catch(f){c.e(f)}finally{c.f()}var h=new dt(n,i,u);return ot.set(a,h),h}function mt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=ot.get(e);if(!t&&e===it)return vt();if(!t)throw ft.create("no-app",{appName:e});return t}function yt(e,t,n){var r,i=null!==(r=at[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void rt.warn(s.join(" "))}ct(new we("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}var gt="firebase-heartbeat-store",kt=null;function _t(){return kt||(kt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=Ke(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Ke(s.result),e.oldVersion,e.newVersion,Ke(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(gt)}}).catch((function(e){throw ft.create("idb-open",{originalErrorMessage:e.message})}))),kt}function bt(e){return wt.apply(this,arguments)}function wt(){return wt=s(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_t();case 3:return n=e.sent,e.abrupt("return",n.transaction(gt).objectStore(gt).get(Et(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof ee?rt.warn(e.t0.message):(r=ft.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),rt.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),wt.apply(this,arguments)}function xt(e,t){return St.apply(this,arguments)}function St(){return St=s(a().mark((function e(t,n){var r,i,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_t();case 3:return r=e.sent,i=r.transaction(gt,"readwrite"),o=i.objectStore(gt),e.next=8,o.put(n,Et(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof ee?rt.warn(e.t0.message):(s=ft.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),rt.warn(s.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),St.apply(this,arguments)}function Et(e){return"".concat(e.name,"!").concat(e.options.appId)}var Ct=function(){function e(t){var n=this;b(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Rt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return S(e,[{key:"triggerHeartbeat",value:function(){var e=s(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Tt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=s(a().mark((function e(){var t,n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Tt(),n=It(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,o=M(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Tt(){return(new Date).toISOString().substring(0,10)}function It(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=_(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Pt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Pt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Nt,Rt=function(){function e(t){b(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return S(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(bu){t(bu)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=s(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,bt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=s(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",xt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=s(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",xt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(E(r.heartbeats),E(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Pt(e){return M(JSON.stringify({version:2,heartbeats:e})).length}Nt="",ct(new we("platform-logger",(function(e){return new et(e)}),"PRIVATE")),ct(new we("heartbeat",(function(e){return new Ct(e)}),"PRIVATE")),yt(tt,nt,Nt),yt(tt,nt,"esm2017"),yt("fire-js","");function At(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Ot;Object.create;function Dt(){return C({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Lt=Dt,jt=new te("auth","Firebase",Dt()),Mt=new Oe("@firebase/auth");function Ft(e){if(Mt.logLevel<=Ce.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Mt.error.apply(Mt,["Auth (".concat(pt,"): ").concat(e)].concat(n))}}function Ut(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw qt.apply(void 0,[e].concat(n))}function Vt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return qt.apply(void 0,[e].concat(n))}function zt(e,t,n){var r=Object.assign(Object.assign({},Lt()),C({},t,n));return new te("auth","Firebase",r).create(t,{appName:e.name})}function qt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=E(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(E(o)))}return jt.create.apply(jt,[e].concat(n))}function Bt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw qt.apply(void 0,[t].concat(r))}}function Ht(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Ft(t),new Error(t)}function Wt(e,t){e||Ht(t)}var Kt=new Map;function Gt(e){Wt(e instanceof Function,"Expected a class definition");var t=Kt.get(e);return t?(Wt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Kt.set(e,t),t)}function Qt(e,t){var n=lt(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(he(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;Ut(r,"already-initialized")}return n.initialize({options:t})}function $t(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Yt(){return"http:"===Xt()||"https:"===Xt()}function Xt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Jt(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Yt()||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}var Zt=function(){function e(t,n){b(this,e),this.shortDelay=t,this.longDelay=n,Wt(n>t,"Short delay should be less than long delay!"),this.isMobile=q()||B()}return S(e,[{key:"get",value:function(){return Jt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}]),e}();function en(e,t){Wt(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var tn=function(){function e(){b(this,e)}return S(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Ht("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Ht("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Ht("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),nn=(C(Ot={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),C(Ot,"MISSING_CUSTOM_TOKEN","internal-error"),C(Ot,"INVALID_IDENTIFIER","invalid-email"),C(Ot,"MISSING_CONTINUE_URI","internal-error"),C(Ot,"INVALID_PASSWORD","wrong-password"),C(Ot,"MISSING_PASSWORD","internal-error"),C(Ot,"EMAIL_EXISTS","email-already-in-use"),C(Ot,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),C(Ot,"INVALID_IDP_RESPONSE","invalid-credential"),C(Ot,"INVALID_PENDING_TOKEN","invalid-credential"),C(Ot,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),C(Ot,"MISSING_REQ_TYPE","internal-error"),C(Ot,"EMAIL_NOT_FOUND","user-not-found"),C(Ot,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),C(Ot,"EXPIRED_OOB_CODE","expired-action-code"),C(Ot,"INVALID_OOB_CODE","invalid-action-code"),C(Ot,"MISSING_OOB_CODE","internal-error"),C(Ot,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),C(Ot,"INVALID_ID_TOKEN","invalid-user-token"),C(Ot,"TOKEN_EXPIRED","user-token-expired"),C(Ot,"USER_NOT_FOUND","user-token-expired"),C(Ot,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),C(Ot,"INVALID_CODE","invalid-verification-code"),C(Ot,"INVALID_SESSION_INFO","invalid-verification-id"),C(Ot,"INVALID_TEMPORARY_PROOF","invalid-credential"),C(Ot,"MISSING_SESSION_INFO","missing-verification-id"),C(Ot,"SESSION_EXPIRED","code-expired"),C(Ot,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),C(Ot,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),C(Ot,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),C(Ot,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),C(Ot,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),C(Ot,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),C(Ot,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),C(Ot,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),C(Ot,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),C(Ot,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),C(Ot,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ot),rn=new Zt(3e4,6e4);function an(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function on(e,t,n,r){return sn.apply(this,arguments)}function sn(){return sn=s(a().mark((function e(t,n,r,i){var o,u=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=u.length>4&&void 0!==u[4]?u[4]:{},e.abrupt("return",un(t,o,s(a().mark((function e(){var o,s,u,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={},s={},i&&("GET"===n?s=i:o={body:JSON.stringify(i)}),u=de(Object.assign({key:t.config.apiKey},s)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(c=e.sent)["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",tn.fetch()(fn(t,t.config.apiHost,r,u),Object.assign({method:n,headers:c,referrerPolicy:"no-referrer"},o)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),sn.apply(this,arguments)}function un(e,t,n){return cn.apply(this,arguments)}function cn(){return cn=s(a().mark((function e(t,n,r){var i,o,s,u,c,h,f,d,p,v;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},nn),n),e.prev=2,o=new dn(t),e.next=6,Promise.race([r(),o.promise]);case 6:return s=e.sent,o.clearNetworkTimeout(),e.next=10,s.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw pn(t,"account-exists-with-different-credential",u);case 13:if(!s.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=s.ok?u.errorMessage:u.error.message,h=c.split(" : "),f=l(h,2),d=f[0],p=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==d){e.next=23;break}throw pn(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==d){e.next=27;break}throw pn(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==d){e.next=29;break}throw pn(t,"user-disabled",u);case 29:if(v=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-"),!p){e.next=34;break}throw zt(t,v,p);case 34:Ut(t,v);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof ee)){e.next=41;break}throw e.t0;case 41:Ut(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),cn.apply(this,arguments)}function ln(e,t,n,r){return hn.apply(this,arguments)}function hn(){return hn=s(a().mark((function e(t,n,r,i){var o,s,u=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,on(t,n,r,i,o);case 3:return"mfaPendingCredential"in(s=e.sent)&&Ut(t,"multi-factor-auth-required",{_serverResponse:s}),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)}))),hn.apply(this,arguments)}function fn(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?en(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var dn=function(){function e(t){var n=this;b(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Vt(n.auth,"network-request-failed"))}),rn.get())}))}return S(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function pn(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Vt(e,t,r);return i.customData._tokenResponse=n,i}function vn(e,t){return mn.apply(this,arguments)}function mn(){return mn=s(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",on(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),mn.apply(this,arguments)}function yn(e,t){return gn.apply(this,arguments)}function gn(){return gn=s(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",on(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),gn.apply(this,arguments)}function kn(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function _n(){return _n=s(a().mark((function e(t){var n,r,i,o,s,u,c=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],r=be(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Bt((o=wn(i))&&o.exp&&o.auth_time&&o.iat,r.auth,"internal-error"),s="object"===typeof o.firebase?o.firebase:void 0,u=null===s||void 0===s?void 0:s.sign_in_provider,e.abrupt("return",{claims:o,token:i,authTime:kn(bn(o.auth_time)),issuedAtTime:kn(bn(o.iat)),expirationTime:kn(bn(o.exp)),signInProvider:u||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),_n.apply(this,arguments)}function bn(e){return 1e3*Number(e)}function wn(e){var t=l(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Ft("JWT malformed, contained fewer than 3 sections"),null;try{var a=F(r);return a?JSON.parse(a):(Ft("Failed to decode base64 JWT payload"),null)}catch(o){return Ft("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function xn(e,t){return Sn.apply(this,arguments)}function Sn(){return Sn=s(a().mark((function e(t,n){var r=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof ee&&En(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Sn.apply(this,arguments)}function En(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Cn=function(){function e(t){b(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return S(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(s(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Tn=function(){function e(t,n){b(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return S(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=kn(this.lastLoginAt),this.creationTime=kn(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function In(e){return Nn.apply(this,arguments)}function Nn(){return Nn=s(a().mark((function e(t){var n,r,i,o,s,u,c,l,h,f,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,xn(t,yn(r,{idToken:i}));case 6:Bt(null===(o=e.sent)||void 0===o?void 0:o.users.length,r,"internal-error"),s=o.users[0],t._notifyReloadListener(s),u=(null===(n=s.providerUserInfo)||void 0===n?void 0:n.length)?An(s.providerUserInfo):[],c=Pn(t.providerData,u),l=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(null===c||void 0===c?void 0:c.length),f=!!l&&h,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Tn(s.createdAt,s.lastLoginAt),isAnonymous:f},Object.assign(t,d);case 17:case"end":return e.stop()}}),e)}))),Nn.apply(this,arguments)}function Rn(){return(Rn=s(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=be(t),e.next=3,In(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pn(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(E(n),E(t))}function An(e){return e.map((function(e){var t=e.providerId,n=At(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function On(e,t){return Dn.apply(this,arguments)}function Dn(){return Dn=s(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,un(t,{},s(a().mark((function e(){var r,i,o,s,u,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=de({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,o=i.tokenApiHost,s=i.apiKey,u=fn(t,o,"/v1/token","key=".concat(s)),e.next=5,t._getAdditionalHeaders();case 5:return(c=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",tn.fetch()(u,{method:"POST",headers:c,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Dn.apply(this,arguments)}var Ln=function(){function e(){b(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return S(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Bt(e.idToken,"internal-error"),Bt("undefined"!==typeof e.idToken,"internal-error"),Bt("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=wn(e);return Bt(t,"internal-error"),Bt("undefined"!==typeof t.exp,"internal-error"),Bt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=s(a().mark((function e(t){var n,r=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Bt(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=s(a().mark((function e(t,n){var r,i,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,On(t,n);case 2:r=e.sent,i=r.accessToken,o=r.refreshToken,s=r.expiresIn,this.updateTokensAndExpiration(i,o,Number(s));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Ht("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Bt("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Bt("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Bt("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function jn(e,t){Bt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Mn=function(){function e(t){b(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=At(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?E(a.providerData):[],this.metadata=new Tn(a.createdAt||void 0,a.lastLoginAt||void 0)}return S(e,[{key:"getIdToken",value:function(){var e=s(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xn(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Bt(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return _n.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Rn.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Bt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=s(a().mark((function e(t){var n,r,i=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,In(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=s(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,xn(this,vn(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,_=n.emailVerified,b=n.isAnonymous,w=n.providerData,x=n.stsTokenManager;Bt(k&&x,t,"internal-error");var S=Ln.fromJSON(this.name,x);Bt("string"===typeof k,t,"internal-error"),jn(h,t.name),jn(f,t.name),Bt("boolean"===typeof _,t,"internal-error"),Bt("boolean"===typeof b,t,"internal-error"),jn(d,t.name),jn(p,t.name),jn(v,t.name),jn(m,t.name),jn(y,t.name),jn(g,t.name);var E=new e({uid:k,auth:t,email:f,emailVerified:_,displayName:h,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:S,createdAt:y,lastLoginAt:g});return w&&Array.isArray(w)&&(E.providerData=w.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=s(a().mark((function t(n,r){var i,o,s,u=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(o=new Ln).updateFromServerResponse(r),s=new e({uid:r.localId,auth:n,stsTokenManager:o,isAnonymous:i}),t.next=6,In(s);case 6:return t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Fn=function(){function e(){b(this,e),this.type="NONE",this.storage={}}return S(e,[{key:"_isAvailable",value:function(){var e=s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=s(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=s(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Fn.type="NONE";var Un=Fn;function Vn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var zn=function(){function e(t,n,r){b(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Vn(this.userKey,a.apiKey,o),this.fullPersistenceKey=Vn("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return S(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=s(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Mn._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=s(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=s(a().mark((function t(n,r){var i,o,u,c,l,h,f,d,p,v,m,y=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=y.length>2&&void 0!==y[2]?y[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Gt(Un),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:o=t.sent.filter((function(e){return e})),u=o[0]||Gt(Un),c=Vn(i,n.config.apiKey,n.name),l=null,h=_(r),t.prev=10,h.s();case 12:if((f=h.n()).done){t.next=29;break}return d=f.value,t.prev=14,t.next=17,d._get(c);case 17:if(!(p=t.sent)){t.next=23;break}return v=Mn._fromJSON(n,p),d!==u&&(l=v),u=d,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),h.e(t.t1);case 34:return t.prev=34,h.f(),t.finish(34);case 37:if(m=o.filter((function(e){return e._shouldAllowMigration})),u._shouldAllowMigration&&m.length){t.next=40;break}return t.abrupt("return",new e(u,n,i));case 40:if(u=m[0],!l){t.next=44;break}return t.next=44,u._set(c,l.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===u){e.next=8;break}return e.prev=1,e.next=4,t._remove(c);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(u,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function qn(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Kn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Bn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Qn(t))return"Blackberry";if($n(t))return"Webos";if(Hn(t))return"Safari";if((t.includes("chrome/")||Wn(t))&&!t.includes("edge/"))return"Chrome";if(Gn(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Bn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z();return/firefox\//i.test(e)}function Hn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Wn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z();return/crios\//i.test(e)}function Kn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z();return/iemobile/i.test(e)}function Gn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z();return/android/i.test(e)}function Qn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z();return/blackberry/i.test(e)}function $n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z();return/webos/i.test(e)}function Yn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Xn(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z();return Yn(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Jn(){return function(){var e=z();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Zn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z();return Yn(e)||Gn(e)||$n(e)||Qn(e)||/windows phone/i.test(e)||Kn(e)}function er(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=qn(z());break;case"Worker":t="".concat(qn(z()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(pt,"/").concat(r)}var tr=function(){function e(t){b(this,e),this.auth=t,this.queue=[]}return S(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=s(a().mark((function e(t){var n,r,i,o,s,u,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=_(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return o=i.value,e.next=11,o(t);case 11:o.onAbort&&n.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),s=_(n);try{for(s.s();!(u=s.n()).done;){c=u.value;try{c()}catch(a){}}}catch(l){s.e(l)}finally{s.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),nr=function(){function e(t,n,r){b(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ir(this),this.idTokenSubscription=new ir(this),this.beforeStateQueue=new tr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return S(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Gt(t)),this._initializationPromise=this.queue(s(a().mark((function r(){var i,o;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,zn.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(o=n.currentUser)||void 0===o?void 0:o.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=s(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=s(a().mark((function e(t){var n,r,i,o,s,u,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,o=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return s=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:c=e.sent,s&&s!==u||!(null===c||void 0===c?void 0:c.user)||(i=c.user,o=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!o){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Bt(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=s(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,In(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=s(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?be(t):null)&&Bt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=s(a().mark((function e(t){var n,r=this,i=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Bt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(s(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Gt(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new te("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=s(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=s(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Bt(n=t&&Gt(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,zn.create(this,[Gt(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=s(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=s(a().mark((function e(t){var n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Bt(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=er(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=s(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function rr(e){return be(e)}var ir=function(){function e(t){var n=this;b(this,e),this.auth=t,this.observer=null,this.addObserver=function(e,t){var n=new ye(e,t);return n.subscribe.bind(n)}((function(e){return n.observer=e}))}return S(e,[{key:"next",get:function(){return Bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function ar(e,t,n){var r=rr(e);Bt(r._canInitEmulator,r,"emulator-config-failed"),Bt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=or(t),o=function(e){var t=or(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:sr(r.substr(a.length+1))}}var o=l(r.split(":"),2);return{host:o[0],port:sr(o[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function or(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function sr(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var ur=function(){function e(t,n){b(this,e),this.providerId=t,this.signInMethod=n}return S(e,[{key:"toJSON",value:function(){return Ht("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Ht("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Ht("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Ht("not implemented")}}]),e}();function cr(e,t){return lr.apply(this,arguments)}function lr(){return lr=s(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",on(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),lr.apply(this,arguments)}function hr(e,t){return fr.apply(this,arguments)}function fr(){return fr=s(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ln(t,"POST","/v1/accounts:signInWithPassword",an(t,n)));case 1:case"end":return e.stop()}}),e)}))),fr.apply(this,arguments)}function dr(e,t){return pr.apply(this,arguments)}function pr(){return pr=s(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ln(t,"POST","/v1/accounts:signInWithEmailLink",an(t,n)));case 1:case"end":return e.stop()}}),e)}))),pr.apply(this,arguments)}function vr(e,t){return mr.apply(this,arguments)}function mr(){return mr=s(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ln(t,"POST","/v1/accounts:signInWithEmailLink",an(t,n)));case 1:case"end":return e.stop()}}),e)}))),mr.apply(this,arguments)}var yr=function(e){m(n,e);var t=k(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return b(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return S(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",hr(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",dr(t,{email:this._email,oobCode:this._password}));case 5:Ut(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=s(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",cr(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",vr(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Ut(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(ur);function gr(e,t){return kr.apply(this,arguments)}function kr(){return kr=s(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ln(t,"POST","/v1/accounts:signInWithIdp",an(t,n)));case 1:case"end":return e.stop()}}),e)}))),kr.apply(this,arguments)}var _r=function(e){m(n,e);var t=k(n);function n(){var e;return b(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return S(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return gr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,gr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,gr(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=de(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ut("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=At(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(ur);function br(e,t){return wr.apply(this,arguments)}function wr(){return wr=s(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",on(t,"POST","/v1/accounts:sendVerificationCode",an(t,n)));case 1:case"end":return e.stop()}}),e)}))),wr.apply(this,arguments)}function xr(){return xr=s(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ln(t,"POST","/v1/accounts:signInWithPhoneNumber",an(t,n)));case 1:case"end":return e.stop()}}),e)}))),xr.apply(this,arguments)}function Sr(){return Sr=s(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ln(t,"POST","/v1/accounts:signInWithPhoneNumber",an(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw pn(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Sr.apply(this,arguments)}var Er=C({},"USER_NOT_FOUND","user-not-found");function Cr(){return Cr=s(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",ln(t,"POST","/v1/accounts:signInWithPhoneNumber",an(t,r),Er));case 2:case"end":return e.stop()}}),e)}))),Cr.apply(this,arguments)}var Tr=function(e){m(n,e);var t=k(n);function n(e){var r;return b(this,n),(r=t.call(this,"phone","phone")).params=e,r}return S(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return xr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Sr.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Cr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(ur);var Ir=function(){function e(t){var n,r,i,a,o,s;b(this,e);var u=pe(ve(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);Bt(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return S(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=pe(ve(e)).link,n=t?pe(ve(t)).deep_link_id:null,r=pe(ve(e)).deep_link_id;return(r?pe(ve(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(HS){return null}}}]),e}();var Nr=function(){function e(){b(this,e),this.providerId=e.PROVIDER_ID}return S(e,null,[{key:"credential",value:function(e,t){return yr._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Ir.parseLink(t);return Bt(n,"argument-error"),yr._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Nr.PROVIDER_ID="password",Nr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Nr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Rr=function(){function e(t){b(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return S(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Pr=function(e){m(n,e);var t=k(n);function n(){var e;return b(this,n),(e=t.apply(this,arguments)).scopes=[],e}return S(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return E(this.scopes)}}]),n}(Rr),Ar=function(e){m(n,e);var t=k(n);function n(){return b(this,n),t.call(this,"facebook.com")}return S(n,null,[{key:"credential",value:function(e){return _r._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(HS){return null}}}]),n}(Pr);Ar.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ar.PROVIDER_ID="facebook.com";var Or=function(e){m(n,e);var t=k(n);function n(){var e;return b(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return S(n,null,[{key:"credential",value:function(e,t){return _r._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(HS){return null}}}]),n}(Pr);Or.GOOGLE_SIGN_IN_METHOD="google.com",Or.PROVIDER_ID="google.com";var Dr=function(e){m(n,e);var t=k(n);function n(){return b(this,n),t.call(this,"github.com")}return S(n,null,[{key:"credential",value:function(e){return _r._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(HS){return null}}}]),n}(Pr);Dr.GITHUB_SIGN_IN_METHOD="github.com",Dr.PROVIDER_ID="github.com";var Lr=function(e){m(n,e);var t=k(n);function n(){return b(this,n),t.call(this,"twitter.com")}return S(n,null,[{key:"credential",value:function(e,t){return _r._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(HS){return null}}}]),n}(Pr);function jr(e,t){return Mr.apply(this,arguments)}function Mr(){return Mr=s(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ln(t,"POST","/v1/accounts:signUp",an(t,n)));case 1:case"end":return e.stop()}}),e)}))),Mr.apply(this,arguments)}Lr.TWITTER_SIGN_IN_METHOD="twitter.com",Lr.PROVIDER_ID="twitter.com";var Fr=function(){function e(t){b(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return S(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=s(a().mark((function t(n,r,i){var o,s,u,c,l=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=l.length>3&&void 0!==l[3]&&l[3],t.next=3,Mn._fromIdTokenResponse(n,i,o);case 3:return s=t.sent,u=Ur(i),c=new e({user:s,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=s(a().mark((function t(n,r,i){var o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return o=Ur(i),t.abrupt("return",new e({user:n,providerId:o,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Ur(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var Vr=function(e){m(n,e);var t=k(n);function n(e,r,i,a){var o,s;return b(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(p(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return S(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(ee);function zr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Vr._fromErrorAndOperation(e,n,t,r);throw n}))}function qr(e,t){return Br.apply(this,arguments)}function Br(){return Br=s(a().mark((function e(t,n){var r,i,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]&&o[2],e.t0=xn,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Fr._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Br.apply(this,arguments)}function Hr(e,t){return Wr.apply(this,arguments)}function Wr(){return Wr=s(a().mark((function e(t,n){var r,i,o,s,u,c,l=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],i=t.auth,o="reauthenticate",e.prev=3,e.next=6,xn(t,zr(i,o,n,t),r);case 6:return Bt((s=e.sent).idToken,i,"internal-error"),Bt(u=wn(s.idToken),i,"internal-error"),c=u.sub,Bt(t.uid===c,i,"user-mismatch"),e.abrupt("return",Fr._forOperation(t,o,s));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Ut(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Wr.apply(this,arguments)}function Kr(e,t){return Gr.apply(this,arguments)}function Gr(){return Gr=s(a().mark((function e(t,n){var r,i,o,s,u=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,zr(t,i,n);case 4:return o=e.sent,e.next=7,Fr._fromIdTokenResponse(t,i,o);case 7:if(s=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(s.user);case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)}))),Gr.apply(this,arguments)}function Qr(e,t){return $r.apply(this,arguments)}function $r(){return $r=s(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kr(rr(t),n));case 1:case"end":return e.stop()}}),e)}))),$r.apply(this,arguments)}function Yr(e,t,n){return Xr.apply(this,arguments)}function Xr(){return Xr=s(a().mark((function e(t,n,r){var i,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=rr(t),e.next=3,jr(i,{returnSecureToken:!0,email:n,password:r});case 3:return o=e.sent,e.next=6,Fr._fromIdTokenResponse(i,"signIn",o);case 6:return s=e.sent,e.next=9,i._updateCurrentUser(s.user);case 9:return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)}))),Xr.apply(this,arguments)}function Jr(e,t,n){return Qr(be(e),Nr.credential(t,n))}function Zr(e,t,n,r){return be(e).onIdTokenChanged(t,n,r)}function ei(e,t,n){return be(e).beforeAuthStateChanged(t,n)}function ti(e,t,n,r){return be(e).onAuthStateChanged(t,n,r)}function ni(e){return be(e).signOut()}function ri(e,t){return on(e,"POST","/v2/accounts/mfaEnrollment:start",an(e,t))}new WeakMap;var ii="__sak",ai=function(){function e(t,n){b(this,e),this.storageRetriever=t,this.type=n}return S(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(ii,"1"),this.storage.removeItem(ii),Promise.resolve(!0)):Promise.resolve(!1)}catch(HS){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var oi=function(e){m(n,e);var t=k(n);function n(){var e;return b(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=z();return Hn(e)||Yn(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Zn(),e._shouldAllowMigration=!0,e}return S(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Jn()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=s(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(h(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=s(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(h(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(h(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ai);oi.type="LOCAL";var si=oi,ui=function(e){m(n,e);var t=k(n);function n(){return b(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return S(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(ai);ui.type="SESSION";var ci=ui;function li(e){return Promise.all(e.map(function(){var e=s(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var hi=function(){function e(t){b(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return S(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=s(a().mark((function e(t){var n,r,i,o,u,c,l,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,o=r.eventType,u=r.data,null===(c=this.handlersMap[o])||void 0===c?void 0:c.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:o}),l=Array.from(c).map(function(){var e=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,u));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,li(l);case 9:h=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:h});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function fi(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}hi.receivers=[];var di=function(){function e(t){b(this,e),this.target=t,this.handlers=new Set}return S(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=s(a().mark((function e(t,n){var r,i,o,s,u=this,c=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]?c[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,a){var c=fi("",20);i.port1.start();var l=setTimeout((function(){a(new Error("unsupported_event"))}),r);s={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),o=setTimeout((function(){a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(o),e(n.data.response);break;default:clearTimeout(l),clearTimeout(o),a(new Error("invalid_response"))}}},u.handlers.add(s),i.port1.addEventListener("message",s.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){s&&u.removeMessageHandler(s)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function pi(){return window}function vi(){return"undefined"!==typeof pi().WorkerGlobalScope&&"function"===typeof pi().importScripts}function mi(){return yi.apply(this,arguments)}function yi(){return(yi=s(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function gi(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var ki="firebaseLocalStorageDb",_i="firebaseLocalStorage",bi="fbase_key",wi=function(){function e(t){b(this,e),this.request=t}return S(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function xi(e,t){return e.transaction([_i],t?"readwrite":"readonly").objectStore(_i)}function Si(){var e=indexedDB.deleteDatabase(ki);return new wi(e).toPromise()}function Ei(){var e=indexedDB.open(ki,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(_i,{keyPath:bi})}catch(r){n(r)}})),e.addEventListener("success",s(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(_i)){n.next=12;break}return r.close(),n.next=5,Si();case 5:return n.t0=t,n.next=8,Ei();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Ci(e,t,n){return Ti.apply(this,arguments)}function Ti(){return Ti=s(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=xi(t,!0).put((C(i={},bi,n),C(i,"value",r),i)),e.abrupt("return",new wi(o).toPromise());case 2:case"end":return e.stop()}}),e)}))),Ti.apply(this,arguments)}function Ii(e,t){return Ni.apply(this,arguments)}function Ni(){return Ni=s(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xi(t,!1).get(n),e.next=3,new wi(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Ni.apply(this,arguments)}function Ri(e,t){var n=xi(e,!0).delete(t);return new wi(n).toPromise()}var Pi=function(){function e(){b(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return S(e,[{key:"_openDb",value:function(){var e=s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Ei();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=s(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vi()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=s(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=hi._getInstance(vi()?self:null),this.receiver._subscribe("keyChanged",function(){var e=s(a().mark((function e(n,r){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=s(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=s(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mi();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new di(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&gi()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=s(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Ei();case 5:return t=e.sent,e.next=8,Ci(t,ii,"1");case 8:return e.next=10,Ri(t,ii);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=s(a().mark((function e(t,n){var r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Ci(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=s(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Ii(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=s(a().mark((function e(t){var n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Ri(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=s(a().mark((function e(){var t,n,r,i,o,s,u,c,l,h,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=xi(e,!1).getAll();return new wi(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=_(t);try{for(i.s();!(o=i.n()).done;)s=o.value,u=s.fbase_key,c=s.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(c)&&(this.notifyListeners(u,c),n.push(u))}catch(a){i.e(a)}finally{i.f()}for(l=0,h=Object.keys(this.localCache);l<h.length;l++)f=h[l],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(s(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Pi.type="LOCAL";var Ai=Pi;function Oi(e,t){return on(e,"POST","/v2/accounts/mfaSignIn:start",an(e,t))}function Di(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Vt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Li(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}Li("rcb"),new Zt(3e4,6e4);var ji="recaptcha";function Mi(e,t,n){return Fi.apply(this,arguments)}function Fi(){return Fi=s(a().mark((function e(t,n,r){var i,o,s,u,c,l,h,f,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(o=e.sent,e.prev=3,Bt("string"===typeof o,t,"argument-error"),Bt(r.type===ji,t,"argument-error"),!("session"in(s="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=s.session,!("phoneNumber"in s)){e.next=17;break}return Bt("enroll"===u.type,t,"internal-error"),e.next=13,ri(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:o}});case 13:return c=e.sent,e.abrupt("return",c.phoneSessionInfo.sessionInfo);case 17:return Bt("signin"===u.type,t,"internal-error"),Bt(l=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Oi(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:o}});case 22:return h=e.sent,e.abrupt("return",h.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,br(t,{phoneNumber:s.phoneNumber,recaptchaToken:o});case 28:return f=e.sent,d=f.sessionInfo,e.abrupt("return",d);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Fi.apply(this,arguments)}var Ui=function(){function e(t){b(this,e),this.providerId=e.PROVIDER_ID,this.auth=rr(t)}return S(e,[{key:"verifyPhoneNumber",value:function(e,t){return Mi(this.auth,e,be(t))}}],[{key:"credential",value:function(e,t){return Tr._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Tr._fromTokenResponse(n,r):null}}]),e}();function Vi(e,t){return t?Gt(t):(Bt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ui.PROVIDER_ID="phone",Ui.PHONE_SIGN_IN_METHOD="phone";var zi=function(e){m(n,e);var t=k(n);function n(e){var r;return b(this,n),(r=t.call(this,"custom","custom")).params=e,r}return S(n,[{key:"_getIdTokenResponse",value:function(e){return gr(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return gr(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return gr(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(ur);function qi(e){return Kr(e.auth,new zi(e),e.bypassAuthState)}function Bi(e){var t=e.auth,n=e.user;return Bt(n,t,"internal-error"),Hr(n,new zi(e),e.bypassAuthState)}function Hi(e){return Wi.apply(this,arguments)}function Wi(){return Wi=s(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Bt(r=t.user,n,"internal-error"),e.abrupt("return",qr(r,new zi(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Wi.apply(this,arguments)}var Ki=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];b(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return S(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=s(a().mark((function t(n,r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=s(a().mark((function e(t){var n,r,i,o,s,u,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,o=t.tenantId,s=t.error,u=t.type,!s){e.next=4;break}return this.reject(s),e.abrupt("return");case 4:return c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(c);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qi;case"linkViaPopup":case"linkViaRedirect":return Hi;case"reauthViaPopup":case"reauthViaRedirect":return Bi;default:Ut(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Gi=new Zt(2e3,1e4);var Qi=function(e){m(n,e);var t=k(n);function n(e,r,i,a,o){var s;return b(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=p(s),s}return S(n,[{key:"executeNotNull",value:function(){var e=s(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Bt(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=s(a().mark((function e(){var t,n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wt(1===this.filter.length,"Popup operations only handle one event"),t=fi(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Vt(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Vt(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Vt(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Gi.get())}()}}]),n}(Ki);Qi.currentPopupAction=null;var $i=new Map,Yi=function(e){m(n,e);var t=k(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return b(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return S(n,[{key:"execute",value:function(){var e=s(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$i.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Xi(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,d(h(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:$i.set(this.auth._key(),t);case 21:return this.bypassAuthState||$i.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=s(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",d(h(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",d(h(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Ki);function Xi(e,t){return Ji.apply(this,arguments)}function Ji(){return Ji=s(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ta(n),i=ea(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,o="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)}))),Ji.apply(this,arguments)}function Zi(e,t){$i.set(e._key(),t)}function ea(e){return Gt(e._redirectPersistence)}function ta(e){return Vn("pendingRedirect",e.config.apiKey,e.name)}function na(e,t){return ra.apply(this,arguments)}function ra(){return ra=s(a().mark((function e(t,n){var r,i,o,s,u,c=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=rr(t),o=Vi(i,n),s=new Yi(i,o,r),e.next=6,s.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),ra.apply(this,arguments)}var ia=function(){function e(t){b(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return S(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oa(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!oa(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Vt(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(aa(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(aa(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function aa(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function oa(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function sa(e){return ua.apply(this,arguments)}function ua(){return ua=s(a().mark((function e(t){var n,r=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",on(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),ua.apply(this,arguments)}var ca=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,la=/^https?/;function ha(){return ha=s(a().mark((function e(t){var n,r,i,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,sa(t);case 4:n=e.sent,r=n.authorizedDomains,i=_(r),e.prev=7,i.s();case 9:if((o=i.n()).done){e.next=20;break}if(s=o.value,e.prev=11,!fa(s)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Ut(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),ha.apply(this,arguments)}function fa(e){var t=$t(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!la.test(r))return!1;if(ca.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var da=new Zt(3e4,6e4);function pa(){var e=pi().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=E(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var va=null;function ma(e){return va=va||function(e){return new Promise((function(t,n){var r,i,a;function o(){pa(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){pa(),n(Vt(e,"network-request-failed"))},timeout:da.get()})}if(null===(i=null===(r=pi().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=pi().gapi)||void 0===a?void 0:a.load)){var s=Li("iframefcb");return pi()[s]=function(){gapi.load?o():n(Vt(e,"network-request-failed"))},Di("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw va=null,e}))}(e),va}var ya=new Zt(5e3,15e3),ga={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ka=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _a(e){var t=e.config;Bt(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?en(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:pt},i=ka.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(de(r).slice(1))}function ba(e){return wa.apply(this,arguments)}function wa(){return wa=s(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ma(t);case 2:return n=e.sent,Bt(r=pi().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:_a(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ga,dontclear:!0},(function(e){return new Promise(function(){var n=s(a().mark((function n(r,i){var o,s,u;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){pi().clearTimeout(s),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:o=Vt(t,"network-request-failed"),s=pi().setTimeout((function(){i(o)}),ya.get()),e.ping(u).then(u,(function(){i(o)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),wa.apply(this,arguments)}var xa={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Sa="_blank",Ea="http://localhost",Ca=function(){function e(t){b(this,e),this.window=t,this.associatedEvent=null}return S(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Ta(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},xa),{width:r.toString(),height:i.toString(),top:a,left:o}),c=z().toLowerCase();n&&(s=Wn(c)?Sa:n),Bn(c)&&(t=t||Ea,u.scrollbars="yes");var h=Object.entries(u).reduce((function(e,t){var n=l(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Xn(c)&&"_self"!==s)return Ia(t||"",s),new Ca(null);var f=window.open(t||"",s,h);Bt(f,e,"popup-blocked");try{f.focus()}catch(d){}return new Ca(f)}function Ia(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Na="__/auth/handler",Ra="emulator/auth/handler";function Pa(e,t,n,r,i,a){Bt(e.config.authDomain,e,"auth-domain-config-required"),Bt(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:pt,eventId:i};if(t instanceof Rr){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",ce(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(a||{});s<u.length;s++){var c=l(u[s],2),h=c[0],f=c[1];o[h]=f}}if(t instanceof Pr){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Na);return en(t,Ra)}(e),"?").concat(de(p).slice(1))}var Aa="webStorageSupport",Oa=function(){function e(){b(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ci,this._completeRedirectFn=na,this._overrideRedirectResult=Zi}return S(e,[{key:"_openPopup",value:function(){var e=s(a().mark((function e(t,n,r,i){var o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wt(null===(o=this.eventManagers[t._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()"),s=Pa(t,n,r,$t(),i),e.abrupt("return",Ta(t,s,fi()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=s(a().mark((function e(t,n,r,i){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Pa(t,n,r,$t(),i),pi().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Wt(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=s(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ba(t);case 2:return n=e.sent,r=new ia(t),n.register("authEvent",(function(e){return Bt(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Aa,{type:Aa},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Aa];void 0!==i&&t(!!i),Ut(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return ha.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Zn()||Hn()||Yn()}}]),e}(),Da=Oa,La=function(){function e(t){b(this,e),this.factorId=t}return S(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ht("unexpected MultiFactorSessionType")}}}]),e}(),ja=function(e){m(n,e);var t=k(n);function n(e){var r;return b(this,n),(r=t.call(this,"phone")).credential=e,r}return S(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return on(e,"POST","/v2/accounts/mfaEnrollment:finalize",an(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return on(e,"POST","/v2/accounts/mfaSignIn:finalize",an(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(La);(function(){function e(){b(this,e)}return S(e,null,[{key:"assertion",value:function(e){return ja._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var Ma="@firebase/auth",Fa="0.21.0",Ua=function(){function e(t){b(this,e),this.auth=t,this.internalListeners=new Map}return S(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=s(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Va,za=X("authIdTokenMaxAge")||300,qa=null,Ba=function(e){return function(){var t=s(a().mark((function t(n){var r,i,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,!t.t0){t.next=5;break}return t.next=4,n.getIdTokenResult();case 4:t.t0=t.sent;case 5:if(r=t.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>za)){t.next=9;break}return t.abrupt("return");case 9:if(o=null===r||void 0===r?void 0:r.token,qa!==o){t.next=12;break}return t.abrupt("return");case 12:return qa=o,t.next=15,fetch(e,{method:o?"POST":"DELETE",headers:o?{Authorization:"Bearer ".concat(o)}:{}});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};Va="Browser",ct(new we("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){Bt(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Bt(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:Va,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:er(Va)},i=new nr(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gt);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),ct(new we("auth-internal",(function(e){return function(e){return new Ua(e)}(rr(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),yt(Ma,Fa,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Va)),yt(Ma,Fa,"esm2017");var Ha=n(248),Wa=n(327),Ka=n(164);var Ga=function(e){e()},Qa=function(){return Ga},$a=(0,e.createContext)(null);function Ya(){return(0,e.useContext)($a)}var Xa=function(){throw new Error("uSES not initialized!")},Ja=Xa,Za=function(e,t){return e===t};function eo(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$a,n=t===$a?Ya:function(){return(0,e.useContext)(t)};return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Za;var i=n(),a=i.store,o=i.subscription,s=i.getServerState,u=Ja(o.addNestedSub,a.getState,s||a.getState,t,r);return(0,e.useDebugValue)(u),u}}var to=eo();n(110),n(900);var no={notify:function(){},get:function(){return[]}};function ro(e,t){var n,r=no;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=Qa(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=no)},getListeners:function(){return r}};return o}var io=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?e.useLayoutEffect:e.useEffect;var ao=function(t){var n=t.store,r=t.context,i=t.children,a=t.serverState,o=(0,e.useMemo)((function(){var e=ro(n);return{store:n,subscription:e,getServerState:a?function(){return a}:void 0}}),[n,a]),s=(0,e.useMemo)((function(){return n.getState()}),[n]);io((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),s!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,s]);var u=r||$a;return e.createElement(u.Provider,{value:o},i)};function oo(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$a,n=t===$a?Ya:function(){return(0,e.useContext)(t)};return function(){return n().store}}var so=oo();function uo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$a,t=e===$a?so:oo(e);return function(){return t().dispatch}}var co,lo,ho=uo();function fo(){return fo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fo.apply(this,arguments)}!function(e){Ja=e}(Wa.useSyncExternalStoreWithSelector),function(e){e}(Ha.useSyncExternalStore),co=Ka.unstable_batchedUpdates,Ga=co,function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(lo||(lo={}));var po,vo="popstate";function mo(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function yo(e){return{usr:e.state,key:e.key}}function go(e,t,n,r){return void 0===n&&(n=null),fo({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?_o(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function ko(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function _o(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function bo(e){var t="undefined"!==typeof window&&"undefined"!==typeof window.location&&"null"!==window.location.origin?window.location.origin:window.location.href,n="string"===typeof e?e:ko(e);return mo(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}function wo(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,s=i.v5Compat,u=void 0!==s&&s,c=o.history,l=lo.Pop,h=null;function f(){l=lo.Pop,h&&h({action:l,location:d.location})}var d={get action(){return l},get location(){return e(o,c)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(vo,f),h=e,function(){o.removeEventListener(vo,f),h=null}},createHref:function(e){return t(o,e)},encodeLocation:function(e){var t=bo("string"===typeof e?e:ko(e));return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=lo.Push;var r=go(d.location,e,t);n&&n(r,e);var i=yo(r),a=d.createHref(r);try{c.pushState(i,"",a)}catch(bu){o.location.assign(a)}u&&h&&h({action:l,location:d.location})},replace:function(e,t){l=lo.Replace;var r=go(d.location,e,t);n&&n(r,e);var i=yo(r),a=d.createHref(r);c.replaceState(i,"",a),u&&h&&h({action:l,location:d.location})},go:function(e){return c.go(e)}};return d}function xo(e,t,n){void 0===n&&(n="/");var r=Po(("string"===typeof t?_o(t):t).pathname||"/",n);if(null==r)return null;var i=So(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=Io(i[o],Ro(r));return a}function So(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(mo(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));var o=jo([r,a.relativePath]),s=n.concat(a);e.children&&e.children.length>0&&(mo(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),So(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:To(o,e.index),routesMeta:s})})),t}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(po||(po={}));var Eo=/^:\w+$/,Co=function(e){return"*"===e};function To(e,t){var n=e.split("/"),r=n.length;return n.some(Co)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!Co(e)})).reduce((function(e,t){return e+(Eo.test(t)?3:""===t?1:10)}),r)}function Io(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=No({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var h=s.route;a.push({params:r,pathname:jo([i,l.pathname]),pathnameBase:Mo(jo([i,l.pathnameBase])),route:h}),"/"!==l.pathnameBase&&(i=jo([i,l.pathnameBase]))}return a}function No(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Ao("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=l(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1),h=a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(bu){return Ao(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+bu+")."),e}}(c[n]||"",t),e}),{});return{params:h,pathname:s,pathnameBase:u,pattern:e}}function Ro(e){try{return decodeURI(e)}catch(bu){return Ao(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+bu+")."),e}}function Po(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Ao(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Oo(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Do(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function Lo(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=_o(e):(mo(!(i=fo({},e)).pathname||!i.pathname.includes("?"),Oo("?","pathname","search",i)),mo(!i.pathname||!i.pathname.includes("#"),Oo("#","pathname","hash",i)),mo(!i.search||!i.search.includes("#"),Oo("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(r||null==s)a=n;else{var u=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u-=1;i.pathname=c.join("/")}a=u>=0?t[u]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?_o(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:Fo(a),hash:Uo(s)}}(i,a),h=s&&"/"!==s&&s.endsWith("/"),f=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!h&&!f||(l.pathname+="/"),l}var jo=function(e){return e.join("/").replace(/\/\/+/g,"/")},Mo=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},Fo=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},Uo=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},Vo=function(e){m(n,e);var t=k(n);function n(){return b(this,n),t.apply(this,arguments)}return S(n)}(I(Error));var zo=S((function e(t,n,r,i){b(this,e),void 0===i&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}));function qo(e){return e instanceof zo}var Bo=["post","put","patch","delete"],Ho=(new Set(Bo),["get"].concat(Bo));new Set(Ho),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;function Wo(){return Wo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wo.apply(this,arguments)}var Ko="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Go=e.useState,Qo=e.useEffect,$o=e.useLayoutEffect,Yo=e.useDebugValue;function Xo(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!Ko(n,r)}catch(bu){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,t.useSyncExternalStore;var Jo=e.createContext(null);var Zo=e.createContext(null);var es=e.createContext(null);var ts=e.createContext(null);var ns=e.createContext(null);var rs=e.createContext(null);var is=e.createContext({outlet:null,matches:[]});var as=e.createContext(null);function os(){return null!=e.useContext(rs)}function ss(){return os()||mo(!1),e.useContext(rs).location}function us(){os()||mo(!1);var t=e.useContext(ns),n=t.basename,r=t.navigator,i=e.useContext(is).matches,a=ss().pathname,o=JSON.stringify(Do(i).map((function(e){return e.pathnameBase}))),s=e.useRef(!1);e.useEffect((function(){s.current=!0}));var u=e.useCallback((function(e,t){if(void 0===t&&(t={}),s.current)if("number"!==typeof e){var i=Lo(e,JSON.parse(o),a,"path"===t.relative);"/"!==n&&(i.pathname="/"===i.pathname?n:jo([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state,t)}else r.go(e)}),[n,r,o,a]);return u}function cs(t,n){var r=(void 0===n?{}:n).relative,i=e.useContext(is).matches,a=ss().pathname,o=JSON.stringify(Do(i).map((function(e){return e.pathnameBase})));return e.useMemo((function(){return Lo(t,JSON.parse(o),a,"path"===r)}),[t,o,a,r])}function ls(){var t=function(){var t,n=e.useContext(as),r=ms(fs.UseRouteError),i=e.useContext(is),a=i.matches[i.matches.length-1];if(n)return n;return i||mo(!1),!a.route.id&&mo(!1),null==(t=r.errors)?void 0:t[a.route.id]}(),n=qo(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unhandled Thrown Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:a},r):null,e.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",e.createElement("code",{style:o},"errorElement")," props on\xa0",e.createElement("code",{style:o},"<Route>")))}var hs,fs,ds=function(t){m(r,t);var n=k(r);function r(e){var t;return b(this,r),(t=n.call(this,e)).state={location:e.location,error:e.error},t}return S(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?e.createElement(as.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),r}(e.Component);function ps(t){var n=t.routeContext,r=t.match,i=t.children,a=e.useContext(Jo);return a&&r.route.errorElement&&(a._deepestRenderedBoundaryId=r.route.id),e.createElement(is.Provider,{value:n},i)}function vs(t,n,r){if(void 0===n&&(n=[]),null==t){if(null==r||!r.errors)return null;t=r.matches}var i=t,a=null==r?void 0:r.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||mo(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(t,o,s){var u=o.route.id?null==a?void 0:a[o.route.id]:null,c=r?o.route.errorElement||e.createElement(ls,null):null,l=function(){return e.createElement(ps,{match:o,routeContext:{outlet:t,matches:n.concat(i.slice(0,s+1))}},u?c:void 0!==o.route.element?o.route.element:t)};return r&&(o.route.errorElement||0===s)?e.createElement(ds,{location:r.location,component:c,error:u,children:l()}):l()}),null)}function ms(t){var n=e.useContext(es);return n||mo(!1),n}!function(e){e.UseRevalidator="useRevalidator"}(hs||(hs={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(fs||(fs={}));var ys;function gs(e){mo(!1)}function ks(t){var n=t.basename,r=void 0===n?"/":n,i=t.children,a=void 0===i?null:i,o=t.location,s=t.navigationType,u=void 0===s?lo.Pop:s,c=t.navigator,l=t.static,h=void 0!==l&&l;os()&&mo(!1);var f=r.replace(/^\/*/,"/"),d=e.useMemo((function(){return{basename:f,navigator:c,static:h}}),[f,c,h]);"string"===typeof o&&(o=_o(o));var p=o,v=p.pathname,m=void 0===v?"/":v,y=p.search,g=void 0===y?"":y,k=p.hash,_=void 0===k?"":k,b=p.state,w=void 0===b?null:b,x=p.key,S=void 0===x?"default":x,E=e.useMemo((function(){var e=Po(m,f);return null==e?null:{pathname:e,search:g,hash:_,state:w,key:S}}),[f,m,g,_,w,S]);return null==E?null:e.createElement(ns.Provider,{value:d},e.createElement(rs.Provider,{children:a,value:{location:E,navigationType:u}}))}function _s(t){var n=t.children,r=t.location,i=e.useContext(Zo);return function(t,n){os()||mo(!1);var r,i=e.useContext(ns).navigator,a=e.useContext(es),o=e.useContext(is).matches,s=o[o.length-1],u=s?s.params:{},c=(s&&s.pathname,s?s.pathnameBase:"/"),l=(s&&s.route,ss());if(n){var h,f="string"===typeof n?_o(n):n;"/"===c||(null==(h=f.pathname)?void 0:h.startsWith(c))||mo(!1),r=f}else r=l;var d=r.pathname||"/",p=xo(t,{pathname:"/"===c?d:d.slice(c.length)||"/"}),v=vs(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:jo([c,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:jo([c,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,a||void 0);return n&&v?e.createElement(rs.Provider,{value:{location:Wo({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:lo.Pop}},v):v}(i&&!n?i.router.routes:ws(n),r)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(ys||(ys={}));var bs=new Promise((function(){}));e.Component;function ws(t,n){void 0===n&&(n=[]);var r=[];return e.Children.forEach(t,(function(t,i){if(e.isValidElement(t))if(t.type!==e.Fragment){t.type!==gs&&mo(!1),t.props.index&&t.props.children&&mo(!1);var a=[].concat(E(n),[i]),o={id:t.props.id||a.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,hasErrorBoundary:null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle};t.props.children&&(o.children=ws(t.props.children,a)),r.push(o)}else r.push.apply(r,ws(t.props.children,n))})),r}function xs(){return xs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xs.apply(this,arguments)}function Ss(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Es=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],Cs=["aria-current","caseSensitive","className","end","style","to","children"];function Ts(t){var n,r=t.basename,i=t.children,a=t.window,o=e.useRef();null==o.current&&(o.current=(void 0===(n={window:a,v5Compat:!0})&&(n={}),wo((function(e,t){var n=e.location;return go("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:ko(t)}),null,n)));var s=o.current,u=l(e.useState({action:s.action,location:s.location}),2),c=u[0],h=u[1];return e.useLayoutEffect((function(){return s.listen(h)}),[s]),e.createElement(ks,{basename:r,children:i,location:c.location,navigationType:c.action,navigator:s})}var Is=e.forwardRef((function(t,n){var r=t.onClick,i=t.relative,a=t.reloadDocument,o=t.replace,s=t.state,u=t.target,c=t.to,l=t.preventScrollReset,h=Ss(t,Es),f=function(t,n){var r=(void 0===n?{}:n).relative;os()||mo(!1);var i=e.useContext(ns),a=i.basename,o=i.navigator,s=cs(t,{relative:r}),u=s.hash,c=s.pathname,l=s.search,h=c;return"/"!==a&&(h="/"===c?a:jo([a,c])),o.createHref({pathname:h,search:l,hash:u})}(c,{relative:i}),d=function(t,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,s=r.preventScrollReset,u=r.relative,c=us(),l=ss(),h=cs(t,{relative:u});return e.useCallback((function(e){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,i)){e.preventDefault();var n=void 0!==a?a:ko(l)===ko(h);c(t,{replace:n,state:o,preventScrollReset:s,relative:u})}}),[l,c,h,a,o,i,t,s,u])}(c,{replace:o,state:s,target:u,preventScrollReset:l,relative:i});return e.createElement("a",xs({},h,{href:f,onClick:a?r:function(e){r&&r(e),e.defaultPrevented||d(e)},ref:n,target:u}))}));var Ns=e.forwardRef((function(t,n){var r=t["aria-current"],i=void 0===r?"page":r,a=t.caseSensitive,o=void 0!==a&&a,s=t.className,u=void 0===s?"":s,c=t.end,l=void 0!==c&&c,h=t.style,f=t.to,d=t.children,p=Ss(t,Cs),v=cs(f,{relative:p.relative}),m=ss(),y=e.useContext(es),g=e.useContext(ns).navigator,k=g.encodeLocation?g.encodeLocation(v).pathname:v.pathname,_=m.pathname,b=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;o||(_=_.toLowerCase(),b=b?b.toLowerCase():null,k=k.toLowerCase());var w,x=_===k||!l&&_.startsWith(k)&&"/"===_.charAt(k.length),S=null!=b&&(b===k||!l&&b.startsWith(k)&&"/"===b.charAt(k.length)),E=x?i:void 0;w="function"===typeof u?u({isActive:x,isPending:S}):[u,x?"active":null,S?"pending":null].filter(Boolean).join(" ");var C="function"===typeof h?h({isActive:x,isPending:S}):h;return e.createElement(Is,xs({},p,{"aria-current":E,className:w,ref:n,style:C,to:f}),"function"===typeof d?d({isActive:x,isPending:S}):d)}));var Rs,Ps;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Rs||(Rs={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ps||(Ps={}));var As=n(184),Os=function(e){var t=e.active;return(0,As.jsxs)("div",{className:"nav "+t,children:[(0,As.jsx)(Ns,{to:"/Shop/",children:"Home"}),(0,As.jsx)(Ns,{to:"/Shop/products",children:"Products"}),(0,As.jsx)(Ns,{to:"/Shop/cart",children:"Cart"})]})},Ds={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ls=e.createContext&&e.createContext(Ds),js=function(){return js=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},js.apply(this,arguments)},Ms=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Fs(t){return t&&t.map((function(t,n){return e.createElement(t.tag,js({key:n},t.attr),Fs(t.child))}))}function Us(t){return function(n){return e.createElement(Vs,js({attr:js({},t.attr)},n),Fs(t.child))}}function Vs(t){var n=function(n){var r,i=t.attr,a=t.size,o=t.title,s=Ms(t,["attr","size","title"]),u=a||n.size||"1em";return n.className&&(r=n.className),t.className&&(r=(r?r+" ":"")+t.className),e.createElement("svg",js({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,s,{className:r,style:js(js({color:t.color||n.color},n.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&e.createElement("title",null,o),t.children)};return void 0!==Ls?e.createElement(Ls.Consumer,null,(function(e){return n(e)})):n(Ds)}function zs(e){return Us({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 378.7c-73.4 0-133.3 59.9-133.3 133.3S438.6 645.3 512 645.3 645.3 585.4 645.3 512 585.4 378.7 512 378.7zM911.8 512c0-55.2.5-109.9-2.6-165-3.1-64-17.7-120.8-64.5-167.6-46.9-46.9-103.6-61.4-167.6-64.5-55.2-3.1-109.9-2.6-165-2.6-55.2 0-109.9-.5-165 2.6-64 3.1-120.8 17.7-167.6 64.5C132.6 226.3 118.1 283 115 347c-3.1 55.2-2.6 109.9-2.6 165s-.5 109.9 2.6 165c3.1 64 17.7 120.8 64.5 167.6 46.9 46.9 103.6 61.4 167.6 64.5 55.2 3.1 109.9 2.6 165 2.6 55.2 0 109.9.5 165-2.6 64-3.1 120.8-17.7 167.6-64.5 46.9-46.9 61.4-103.6 64.5-167.6 3.2-55.1 2.6-109.8 2.6-165zM512 717.1c-113.5 0-205.1-91.6-205.1-205.1S398.5 306.9 512 306.9 717.1 398.5 717.1 512 625.5 717.1 512 717.1zm213.5-370.7c-26.5 0-47.9-21.4-47.9-47.9s21.4-47.9 47.9-47.9 47.9 21.4 47.9 47.9a47.84 47.84 0 0 1-47.9 47.9z"}}]})(e)}function qs(e){return Us({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 0 0 .6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0 0 46.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]})(e)}function Bs(e){return Us({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M894 462c30.9 0 43.8-39.7 18.7-58L530.8 126.2a31.81 31.81 0 0 0-37.6 0L111.3 404c-25.1 18.2-12.2 58 18.8 58H192v374h-72c-4.4 0-8 3.6-8 8v52c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-52c0-4.4-3.6-8-8-8h-72V462h62zM512 196.7l271.1 197.2H240.9L512 196.7zM264 462h117v374H264V462zm189 0h117v374H453V462zm307 374H642V462h118v374z"}}]})(e)}function Hs(e){return Us({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]})(e)}function Ws(e){return Us({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0 0 51.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]})(e)}function Ks(e){return Us({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attr:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]})(e)}function Gs(e){return Us({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 0 0-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attr:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]})(e)}function Qs(e){return Us({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z"}}]})(e)}function $s(e){return Us({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]})(e)}function Ys(e){return Us({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm47.7-395.2l-25.4-5.9V348.6c38 5.2 61.5 29 65.5 58.2.5 4 3.9 6.9 7.9 6.9h44.9c4.7 0 8.4-4.1 8-8.8-6.1-62.3-57.4-102.3-125.9-109.2V263c0-4.4-3.6-8-8-8h-28.1c-4.4 0-8 3.6-8 8v33c-70.8 6.9-126.2 46-126.2 119 0 67.6 49.8 100.2 102.1 112.7l24.7 6.3v142.7c-44.2-5.9-69-29.5-74.1-61.3-.6-3.8-4-6.6-7.9-6.6H363c-4.7 0-8.4 4-8 8.7 4.5 55 46.2 105.6 135.2 112.1V761c0 4.4 3.6 8 8 8h28.4c4.4 0 8-3.6 8-8.1l-.2-31.7c78.3-6.9 134.3-48.8 134.3-124-.1-69.4-44.2-100.4-109-116.4zm-68.6-16.2c-5.6-1.6-10.3-3.1-15-5-33.8-12.2-49.5-31.9-49.5-57.3 0-36.3 27.5-57 64.5-61.7v124zM534.3 677V543.3c3.1.9 5.9 1.6 8.8 2.2 47.3 14.4 63.2 34.4 63.2 65.1 0 39.1-29.4 62.6-72 66.4z"}}]})(e)}function Xs(e){return Us({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]})(e)}function Js(e){return Us({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]})(e)}function Zs(e){return Us({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0 0 11.6 0l43.6-43.5a8.2 8.2 0 0 0 0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]})(e)}function eu(e){return Us({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M882 272.1V144c0-17.7-14.3-32-32-32H174c-17.7 0-32 14.3-32 32v128.1c-16.7 1-30 14.9-30 31.9v131.7a177 177 0 0 0 14.4 70.4c4.3 10.2 9.6 19.8 15.6 28.9v345c0 17.6 14.3 32 32 32h676c17.7 0 32-14.3 32-32V535a175 175 0 0 0 15.6-28.9c9.5-22.3 14.4-46 14.4-70.4V304c0-17-13.3-30.9-30-31.9zM214 184h596v88H214v-88zm362 656.1H448V736h128v104.1zm234 0H640V704c0-17.7-14.3-32-32-32H416c-17.7 0-32 14.3-32 32v136.1H214V597.9c2.9 1.4 5.9 2.8 9 4 22.3 9.4 46 14.1 70.4 14.1s48-4.7 70.4-14.1c13.8-5.8 26.8-13.2 38.7-22.1.2-.1.4-.1.6 0a180.4 180.4 0 0 0 38.7 22.1c22.3 9.4 46 14.1 70.4 14.1 24.4 0 48-4.7 70.4-14.1 13.8-5.8 26.8-13.2 38.7-22.1.2-.1.4-.1.6 0a180.4 180.4 0 0 0 38.7 22.1c22.3 9.4 46 14.1 70.4 14.1 24.4 0 48-4.7 70.4-14.1 3-1.3 6-2.6 9-4v242.2zm30-404.4c0 59.8-49 108.3-109.3 108.3-40.8 0-76.4-22.1-95.2-54.9-2.9-5-8.1-8.1-13.9-8.1h-.6c-5.7 0-11 3.1-13.9 8.1A109.24 109.24 0 0 1 512 544c-40.7 0-76.2-22-95-54.7-3-5.1-8.4-8.3-14.3-8.3s-11.4 3.2-14.3 8.3a109.63 109.63 0 0 1-95.1 54.7C233 544 184 495.5 184 435.7v-91.2c0-.3.2-.5.5-.5h655c.3 0 .5.2.5.5v91.2z"}}]})(e)}function tu(e){return Us({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M922.9 701.9H327.4l29.9-60.9 496.8-.9c16.8 0 31.2-12 34.2-28.6l68.8-385.1c1.8-10.1-.9-20.5-7.5-28.4a34.99 34.99 0 0 0-26.6-12.5l-632-2.1-5.4-25.4c-3.4-16.2-18-28-34.6-28H96.5a35.3 35.3 0 1 0 0 70.6h125.9L246 312.8l58.1 281.3-74.8 122.1a34.96 34.96 0 0 0-3 36.8c6 11.9 18.1 19.4 31.5 19.4h62.8a102.43 102.43 0 0 0-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7h161.1a102.43 102.43 0 0 0-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7H923c19.4 0 35.3-15.8 35.3-35.3a35.42 35.42 0 0 0-35.4-35.2zM305.7 253l575.8 1.9-56.4 315.8-452.3.8L305.7 253zm96.9 612.7c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 0 1-31.6 31.6zm325.1 0c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 0 1-31.6 31.6z"}}]})(e)}function nu(e){return Us({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M832 312H696v-16c0-101.6-82.4-184-184-184s-184 82.4-184 184v16H192c-17.7 0-32 14.3-32 32v536c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V344c0-17.7-14.3-32-32-32zm-432-16c0-61.9 50.1-112 112-112s112 50.1 112 112v16H400v-16zm392 544H232V384h96v88c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-88h224v88c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-88h96v456z"}}]})(e)}function ru(e){return Us({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 464H528V448h312v128zm0 264H184V184h656v200H496c-17.7 0-32 14.3-32 32v192c0 17.7 14.3 32 32 32h344v200zM580 512a40 40 0 1 0 80 0 40 40 0 1 0-80 0z"}}]})(e)}yt("firebase","9.15.0","app");var iu="@firebase/database",au="0.14.0",ou="";var su=function(){function e(t){b(this,e),this.domStorage_=t,this.prefix_="firebase:"}return S(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ae(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ie(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),uu=function(){function e(){b(this,e),this.cache_={},this.isInMemoryStorage=!0}return S(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return se(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),cu=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new su(t)}}catch(n){}return new uu},lu=cu("localStorage"),hu=cu("sessionStorage"),fu=new Oe("@firebase/database"),du=function(){var e=1;return function(){return e++}}(),pu=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,A(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new me;n.update(t);var r=n.digest();return L.encodeByteArray(r)},vu=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?ae(r):r,t+=" "}return t},mu=null,yu=!0,gu=function(e,t){A(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(fu.logLevel=Ce.VERBOSE,mu=fu.log.bind(fu),t&&hu.set("logging_enabled",!0)):"function"===typeof e?mu=e:(mu=null,hu.remove("logging_enabled"))},ku=function(){if(!0===yu&&(yu=!1,null===mu&&!0===hu.get("logging_enabled")&&gu(!0)),mu){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=vu.apply(null,t);mu(r)}},_u=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];ku.apply(void 0,[e].concat(n))}},bu=function(){var e="FIREBASE INTERNAL ERROR: "+vu.apply(void 0,arguments);fu.error(e)},wu=function(){var e="FIREBASE FATAL ERROR: ".concat(vu.apply(void 0,arguments));throw fu.error(e),new Error(e)},xu=function(){var e="FIREBASE WARNING: "+vu.apply(void 0,arguments);fu.warn(e)},Su=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Eu="[MIN_NAME]",Cu="[MAX_NAME]",Tu=function(e,t){if(e===t)return 0;if(e===Eu||t===Cu)return-1;if(t===Eu||e===Cu)return 1;var n=Lu(e),r=Lu(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Iu=function(e,t){return e===t?0:e<t?-1:1},Nu=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+ae(t))},Ru=function e(t){if("object"!==typeof t||null===t)return ae(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=ae(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},Pu=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Au(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var Ou=function(e){A(!Su(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var Du=new RegExp("^-?(0*)\\d{1,10}$"),Lu=function(e){if(Du.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},ju=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw xu("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Mu=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},Fu=function(){function e(t,n){var r=this;b(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return S(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){xu('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),Uu=function(){function e(t,n,r){var i=this;b(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return S(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(ku("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xu(e)}}]),e}(),Vu=function(){function e(t){b(this,e),this.accessToken=t}return S(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();Vu.OWNER="owner";var zu="5",qu=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Bu="ac",Hu="websocket",Wu="long_polling",Ku=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];b(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=lu.get("host:"+t)||this._host}return S(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&lu.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function Gu(e,t,n){var r;if(A("string"===typeof t,"typeof type must == string"),A("object"===typeof n,"typeof params must == object"),t===Hu)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Wu)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return Au(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var Qu=function(){function e(){b(this,e),this.counters_={}}return S(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;se(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return U(this.counters_)}}]),e}(),$u={},Yu={};function Xu(e){var t=e.toString();return $u[t]||($u[t]=new Qu),$u[t]}var Ju=function(){function e(t){b(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return S(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&ju((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),Zu="start",ec="close",tc=function(){function e(t,n,r,i,a,o,s){var u=this;b(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=_u(t),this.stats_=Xu(n),this.urlFn=function(e){return u.appCheckToken&&(e[Bu]=u.appCheckToken),Gu(n,Wu,e)}}return S(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Ju(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(H()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new nc((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Zu)n.id=a,n.password=o;else{if(i!==ec)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[Zu]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=zu,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[Bu]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&qu.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=ae(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=j(t),r=Pu(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!H()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=ae(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!H()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),nc=function(){function e(t,n,r,i){if(b(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,H())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=du(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){ku("frame writing exception"),s.stack&&ku(s.stack),ku(s)}}}return S(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;H()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){ku("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ku("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),rc=null;"undefined"!==typeof MozWebSocket?rc=MozWebSocket:"undefined"!==typeof WebSocket&&(rc=WebSocket);var ic=function(){function e(t,n,r,i,a,o,s){b(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=_u(this.connId),this.stats_=Xu(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return S(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,lu.set("previous_websocket_failure",!0);try{var r;if(H()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(zu,"/").concat(ou,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/Shop",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new rc(this.connURL,[],r)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){lu.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=ie(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(A(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=ae(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Pu(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=zu,!H()&&"undefined"!==typeof location&&location.hostname&&qu.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[Bu]=r),i&&(a.p=i),Gu(e,Hu,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==rc&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return lu.isInMemoryStorage||!0===lu.get("previous_websocket_failure")}}]),e}();ic.responsesRequiredToBeHealthy=2,ic.healthyTimeout=3e4;var ac=function(){function e(t){b(this,e),this.initTransports_(t)}return S(e,[{key:"initTransports_",value:function(t){var n=ic&&ic.isAvailable(),r=n&&!ic.previouslyFailed();if(t.webSocketOnly&&(n||xu("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ic];else{var i,a=this.transports_=[],o=_(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[tc,ic]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();ac.globalTransportInitialized_=!1;var oc=function(){function e(t,n,r,i,a,o,s,u,c,l){b(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=_u("c:"+this.id+":"),this.transportManager_=new ac(n),this.log_("Connection created"),this.start_()}return S(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Mu((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=Nu("t",e),n=Nu("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=Nu("t",e),n=Nu("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=Nu("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?bu("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):bu("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),zu!==n&&xu("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Mu((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Mu((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(lu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),sc=function(){function e(){b(this,e)}return S(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),uc=function(){function e(t){b(this,e),this.allowedEvents_=t,this.listeners_={},A(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return S(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=E(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){A(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),cc=function(e){m(n,e);var t=k(n);function n(){var e;return b(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||q()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return S(n,[{key:"getInitialEvent",value:function(e){return A("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(uc),lc=function(){function e(t,n){if(b(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return S(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function hc(){return new lc("")}function fc(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function dc(e){return e.pieces_.length-e.pieceNum_}function pc(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new lc(e.pieces_,t)}function vc(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function mc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function yc(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new lc(t,0)}function gc(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof lc)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new lc(n,0)}function kc(e){return e.pieceNum_>=e.pieces_.length}function _c(e,t){var n=fc(e),r=fc(t);if(null===n)return t;if(n===r)return _c(pc(e),pc(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function bc(e,t){if(dc(e)!==dc(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function wc(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(dc(e)>dc(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var xc=S((function e(t,n){b(this,e),this.errorPrefix_=n,this.parts_=mc(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=_e(this.parts_[r]);Sc(this)}));function Sc(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ec(e))}function Ec(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Cc=function(e){m(n,e);var t=k(n);function n(){var e,r,i;return b(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return S(n,[{key:"getInitialEvent",value:function(e){return A("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(uc),Tc=1e3,Ic=function(e){m(n,e);var t=k(n);function n(e,r,i,a,o,s,u,c){var l;if(b(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=_u("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Tc,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!H())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Cc.getInstance().on("visible",l.onVisible_,p(l)),-1===e.host.indexOf("fblocal")&&cc.getInstance().on("online",l.onOnline_,p(l)),l}return S(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(ae(i)),A(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new J,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),A(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),A(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=oe(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=oe(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),A(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+ae(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):bu("Unrecognized action received from server: "+ae(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;A(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Tc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Tc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Tc),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=s(a().mark((function e(){var t,r,i,o,s,u,c,h,f,d,p,v,m,y,g=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+n.nextConnectionId_++,s=this.lastSessionId,u=!1,c=null,h=function(){c?c.close():(u=!0,i())},f=function(e){A(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(e)},this.realtime_={close:h,sendRequest:f},d=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);case 19:p=e.sent,v=l(p,2),m=v[0],y=v[1],u?ku("getToken() completed but was canceled"):(ku("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=y&&y.token,c=new oc(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){xu(e+" ("+g.repoInfo_.toString()+")"),g.interrupt("server_kill")}),s)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&xu(e.t0),h());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){ku("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){ku("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ce(this.interruptReasons_)&&(this.reconnectDelay_=Tc,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return Ru(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new lc(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){ku("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){ku("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=_(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=_(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";H()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+ou.replace(/\./g,"-")]=1,q()?e["framework.cordova"]=1:B()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=cc.getInstance().currentlyOnline();return ce(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&se(e,"w")){var n=ue(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();xu("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(sc);Ic.nextPersistentConnectionId_=0,Ic.nextConnectionId_=0;var Nc,Rc=function(){function e(t,n){b(this,e),this.name=t,this.node=n}return S(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),Pc=function(){function e(){b(this,e)}return S(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Rc(Eu,e),r=new Rc(Eu,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Rc.MIN}}]),e}(),Ac=function(e){m(n,e);var t=k(n);function n(){return b(this,n),t.apply(this,arguments)}return S(n,[{key:"compare",value:function(e,t){return Tu(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw O("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Rc.MIN}},{key:"maxPost",value:function(){return new Rc(Cu,Nc)}},{key:"makePost",value:function(e,t){return A("string"===typeof e,"KeyIndex indexValue must always be a string."),new Rc(e,Nc)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return Nc},set:function(e){Nc=e}}]),n}(Pc),Oc=new Ac,Dc=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;b(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return S(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),Lc=function(){function e(t,n,r,i,a){b(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Fc.EMPTY_NODE,this.right=null!=a?a:Fc.EMPTY_NODE}return S(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return Fc.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Fc.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();Lc.RED=!0,Lc.BLACK=!1;var jc,Mc=function(){function e(){b(this,e)}return S(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Lc(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),Fc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;b(this,e),this.comparator_=t,this.root_=n}return S(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Lc.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Lc.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new Dc(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new Dc(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new Dc(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new Dc(this.root_,null,this.comparator_,!0,e)}}]),e}();function Uc(e,t){return Tu(e.name,t.name)}function Vc(e,t){return Tu(e,t)}Fc.EMPTY_NODE=new Mc;var zc,qc,Bc,Hc=function(e){return"number"===typeof e?"number:"+Ou(e):"string:"+e},Wc=function(e){if(e.isLeafNode()){var t=e.val();A("string"===typeof t||"number"===typeof t||"object"===typeof t&&se(t,".sv"),"Priority must be a string or number.")}else A(e===jc||e.isEmpty(),"priority of unexpected type.");A(e===jc||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Kc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;b(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,A(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Wc(this.priorityNode_)}return S(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return kc(t)?this:".priority"===fc(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=fc(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(A(".priority"!==r||1===dc(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(pc(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Hc(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?Ou(this.value_):this.value_,this.lazyHash_=pu(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(A(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return A(i>=0,"Unknown leaf type: "+n),A(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return zc},set:function(e){zc=e}}]),e}();Kc.VALUE_TYPE_ORDER=["object","boolean","number","string"];var Gc,Qc,$c=function(e){m(n,e);var t=k(n);function n(){return b(this,n),t.apply(this,arguments)}return S(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Tu(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Rc.MIN}},{key:"maxPost",value:function(){return new Rc(Cu,new Kc("[PRIORITY-POST]",Bc))}},{key:"makePost",value:function(e,t){var n=qc(e);return new Rc(t,new Kc("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(Pc),Yc=new $c,Xc=Math.log(2),Jc=function(){function e(t){b(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/Xc,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return S(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),Zc=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new Lc(o,a.node,Lc.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new Lc(o,a.node,Lc.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],h=n?n(l):l;u(new Lc(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,Lc.BLACK):(s(h,Lc.BLACK),s(h,Lc.RED))}return a}(new Jc(e.length));return new Fc(r||t,a)},el={},tl=function(){function e(t,n){b(this,e),this.indexes_=t,this.indexSet_=n}return S(e,[{key:"get",value:function(e){var t=ue(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Fc?t:null}},{key:"hasIndex",value:function(e){return se(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){A(t!==Oc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(Rc.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?Zc(i,t.getCompare()):el;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(le(this.indexes_,(function(e,i){var a=ue(r.indexSet_,i);if(A(a,"Missing index implementation for "+i),e===el){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(Rc.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),Zc(o,a.getCompare())}return el}var c=n.get(t.name),l=e;return c&&(l=l.remove(new Rc(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(le(this.indexes_,(function(e){if(e===el)return e;var r=n.get(t.name);return r?e.remove(new Rc(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return A(el&&Yc,"ChildrenNode.ts has not been loaded"),Gc=Gc||new e({".priority":el},{".priority":Yc})}}]),e}(),nl=function(){function e(t,n,r){b(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Wc(this.priorityNode_),this.children_.isEmpty()&&A(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return S(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||Qc}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Qc:t}},{key:"getChild",value:function(e){var t=fc(e);return null===t?this:this.getImmediateChild(t).getChild(pc(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(A(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new Rc(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?Qc:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=fc(e);if(null===n)return t;A(".priority"!==fc(e)||1===dc(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(pc(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(Yc,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Hc(this.getPriority().val())+":"),this.forEachChild(Yc,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":pu(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Rc(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Rc(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Rc(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Rc.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Rc.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===rl?-1:0}},{key:"withIndex",value:function(t){if(t===Oc||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===Oc||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(Yc),r=t.getIterator(Yc),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===Oc?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return Qc||(Qc=new e(new Fc(Vc),null,tl.Default))}}]),e}();nl.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var rl=new(function(e){m(n,e);var t=k(n);function n(){return b(this,n),t.call(this,new Fc(Vc),nl.EMPTY_NODE,tl.Default)}return S(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return nl.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(nl));Object.defineProperties(Rc,{MIN:{value:new Rc(Eu,nl.EMPTY_NODE)},MAX:{value:new Rc(Cu,rl)}}),Ac.__EMPTY_NODE=nl.EMPTY_NODE,Kc.__childrenNodeConstructor=nl,jc=rl,function(e){Bc=e}(rl);function il(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return nl.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),A(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new Kc(n,il(t))}if(e instanceof Array){var r=nl.EMPTY_NODE;return Au(e,(function(t,n){if(se(e,t)&&"."!==t.substring(0,1)){var i=il(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(il(t))}var i=[],a=!1,o=e;if(Au(o,(function(e,t){if("."!==e.substring(0,1)){var n=il(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new Rc(e,n)))}})),0===i.length)return nl.EMPTY_NODE;var s=Zc(i,Uc,(function(e){return e.name}),Vc);if(a){var u=Zc(i,Yc.getCompare());return new nl(s,il(t),new tl({".priority":u},{".priority":Yc}))}return new nl(s,il(t),tl.Default)}!function(e){qc=e}(il);var al=function(e){m(n,e);var t=k(n);function n(e){var r;return b(this,n),(r=t.call(this)).indexPath_=e,A(!kc(e)&&".priority"!==fc(e),"Can't create PathIndex with empty path or .priority key"),r}return S(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Tu(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=il(e),r=nl.EMPTY_NODE.updateChild(this.indexPath_,n);return new Rc(t,r)}},{key:"maxPost",value:function(){var e=nl.EMPTY_NODE.updateChild(this.indexPath_,rl);return new Rc(Cu,e)}},{key:"toString",value:function(){return mc(this.indexPath_,0).join("/")}}]),n}(Pc),ol=function(e){m(n,e);var t=k(n);function n(){return b(this,n),t.apply(this,arguments)}return S(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?Tu(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Rc.MIN}},{key:"maxPost",value:function(){return Rc.MAX}},{key:"makePost",value:function(e,t){var n=il(e);return new Rc(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(Pc),sl=new ol;function ul(e){return{type:"value",snapshotNode:e}}function cl(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function ll(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function hl(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var fl=function(){function e(t){b(this,e),this.index_=t}return S(e,[{key:"updateChild",value:function(e,t,n,r,i,a){A(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(ll(t,o)):A(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(cl(t,n)):a.trackChildChange(hl(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Yc,(function(e,r){t.hasChild(e)||n.trackChildChange(ll(e,r))})),t.isLeafNode()||t.forEachChild(Yc,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(hl(t,r,i))}else n.trackChildChange(cl(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?nl.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),dl=function(){function e(t){b(this,e),this.indexedFilter_=new fl(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return S(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new Rc(t,n))||(n=nl.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=nl.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(nl.EMPTY_NODE);var i=this;return t.forEachChild(Yc,(function(e,t){i.matches(new Rc(e,t))||(r=r.updateImmediateChild(e,nl.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),pl=function(){function e(t){var n=this;b(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new dl(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return S(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new Rc(t,n))||(n=nl.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=nl.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=nl.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(this.withinDirectionalStart(o)){if(!this.withinDirectionalEnd(o))break;r=r.updateImmediateChild(o.name,o.node),a++}}}else{var s;r=(r=t.withIndex(this.index_)).updatePriority(nl.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);for(var u=0;s.hasNext();){var c=s.getNext();u<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?u++:r=r.updateImmediateChild(c.name,nl.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var s=e;A(s.numChildren()===this.limit_,"");var u=new Rc(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,u);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(hl(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(ll(t,h));var p=s.updateImmediateChild(t,nl.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(cl(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,u)>=0?(null!=i&&(i.trackChildChange(ll(c.name,c.node)),i.trackChildChange(cl(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,nl.EMPTY_NODE)):e}}]),e}(),vl=function(){function e(){b(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Yc}return S(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return A(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return A(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Eu}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return A(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return A(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Cu}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return A(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===Yc}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function ml(e){var t,n={};if(e.isDefault())return n;if(e.index_===Yc?t="$priority":e.index_===sl?t="$value":e.index_===Oc?t="$key":(A(e.index_ instanceof al,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=ae(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=ae(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+ae(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=ae(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+ae(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function yl(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Yc&&(t.i=e.index_.toString()),t}var gl=function(e){m(n,e);var t=k(n);function n(e,r,i,a){var o;return b(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=_u("p:rest:"),o.listens_={},o}return S(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=ml(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),ue(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=ml(e._queryParams),r=e._path.toString(),i=new J;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=l(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+de(n);t.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=ie(c.responseText)}catch(n){xu("Failed to parse JSON response for "+u+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&xu("Got unsuccessful REST response for "+u+" Status: "+c.status),r(c.status);r=null}},c.open("GET",u,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(A(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(sc),kl=function(){function e(){b(this,e),this.rootNode_=nl.EMPTY_NODE}return S(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function _l(){return{value:null,children:new Map}}function bl(e,t,n){if(kc(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=fc(t);e.children.has(r)||e.children.set(r,_l()),bl(e.children.get(r),t=pc(t),n)}}function wl(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){wl(r,new lc(t.toString()+"/"+e),n)}))}var xl,Sl=function(){function e(t){b(this,e),this.collection_=t,this.last_=null}return S(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Au(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),El=function(){function e(t,n){b(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Sl(t);var r=1e4+2e4*Math.random();Mu(this.reportStats_.bind(this),Math.floor(r))}return S(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Au(t,(function(t,i){i>0&&se(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),Mu(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Cl(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(xl||(xl={}));var Tl,Il=function(){function e(t,n,r){b(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=xl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return S(e,[{key:"operationForChild",value:function(t){if(kc(this.path)){if(null!=this.affectedTree.value)return A(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new lc(t));return new e(hc(),n,this.revert)}return A(fc(this.path)===t,"operationForChild called for unrelated child."),new e(pc(this.path),this.affectedTree,this.revert)}}]),e}(),Nl=function(){function e(t,n){b(this,e),this.source=t,this.path=n,this.type=xl.LISTEN_COMPLETE}return S(e,[{key:"operationForChild",value:function(t){return kc(this.path)?new e(this.source,hc()):new e(this.source,pc(this.path))}}]),e}(),Rl=function(){function e(t,n,r){b(this,e),this.source=t,this.path=n,this.snap=r,this.type=xl.OVERWRITE}return S(e,[{key:"operationForChild",value:function(t){return kc(this.path)?new e(this.source,hc(),this.snap.getImmediateChild(t)):new e(this.source,pc(this.path),this.snap)}}]),e}(),Pl=function(){function e(t,n,r){b(this,e),this.source=t,this.path=n,this.children=r,this.type=xl.MERGE}return S(e,[{key:"operationForChild",value:function(t){if(kc(this.path)){var n=this.children.subtree(new lc(t));return n.isEmpty()?null:n.value?new Rl(this.source,hc(),n.value):new e(this.source,hc(),n)}return A(fc(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,pc(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),Al=function(){function e(t,n,r){b(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return S(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(kc(e))return this.isFullyInitialized()&&!this.filtered_;var t=fc(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),Ol=S((function e(t){b(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function Dl(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw O("Should only compare child_ events.");var r=new Rc(t.childName,t.snapshotNode),i=new Rc(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Ll(e,t){return{eventCache:e,serverCache:t}}function jl(e,t,n,r){return Ll(new Al(t,n,r),e.serverCache)}function Ml(e,t,n,r){return Ll(e.eventCache,new Al(t,n,r))}function Fl(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ul(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Vl=function(){return Tl||(Tl=new Fc(Iu)),Tl},zl=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vl();b(this,e),this.value=t,this.children=n}return S(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:hc(),value:this.value};if(kc(e))return null;var n=fc(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(pc(e),t);return null!=i?{path:gc(new lc(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(kc(t))return this;var n=fc(t),r=this.children.get(n);return null!==r?r.subtree(pc(t)):new e(null)}},{key:"set",value:function(t,n){if(kc(t))return new e(n,this.children);var r=fc(t),i=(this.children.get(r)||new e(null)).set(pc(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(kc(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=fc(t),r=this.children.get(n);if(r){var i,a=r.remove(pc(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(kc(e))return this.value;var t=fc(e),n=this.children.get(t);return n?n.get(pc(e)):null}},{key:"setTree",value:function(t,n){if(kc(t))return n;var r,i=fc(t),a=(this.children.get(i)||new e(null)).setTree(pc(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(hc(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(gc(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,hc(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(kc(e))return null;var i=fc(e),a=this.children.get(i);return a?a.findOnPath_(pc(e),gc(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,hc(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(kc(t))return this;this.value&&r(n,this.value);var i=fc(t),a=this.children.get(i);return a?a.foreachOnPath_(pc(t),gc(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(hc(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(gc(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return Au(t,(function(e,t){n=n.set(new lc(e),t)})),n}}]),e}(),ql=function(){function e(t){b(this,e),this.writeTree_=t}return S(e,null,[{key:"empty",value:function(){return new e(new zl(null))}}]),e}();function Bl(e,t,n){if(kc(t))return new ql(new zl(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=_c(i,t);return a=a.updateChild(o,n),new ql(e.writeTree_.set(i,a))}var s=new zl(n),u=e.writeTree_.setTree(t,s);return new ql(u)}function Hl(e,t,n){var r=e;return Au(n,(function(e,n){r=Bl(r,gc(t,e),n)})),r}function Wl(e,t){if(kc(t))return ql.empty();var n=e.writeTree_.setTree(t,new zl(null));return new ql(n)}function Kl(e,t){return null!=Gl(e,t)}function Gl(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(_c(n.path,t)):null}function Ql(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Yc,(function(e,n){t.push(new Rc(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Rc(e,n.value))})),t}function $l(e,t){if(kc(t))return e;var n=Gl(e,t);return new ql(null!=n?new zl(n):e.writeTree_.subtree(t))}function Yl(e){return e.writeTree_.isEmpty()}function Xl(e,t){return Jl(hc(),e.writeTree_,t)}function Jl(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(A(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Jl(gc(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(gc(e,".priority"),r)),n}function Zl(e,t){return dh(t,e)}function eh(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function th(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));A(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&nh(s,r.path)?i=!1:wc(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=ih(e.allWrites,rh,hc()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=Wl(e.visibleWrites,r.path):Au(r.children,(function(t){e.visibleWrites=Wl(e.visibleWrites,gc(r.path,t))}));return!0}return!1}function nh(e,t){if(e.snap)return wc(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&wc(gc(e.path,n),t))return!0;return!1}function rh(e){return e.visible}function ih(e,t,n){for(var r=ql.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)wc(n,o)?r=Bl(r,s=_c(n,o),a.snap):wc(o,n)&&(s=_c(o,n),r=Bl(r,hc(),a.snap.getChild(s)));else{if(!a.children)throw O("WriteRecord should have .snap or .children");if(wc(n,o))r=Hl(r,s=_c(n,o),a.children);else if(wc(o,n))if(kc(s=_c(o,n)))r=Hl(r,hc(),a.children);else{var u=ue(a.children,fc(s));if(u){var c=u.getChild(pc(s));r=Bl(r,hc(),c)}}}}}return r}function ah(e,t,n,r,i){if(r||i){var a=$l(e.visibleWrites,t);if(!i&&Yl(a))return n;if(i||null!=n||Kl(a,hc())){return Xl(ih(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(wc(e.path,t)||wc(t,e.path))}),t),n||nl.EMPTY_NODE)}return null}var o=Gl(e.visibleWrites,t);if(null!=o)return o;var s=$l(e.visibleWrites,t);return Yl(s)?n:null!=n||Kl(s,hc())?Xl(s,n||nl.EMPTY_NODE):null}function oh(e,t,n,r){return ah(e.writeTree,e.treePath,t,n,r)}function sh(e,t){return function(e,t,n){var r=nl.EMPTY_NODE,i=Gl(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Yc,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=$l(e.visibleWrites,t);return n.forEachChild(Yc,(function(e,t){var n=Xl($l(a,new lc(e)),t);r=r.updateImmediateChild(e,n)})),Ql(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return Ql($l(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function uh(e,t,n,r){return function(e,t,n,r,i){A(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=gc(t,n);if(Kl(e.visibleWrites,a))return null;var o=$l(e.visibleWrites,a);return Yl(o)?i.getChild(n):Xl(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function ch(e,t){return function(e,t){return Gl(e.visibleWrites,t)}(e.writeTree,gc(e.treePath,t))}function lh(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=$l(e.visibleWrites,t),c=Gl(u,hc());if(null!=c)s=c;else{if(null==n)return[];s=Xl(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function hh(e,t,n){return function(e,t,n,r){var i=gc(t,n),a=Gl(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?Xl($l(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function fh(e,t){return dh(gc(e.treePath,t),e.writeTree)}function dh(e,t){return{treePath:e,writeTree:t}}var ph=function(){function e(){b(this,e),this.changeMap=new Map}return S(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;A("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),A(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,hl(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,ll(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,cl(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw O("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,hl(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),vh=new(function(){function e(){b(this,e)}return S(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),mh=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;b(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return S(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Al(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hh(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ul(this.viewCache_),i=lh(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function yh(e,t,n,r,i){var a,o,s=new ph;if(n.type===xl.OVERWRITE){var u=n;u.source.fromUser?a=_h(e,t,u.path,u.snap,r,i,s):(A(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!kc(u.path),a=kh(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===xl.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=gc(n,r);bh(t,fc(c))&&(s=_h(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=gc(n,r);bh(t,fc(c))||(s=_h(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(A(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=xh(e,t,c.path,c.children,r,i,o,s))}else if(n.type===xl.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=ch(r,n))return t;var s,u=new mh(r,t,i),c=t.eventCache.getNode();if(kc(n)||".priority"===fc(n)){var l;if(t.serverCache.isFullyInitialized())l=oh(r,Ul(t));else{var h=t.serverCache.getNode();A(h instanceof nl,"serverChildren would be complete if leaf node"),l=sh(r,h)}s=e.filter.updateFullNode(c,l,a)}else{var f=fc(n),d=hh(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(s=null!=d?e.filter.updateChild(c,f,d,pc(n),u,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,nl.EMPTY_NODE,pc(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=oh(r,Ul(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=ch(r,hc()),jl(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=ch(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(kc(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return kh(e,t,n,u.getNode().getChild(n),i,a,s,o);if(kc(n)){var c=new zl(null);return u.getNode().forEachChild(Oc,(function(e,t){c=c.set(new lc(e),t)})),xh(e,t,n,c,i,a,s,o)}return t}var l=new zl(null);return r.foreach((function(e,t){var r=gc(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),xh(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==xl.LISTEN_COMPLETE)throw O("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=Ml(t,a.getNode(),a.isFullyInitialized()||kc(n),a.isFiltered());return gh(e,o,n,r,vh,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Fl(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(ul(Fl(t)))}}(t,a,h),{viewCache:a,changes:h}}function gh(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=ch(r,n))return t;if(kc(n))if(A(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=Ul(t),l=sh(r,c instanceof nl?c:nl.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=oh(r,Ul(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=fc(n);if(".priority"===f){A(1===dc(n),"Can't have a priority with additional path components");var d=u.getNode(),p=uh(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,m=pc(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var y=uh(r,n,u.getNode(),s);v=null!=y?u.getNode().getImmediateChild(f).updateChild(m,y):u.getNode().getImmediateChild(f)}else v=hh(r,f,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),f,v,m,i,a):u.getNode()}}return jl(t,o,u.isFullyInitialized()||kc(n),e.filter.filtersNodes())}function kh(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(kc(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=fc(n);if(!c.isCompleteForPath(n)&&dc(n)>1)return t;var d=pc(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,vh,null)}var v=Ml(t,u,c.isFullyInitialized()||kc(n),l.filtersNodes());return gh(e,v,n,i,new mh(i,v,a),s)}function _h(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new mh(i,t,a);if(kc(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=jl(t,u,!0,e.filter.filtersNodes());else{var h=fc(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=jl(t,u,c.isFullyInitialized(),c.isFiltered());else{var f,d=pc(n),p=c.getNode().getImmediateChild(h);if(kc(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===vc(d)&&v.getChild(yc(d)).isEmpty()?v:v.updateChild(d,r):nl.EMPTY_NODE}if(p.equals(f))s=t;else s=jl(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function bh(e,t){return e.eventCache.isCompleteForChild(t)}function wh(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function xh(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=kc(n)?r:new zl(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=wh(0,t.serverCache.getNode().getImmediateChild(n),r);c=kh(e,c,new lc(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!u){var h=wh(0,t.serverCache.getNode().getImmediateChild(n),r);c=kh(e,c,new lc(n),h,i,a,o,s)}})),c}var Sh,Eh=function(){function e(t,n){b(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new fl(i.getIndex()),o=(r=i).loadsAllData()?new fl(r.getIndex()):r.hasLimit()?new pl(r):new dl(r);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,u=n.eventCache,c=a.updateFullNode(nl.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(nl.EMPTY_NODE,u.getNode(),null),h=new Al(c,s.isFullyInitialized(),a.filtersNodes()),f=new Al(l,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ll(f,h),this.eventGenerator_=new Ol(this.query_)}return S(e,[{key:"query",get:function(){return this.query_}}]),e}();function Ch(e,t){var n=Ul(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!kc(t)&&!n.getImmediateChild(fc(t)).isEmpty())?n.getChild(t):null}function Th(e){return 0===e.eventRegistrations_.length}function Ih(e,t,n){var r=[];if(n){A(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(s)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function Nh(e,t,n,r){t.type===xl.MERGE&&null!==t.source.queryId&&(A(Ul(e.viewCache_),"We should always have a full cache before handling merges"),A(Fl(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=yh(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,A(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),A(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),A(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Rh(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Rh(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Dl(e,i,"child_removed",t,r,n),Dl(e,i,"child_added",t,r,n),Dl(e,i,"child_moved",a,r,n),Dl(e,i,"child_changed",t,r,n),Dl(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var Ph,Ah=S((function e(){b(this,e),this.views=new Map}));function Oh(e){return 0===e.views.size}function Dh(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return A(null!=a,"SyncTree gave us an op for an invalid query."),Nh(a,t,n,r)}var o,s=[],u=_(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(Nh(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function Lh(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var s=oh(n,i?r:null),u=!1;s?u=!0:r instanceof nl?(s=sh(n,r),u=!1):(s=nl.EMPTY_NODE,u=!1);var c=Ll(new Al(s,u,!1),new Al(r,i,!1));return new Eh(t,c)}return o}function jh(e,t,n,r,i,a){var o=Lh(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Yc,(function(e,t){r.push(cl(e,t))})),n.isFullyInitialized()&&r.push(ul(n.getNode())),Rh(e,r,n.getNode(),t)}(o,n)}function Mh(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],s=qh(e);if("default"===i){var u,c=_(e.views.entries());try{for(c.s();!(u=c.n()).done;){var h=l(u.value,2),f=h[0],d=h[1];o=o.concat(Ih(d,n,r)),Th(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){c.e(v)}finally{c.f()}}else{var p=e.views.get(i);p&&(o=o.concat(Ih(p,n,r)),Th(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return s&&!qh(e)&&a.push(new(A(Sh,"Reference.ts has not been loaded"),Sh)(t._repo,t._path)),{removed:a,events:o}}function Fh(e){var t,n=[],r=_(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function Uh(e,t){var n,r=null,i=_(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||Ch(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function Vh(e,t){if(t._queryParams.loadsAllData())return Bh(e);var n=t._queryIdentifier;return e.views.get(n)}function zh(e,t){return null!=Vh(e,t)}function qh(e){return null!=Bh(e)}function Bh(e){var t,n=_(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var Hh=1,Wh=S((function e(t){b(this,e),this.listenProvider_=t,this.syncPointTree_=new zl(null),this.pendingWriteTree_={visibleWrites:ql.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function Kh(e,t,n,r,i){return function(e,t,n,r,i){A(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Bl(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Zh(e,new Rl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Gh(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=eh(e.pendingWriteTree_,t),i=th(e.pendingWriteTree_,t);if(i){var a=new zl(null);return null!=r.snap?a=a.set(hc(),!0):Au(r.children,(function(e){a=a.set(new lc(e),!0)})),Zh(e,new Il(r.path,a,n))}return[]}function Qh(e,t,n){return Zh(e,new Rl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function $h(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),s=[];if(o&&("default"===t._queryIdentifier||zh(o,t))){var u=Mh(o,t,n,r);Oh(o)&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=u.removed;if(s=u.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),h=e.syncPointTree_.findOnPath(a,(function(e,t){return qh(t)}));if(l&&!h){var f=e.syncPointTree_.subtree(a);if(!f.isEmpty())for(var d=cf(f),p=0;p<d.length;++p){var v=d[p],m=v.query,y=nf(e,v);e.listenProvider_.startListening(lf(m),rf(e,m),y.hashFn,y.onComplete)}}if(!h&&c.length>0&&!r)if(l){var g=null;e.listenProvider_.stopListening(lf(t),g)}else c.forEach((function(t){var n=e.queryToTagMap.get(af(t));e.listenProvider_.stopListening(lf(t),n)}))}hf(e,c)}return s}function Yh(e,t,n,r){var i=of(e,r);if(null!=i){var a=sf(i),o=a.path,s=a.queryId,u=_c(o,t);return uf(e,o,new Rl(Cl(s),u,n))}return[]}function Xh(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=_c(e,i);a=a||Uh(t,n),o=o||qh(t)}));var s,u=e.syncPointTree_.get(i);if(u?(o=o||qh(u),a=a||Uh(u,hc())):(u=new Ah,e.syncPointTree_=e.syncPointTree_.set(i,u)),null!=a)s=!0;else{s=!1,a=nl.EMPTY_NODE;var c=e.syncPointTree_.subtree(i);c.foreachChild((function(e,t){var n=Uh(t,hc());n&&(a=a.updateImmediateChild(e,n))}))}var l=zh(u,t);if(!l&&!t._queryParams.loadsAllData()){var h=af(t);A(!e.queryToTagMap.has(h),"View does not exist, but we have a tag");var f=ff();e.queryToTagMap.set(h,f),e.tagToQueryMap.set(f,h)}var d=Zl(e.pendingWriteTree_,i),p=jh(u,t,n,d,a,s);if(!l&&!o&&!r){var v=Vh(u,t);p=p.concat(df(e,t,v))}return p}function Jh(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Uh(n,_c(e,t));if(r)return r}));return ah(r,t,i,n,!0)}function Zh(e,t){return ef(t,e.syncPointTree_,null,Zl(e.pendingWriteTree_,hc()))}function ef(e,t,n,r){if(kc(e.path))return tf(e,t,n,r);var i=t.get(hc());null==n&&null!=i&&(n=Uh(i,hc()));var a=[],o=fc(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=fh(r,o);a=a.concat(ef(s,u,c,l))}return i&&(a=a.concat(Dh(i,e,r,n))),a}function tf(e,t,n,r){var i=t.get(hc());null==n&&null!=i&&(n=Uh(i,hc()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=fh(r,t),u=e.operationForChild(t);u&&(a=a.concat(tf(u,i,o,s)))})),i&&(a=a.concat(Dh(i,e,r,n))),a}function nf(e,t){var n=t.query,r=rf(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||nl.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=of(e,n);if(r){var i=sf(r),a=i.path,o=i.queryId,s=_c(a,t);return uf(e,a,new Nl(Cl(o),s))}return[]}(e,n._path,r):function(e,t){return Zh(e,new Nl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return $h(e,n,null,i)}}}function rf(e,t){var n=af(t);return e.queryToTagMap.get(n)}function af(e){return e._path.toString()+"$"+e._queryIdentifier}function of(e,t){return e.tagToQueryMap.get(t)}function sf(e){var t=e.indexOf("$");return A(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new lc(e.substr(0,t))}}function uf(e,t,n){var r=e.syncPointTree_.get(t);return A(r,"Missing sync point for query tag that we're tracking"),Dh(r,n,Zl(e.pendingWriteTree_,t),null)}function cf(e){return e.fold((function(e,t,n){if(t&&qh(t))return[Bh(t)];var r=[];return t&&(r=Fh(t)),Au(n,(function(e,t){r=r.concat(t)})),r}))}function lf(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(A(Ph,"Reference.ts has not been loaded"),Ph)(e._repo,e._path):e}function hf(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=af(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}function ff(){return Hh++}function df(e,t,n){var r=t._path,i=rf(e,t),a=nf(e,n),o=e.listenProvider_.startListening(lf(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)A(!qh(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!kc(e)&&t&&qh(t))return[Bh(t).query];var r=[];return t&&(r=r.concat(Fh(t).map((function(e){return e.query})))),Au(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening(lf(l),rf(e,l))}return o}var pf=function(){function e(t){b(this,e),this.node_=t}return S(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),vf=function(){function e(t,n){b(this,e),this.syncTree_=t,this.path_=n}return S(e,[{key:"getImmediateChild",value:function(t){var n=gc(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return Jh(this.syncTree_,this.path_)}}]),e}(),mf=function(e,t,n){return e&&"object"===typeof e?(A(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?yf(e[".sv"],t,n):"object"===typeof e[".sv"]?gf(e[".sv"],t):void A(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},yf=function(e,t,n){if("timestamp"===e)return n.timestamp;A(!1,"Unexpected server value: "+e)},gf=function(e,t,n){e.hasOwnProperty("increment")||A(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&A(!1,"Unexpected increment value: "+r);var i=t.node();if(A(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},kf=function(e,t,n,r){return bf(t,new vf(n,e),r)},_f=function(e,t,n){return bf(e,new pf(t),n)};function bf(e,t,n){var r,i=e.getPriority().val(),a=mf(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=mf(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new Kc(s,il(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new Kc(a))),u.forEachChild(Yc,(function(e,i){var a=bf(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var wf=S((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};b(this,e),this.name=t,this.parent=n,this.node=r}));function xf(e,t){for(var n=t instanceof lc?t:new lc(t),r=e,i=fc(n);null!==i;){var a=ue(r.node.children,i)||{children:{},childCount:0};r=new wf(i,r,a),i=fc(n=pc(n))}return r}function Sf(e){return e.node.value}function Ef(e,t){e.node.value=t,Rf(e)}function Cf(e){return e.node.childCount>0}function Tf(e,t){Au(e.node.children,(function(n,r){t(new wf(n,e,r))}))}function If(e,t,n,r){n&&!r&&t(e),Tf(e,(function(e){If(e,t,!0,r)})),n&&r&&t(e)}function Nf(e){return new lc(null===e.parent?e.name:Nf(e.parent)+"/"+e.name)}function Rf(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Sf(e)&&!Cf(e)}(n),i=se(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Rf(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Rf(e))}(e.parent,e.name,e)}var Pf=/[\[\].#$\/\u0000-\u001F\u007F]/,Af=/[\[\].#$\u0000-\u001F\u007F]/,Of=10485760,Df=function(e){return"string"===typeof e&&0!==e.length&&!Pf.test(e)},Lf=function(e){return"string"===typeof e&&0!==e.length&&!Af.test(e)},jf=function(e,t,n,r){r&&void 0===t||Mf(ke(e,"value"),t,n)},Mf=function e(t,n,r){var i=r instanceof lc?new xc(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Ec(i));if("function"===typeof n)throw new Error(t+"contains a function "+Ec(i)+" with contents = "+n.toString());if(Su(n))throw new Error(t+"contains "+n.toString()+" "+Ec(i));if("string"===typeof n&&n.length>Of/3&&_e(n)>Of)throw new Error(t+"contains a string greater than "+Of+" utf8 bytes "+Ec(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(Au(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!Df(n)))throw new Error(t+" contains an invalid key ("+n+") "+Ec(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,u;u=n,(s=i).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(u),s.byteLength_+=_e(u),Sc(s),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=_e(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Ec(i)+" in addition to actual children.")}},Ff=function(e,t,n,r){if((!r||void 0!==n)&&!Lf(n))throw new Error(ke(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Uf=function(e,t){if(".info"===fc(t))throw new Error(e+" failed = Can't modify data under /.info/")},Vf=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Df(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Lf(e)}(n))throw new Error(ke(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},zf=S((function e(){b(this,e),this.eventLists_=[],this.recursionDepth_=0}));function qf(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||bc(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function Bf(e,t,n){qf(e,n),Wf(e,(function(e){return bc(e,t)}))}function Hf(e,t,n){qf(e,n),Wf(e,(function(e){return wc(e,t)||wc(t,e)}))}function Wf(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Kf(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Kf(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();mu&&ku("event: "+n.toString()),ju(r)}}}var Gf="repo_interrupt",Qf=function(){function e(t,n,r,i){b(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zf,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=_l(),this.transactionQueueTree_=new wf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return S(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function $f(e,t,n){if(e.stats_=Xu(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new gl(e.repoInfo_,(function(t,n,r,i){Jf(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return Zf(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ae(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Ic(e.repoInfo_,t,(function(t,n,r,i){Jf(e,t,n,r,i)}),(function(t){Zf(e,t)}),(function(t){!function(e,t){Au(t,(function(t,n){ed(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return Yu[n]||(Yu[n]=t()),Yu[n]}(e.repoInfo_,(function(){return new El(e.stats_,e.server_)})),e.infoData_=new kl,e.infoSyncTree_=new Wh({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=Qh(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),ed(e,"connected",!1),e.serverSyncTree_=new Wh({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);Hf(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function Yf(e){var t=e.infoData_.getNode(new lc(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Xf(e){return(t=(t={timestamp:Yf(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Jf(e,t,n,r,i){e.dataUpdateCount++;var a=new lc(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=le(n,(function(e){return il(e)}));o=function(e,t,n,r){var i=of(e,r);if(i){var a=sf(i),o=a.path,s=a.queryId,u=_c(o,t),c=zl.fromObject(n);return uf(e,o,new Pl(Cl(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=il(n);o=Yh(e.serverSyncTree_,a,u,i)}else if(r){var c=le(n,(function(e){return il(e)}));o=function(e,t,n){var r=zl.fromObject(n);return Zh(e,new Pl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=il(n);o=Qh(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=ld(e,a)),Hf(e.eventQueue_,h,o)}function Zf(e,t){ed(e,"connected",t),!1===t&&function(e){ad(e,"onDisconnectEvents");var t=Xf(e),n=_l();wl(e.onDisconnect_,hc(),(function(r,i){var a=kf(r,i,e.serverSyncTree_,t);bl(n,r,a)}));var r=[];wl(n,hc(),(function(t,n){r=r.concat(Qh(e.serverSyncTree_,t,n));var i=vd(e,t);ld(e,i)})),e.onDisconnect_=_l(),Hf(e.eventQueue_,hc(),r)}(e)}function ed(e,t,n){var r=new lc("/.info/"+t),i=il(n);e.infoData_.updateSnapshot(r,i);var a=Qh(e.infoSyncTree_,r,i);Hf(e.eventQueue_,r,a)}function td(e){return e.nextWriteId_++}function nd(e,t,n,r,i){ad(e,"set",{path:t.toString(),value:n,priority:r});var a=Xf(e),o=il(n,r),s=Jh(e.serverSyncTree_,t),u=_f(o,s,a),c=td(e),l=Kh(e.serverSyncTree_,t,u,c,!0);qf(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||xu("set at "+t+" failed: "+n);var o=Gh(e.serverSyncTree_,c,!a);Hf(e.eventQueue_,t,o),od(e,i,n,r)}));var h=vd(e,t);ld(e,h),Hf(e.eventQueue_,h,[])}function rd(e,t,n){var r;r=".info"===fc(t._path)?$h(e.infoSyncTree_,t,n):$h(e.serverSyncTree_,t,n),Bf(e.eventQueue_,t._path,r)}function id(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Gf)}function ad(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];ku.apply(void 0,[t].concat(r))}function od(e,t,n,r){t&&ju((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function sd(e,t,n){return Jh(e.serverSyncTree_,t,n)||nl.EMPTY_NODE}function ud(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||pd(e,t),Sf(t)){var n=fd(e,t);A(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&cd(e,Nf(t),n)}else Cf(t)&&Tf(t,(function(t){ud(e,t)}))}function cd(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=sd(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];A(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=_c(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){ad(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(Gh(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);pd(e,xf(e.transactionQueueTree_,t)),ud(e,e.transactionQueueTree_),Hf(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)ju(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{xu("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}ld(e,t)}}),o)}function ld(e,t){var n=hd(e,t),r=Nf(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u=t[a],c=_c(n,u.path),l=!1,h=void 0;if(A(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,h=u.abortReason,i=i.concat(Gh(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,h="maxretry",i=i.concat(Gh(e.serverSyncTree_,u.currentWriteId,!0));else{var f=sd(e,u.path,o);u.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){Mf("transaction failed: Data returned ",d,u.path);var p=il(d);"object"===typeof d&&null!=d&&se(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=u.currentWriteId,m=Xf(e),y=_f(p,f,m);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=y,u.currentWriteId=td(e),o.splice(o.indexOf(v),1),i=(i=i.concat(Kh(e.serverSyncTree_,u.path,y,u.currentWriteId,u.applyLocally))).concat(Gh(e.serverSyncTree_,v,!0))}else l=!0,h="nodata",i=i.concat(Gh(e.serverSyncTree_,u.currentWriteId,!0))}Hf(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},u=0;u<t.length;u++)s(u);pd(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)ju(r[c]);ud(e,e.transactionQueueTree_)}(e,fd(e,n),r),r}function hd(e,t){var n,r=e.transactionQueueTree_;for(n=fc(t);null!==n&&void 0===Sf(r);)r=xf(r,n),n=fc(t=pc(t));return r}function fd(e,t){var n=[];return dd(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function dd(e,t,n){var r=Sf(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Tf(t,(function(t){dd(e,t,n)}))}function pd(e,t){var n=Sf(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Ef(t,n.length>0?n:void 0)}Tf(t,(function(t){pd(e,t)}))}function vd(e,t){var n=Nf(hd(e,t)),r=xf(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){md(e,t)})),md(e,r),If(r,(function(t){md(e,t)})),n}function md(e,t){var n=Sf(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(A(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(A(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Gh(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Ef(t,void 0):n.length=a+1,Hf(e.eventQueue_,Nf(t),i);for(var s=0;s<r.length;s++)ju(r[s])}}var yd=function(e,t){var n=gd(e),r=n.namespace;"firebase.com"===n.domain&&wu(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||wu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&xu("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Ku(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new lc(n.pathString)}},gd=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=_(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):xu("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},kd="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",_d=(function(){var e=0,t=[]}(),function(){function e(t,n,r,i){b(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return S(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+ae(this.snapshot.exportVal())}}]),e}()),bd=function(){function e(t,n,r){b(this,e),this.eventRegistration=t,this.error=n,this.path=r}return S(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),wd=function(){function e(t,n){b(this,e),this.snapshotCallback=t,this.cancelCallback=n}return S(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return A(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),xd=function(){function e(t,n,r,i){b(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return S(e,[{key:"key",get:function(){return kc(this._path)?null:vc(this._path)}},{key:"ref",get:function(){return new Sd(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=yl(this._queryParams),t=Ru(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return yl(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=be(t))instanceof e))return!1;var n=this._repo===t._repo,r=bc(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var Sd=function(e){m(n,e);var t=k(n);function n(e,r){return b(this,n),t.call(this,e,r,new vl,!1)}return S(n,[{key:"parent",get:function(){var e=yc(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(xd),Ed=function(){function e(t,n,r){b(this,e),this._node=t,this.ref=n,this._index=r}return S(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new lc(t),r=Td(this.ref,t);return new e(this._node.getChild(n),r,Yc)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,Td(n.ref,r),Yc))}))}},{key:"hasChild",value:function(e){var t=new lc(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function Cd(e,t){return(e=be(e))._checkNotDeleted("ref"),void 0!==t?Td(e._root,t):e._root}function Td(e,t){var n,r,i,a;return null===fc((e=be(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Ff(n,r,i,a)):Ff("child","path",t,!1),new Sd(e._repo,gc(e._path,t))}function Id(e,t){e=be(e),Uf("set",e._path),jf("set",t,e._path,!1);var n=new J;return nd(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}var Nd=function(){function e(t){b(this,e),this.callbackContext=t}return S(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new _d("value",this,new Ed(e.snapshotNode,new Sd(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new bd(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),Rd=function(){function e(t,n){b(this,e),this.eventType=t,this.callbackContext=n}return S(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new bd(this,e,t):null}},{key:"createEvent",value:function(e,t){A(null!=e.childName,"Child events should have a childName.");var n=Td(new Sd(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new _d(e.type,this,new Ed(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function Pd(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,s=function(t,n){rd(e._repo,e,c),o(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new wd(n,a||void 0),c="value"===t?new Nd(u):new Rd(t,u);return function(e,t,n){var r;r=".info"===fc(t._path)?Xh(e.infoSyncTree_,t,n):Xh(e.serverSyncTree_,t,n),Bf(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return rd(e._repo,e,c)}}function Ad(e,t,n,r){return Pd(e,"value",t,n,r)}!function(e){A(!Sh,"__referenceConstructor has already been defined"),Sh=e}(Sd),function(e){A(!Ph,"__referenceConstructor has already been defined"),Ph=e}(Sd);var Od={},Dd=!1;function Ld(e,t,n,r){e.repoInfo_=new Ku("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function jd(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||wu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ku("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=yd(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/Shop",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=yd(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new Vu(Vu.OWNER):new Uu(e.name,e.options,t);Vf("Invalid Firebase Database URL",s),kc(s.path)||wu("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=Od[t.name];i||(i={},Od[t.name]=i);var a=i[e.toURLString()];a&&wu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new Qf(e,Dd,n,r),i[e.toURLString()]=a,a}(u,e,l,new Fu(e.name,n));return new Md(h,e)}var Md=function(){function e(t,n){b(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return S(e,[{key:"_repo",get:function(){return this._instanceStarted||($f(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new Sd(this._repo,hc())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=Od[t];n&&n[e.key]===e||wu("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),id(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&wu("Cannot call "+e+" on a deleted database.")}}]),e}();function Fd(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=be(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&wu("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&wu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Vu(Vu.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:Z(r.mockUserToken,e.app.options.projectId);a=new Vu(o)}Ld(i,t,n,a)}Ic.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Ic.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){ou=e}(pt),ct(new we("database",(function(e,t){var n=t.instanceIdentifier;return jd(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),yt(iu,au,e),yt(iu,au,"esm2017")}();var Ud,Vd="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},zd={},qd=qd||{},Bd=Vd||self;function Hd(){}function Wd(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Kd(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Gd="closure_uid_"+(1e9*Math.random()>>>0),Qd=0;function $d(e,t,n){return e.call.apply(e.bind,arguments)}function Yd(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Xd(e,t,n){return(Xd=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$d:Yd).apply(null,arguments)}function Jd(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Zd(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function ep(){this.s=this.s,this.o=this.o}ep.prototype.s=!1,ep.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Gd)&&e[Gd]||(e[Gd]=++Qd))},ep.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var tp=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function np(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function rp(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Wd(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function ip(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ip.prototype.h=function(){this.defaultPrevented=!0};var ap=function(){if(!Bd.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Bd.addEventListener("test",Hd,t),Bd.removeEventListener("test",Hd,t)}catch(n){}return e}();function op(e){return/^[\s\xa0]*$/.test(e)}var sp=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function up(e,t){return e<t?-1:e>t?1:0}function cp(){var e=Bd.navigator;return e&&(e=e.userAgent)?e:""}function lp(e){return-1!=cp().indexOf(e)}function hp(e){return hp[" "](e),e}hp[" "]=Hd;var fp,dp=lp("Opera"),pp=lp("Trident")||lp("MSIE"),vp=lp("Edge"),mp=vp||pp,yp=lp("Gecko")&&!(-1!=cp().toLowerCase().indexOf("webkit")&&!lp("Edge"))&&!(lp("Trident")||lp("MSIE"))&&!lp("Edge"),gp=-1!=cp().toLowerCase().indexOf("webkit")&&!lp("Edge");function kp(){var e=Bd.document;return e?e.documentMode:void 0}e:{var _p="",bp=function(){var e=cp();return yp?/rv:([^\);]+)(\)|;)/.exec(e):vp?/Edge\/([\d\.]+)/.exec(e):pp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):gp?/WebKit\/(\S+)/.exec(e):dp?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(bp&&(_p=bp?bp[1]:""),pp){var wp=kp();if(null!=wp&&wp>parseFloat(_p)){fp=String(wp);break e}}fp=_p}var xp,Sp={};function Ep(){return function(e){var t=Sp;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=sp(String(fp)).split("."),n=sp("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=up(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||up(0==a[2].length,0==o[2].length)||up(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Bd.document&&pp){var Cp=kp();xp=Cp||(parseInt(fp,10)||void 0)}else xp=void 0;var Tp=xp;function Ip(e,t){if(ip.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(yp){e:{try{hp(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Np[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ip.X.h.call(this)}}Zd(Ip,ip);var Np={2:"touch",3:"pen",4:"mouse"};Ip.prototype.h=function(){Ip.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Rp="closure_listenable_"+(1e6*Math.random()|0),Pp=0;function Ap(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Pp,this.ba=this.ea=!1}function Op(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Dp(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Lp(e){var t={};for(var n in e)t[n]=e[n];return t}var jp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mp(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<jp.length;a++)n=jp[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Fp(e){this.src=e,this.g={},this.h=0}function Up(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=tp(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Op(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Vp(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Fp.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Vp(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Ap(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var zp="closure_lm_"+(1e6*Math.random()|0),qp={};function Bp(e,t,n,r,i){if(r&&r.once)return Wp(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Bp(e,t[a],n,r,i);return null}return n=Jp(n),e&&e[Rp]?e.N(t,n,Kd(r)?!!r.capture:!!r,i):Hp(e,t,n,!1,r,i)}function Hp(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Kd(i)?!!i.capture:!!i,s=Yp(e);if(s||(e[zp]=s=new Fp(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=$p;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ap||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Qp(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Wp(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Wp(e,t[a],n,r,i);return null}return n=Jp(n),e&&e[Rp]?e.O(t,n,Kd(r)?!!r.capture:!!r,i):Hp(e,t,n,!0,r,i)}function Kp(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Kp(e,t[a],n,r,i);else r=Kd(r)?!!r.capture:!!r,n=Jp(n),e&&e[Rp]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Vp(a=e.g[t],n,r,i))&&(Op(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Yp(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Vp(t,n,r,i)),(n=-1<e?t[e]:null)&&Gp(n))}function Gp(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Rp])Up(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Qp(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Yp(t))?(Up(n,e),0==n.h&&(n.src=null,t[zp]=null)):Op(e)}}}function Qp(e){return e in qp?qp[e]:qp[e]="on"+e}function $p(e,t){if(e.ba)e=!0;else{t=new Ip(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&Gp(e),e=n.call(r,t)}return e}function Yp(e){return(e=e[zp])instanceof Fp?e:null}var Xp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jp(e){return"function"===typeof e?e:(e[Xp]||(e[Xp]=function(t){return e.handleEvent(t)}),e[Xp])}function Zp(){ep.call(this),this.i=new Fp(this),this.P=this,this.I=null}function ev(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new ip(t,e);else if(t instanceof ip)t.target=t.target||e;else{var i=t;Mp(t=new ip(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=tv(o,r,!0,t)&&i}if(i=tv(o=t.g=e,r,!0,t)&&i,i=tv(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=tv(o=t.g=n[a],r,!1,t)&&i}function tv(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var s=o.listener,u=o.ha||o.src;o.ea&&Up(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Zd(Zp,ep),Zp.prototype[Rp]=!0,Zp.prototype.removeEventListener=function(e,t,n,r){Kp(this,e,t,n,r)},Zp.prototype.M=function(){if(Zp.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Op(n[r]);delete t.g[e],t.h--}}this.I=null},Zp.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Zp.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var nv=Bd.JSON.stringify;function rv(){var e=hv,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var iv,av=function(){function e(){b(this,e),this.h=this.g=null}return S(e,[{key:"add",value:function(e,t){var n=ov.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),ov=new(function(){function e(t,n){b(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return S(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new sv}),(function(e){return e.reset()})),sv=function(){function e(){b(this,e),this.next=this.g=this.h=null}return S(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function uv(e){Bd.setTimeout((function(){throw e}),0)}function cv(e,t){iv||function(){var e=Bd.Promise.resolve(void 0);iv=function(){e.then(fv)}}(),lv||(iv(),lv=!0),hv.add(e,t)}var lv=!1,hv=new av;function fv(){for(var e;e=rv();){try{e.h.call(e.g)}catch(n){uv(n)}var t=ov;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}lv=!1}function dv(e,t){Zp.call(this),this.h=e||1,this.g=t||Bd,this.j=Xd(this.lb,this),this.l=Date.now()}function pv(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function vv(e,t,n){if("function"===typeof e)n&&(e=Xd(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Xd(e.handleEvent,e)}return 2147483647<Number(t)?-1:Bd.setTimeout(e,t||0)}function mv(e){e.g=vv((function(){e.g=null,e.i&&(e.i=!1,mv(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Zd(dv,Zp),(Ud=dv.prototype).ca=!1,Ud.R=null,Ud.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ev(this,"tick"),this.ca&&(pv(this),this.start()))}},Ud.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ud.M=function(){dv.X.M.call(this),pv(this),delete this.g};var yv=function(e){m(n,e);var t=k(n);function n(e,r){var i;return b(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return S(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:mv(this)}},{key:"M",value:function(){d(h(n.prototype),"M",this).call(this),this.g&&(Bd.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(ep);function gv(e){ep.call(this),this.h=e,this.g={}}Zd(gv,ep);var kv=[];function _v(e,t,n,r){Array.isArray(n)||(n&&(kv[0]=n.toString()),n=kv);for(var i=0;i<n.length;i++){var a=Bp(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function bv(e){Dp(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Gp(e)}),e),e.g={}}function wv(){this.g=!0}function xv(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return nv(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}gv.prototype.M=function(){gv.X.M.call(this),bv(this)},gv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wv.prototype.Aa=function(){this.g=!1},wv.prototype.info=function(){};var Sv={},Ev=null;function Cv(){return Ev=Ev||new Zp}function Tv(e){ip.call(this,Sv.Pa,e)}function Iv(e){var t=Cv();ev(t,new Tv(t))}function Nv(e,t){ip.call(this,Sv.STAT_EVENT,e),this.stat=t}function Rv(e){var t=Cv();ev(t,new Nv(t,e))}function Pv(e,t){ip.call(this,Sv.Qa,e),this.size=t}function Av(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Bd.setTimeout((function(){e()}),t)}Sv.Pa="serverreachability",Zd(Tv,ip),Sv.STAT_EVENT="statevent",Zd(Nv,ip),Sv.Qa="timingevent",Zd(Pv,ip);var Ov={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Dv={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Lv(){}function jv(e){return e.h||(e.h=e.i())}function Mv(){}Lv.prototype.h=null;var Fv,Uv={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Vv(){ip.call(this,"d")}function zv(){ip.call(this,"c")}function qv(){}function Bv(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new gv(this),this.O=Wv,e=mp?125:void 0,this.T=new dv(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Hv}function Hv(){this.i=null,this.g="",this.h=!1}Zd(Vv,ip),Zd(zv,ip),Zd(qv,Lv),qv.prototype.g=function(){return new XMLHttpRequest},qv.prototype.i=function(){return{}},Fv=new qv;var Wv=45e3,Kv={},Gv={};function Qv(e,t,n){e.K=1,e.v=dm(um(t)),e.s=n,e.P=!0,$v(e,null)}function $v(e,t){e.F=Date.now(),Zv(e),e.A=um(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Cm(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Hv,e.g=Ty(e.l,n?t:null,!e.s),0<e.N&&(e.L=new yv(Xd(e.La,e,e.g),e.N)),_v(e.S,e.g,"readystatechange",e.ib),t=e.H?Lp(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Iv(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Yv(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function Xv(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Jv(e,n))==Gv){4==t&&(e.o=4,Rv(14),i=!1),xv(e.j,e.m,null,"[Incomplete Response]");break}if(r==Kv){e.o=4,Rv(15),xv(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}xv(e.j,e.m,r,null),im(e,r)}Yv(e)&&r!=Gv&&r!=Kv&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Rv(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),ky(t),t.K=!0,Rv(11))):(xv(e.j,e.m,n,"[Invalid Chunked Response]"),rm(e),nm(e))}function Jv(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Gv:(n=Number(t.substring(n,r)),isNaN(n)?Kv:(r+=1)+n>t.length?Gv:(t=t.substr(r,n),e.C=r+n,t))}function Zv(e){e.V=Date.now()+e.O,em(e,e.O)}function em(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Av(Xd(e.gb,e),t)}function tm(e){e.B&&(Bd.clearTimeout(e.B),e.B=null)}function nm(e){0==e.l.G||e.I||wy(e.l,e)}function rm(e){tm(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,pv(e.T),bv(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function im(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Dm(n.h,e)))if(!e.J&&Dm(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;by(n),hy(n)}gy(n),Rv(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Av(Xd(n.cb,n),6e3));if(1>=Om(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else Sy(n,11)}else if((e.J||n.g==e)&&by(n),!op(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var s=a[4];null!=s&&(n.Ca=s,n.j.info("SVER="+n.Ca));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.h;h.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(Lm(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.za=f,fm(r.F,r.D,f))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=Cy(r,r.H?r.ka:null,r.V),d.J){jm(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(tm(p),Zv(p)),r.g=d}else yy(r);0<n.i.length&&dy(n)}else"stop"!=a[0]&&"close"!=a[0]||Sy(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Sy(n,7):ly(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}Iv()}catch(a){}}function am(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Wd(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Wd(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Wd(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Ud=Bv.prototype).setTimeout=function(e){this.O=e},Ud.ib=function(e){e=e.target;var t=this.L;t&&3==iy(e)?t.l():this.La(e)},Ud.La=function(e){try{if(e==this.g)e:{var t=iy(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||mp||this.g&&(this.h.h||this.g.fa()||ay(this.g)))){this.I||4!=t||7==n||Iv(),tm(this);var r=this.g.aa();this.Y=r;t:if(Yv(this)){var i=ay(this.g);e="";var a=i.length,o=4==iy(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){rm(this),nm(this);var s="";break t}this.h.i=new Bd.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!op(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Rv(12),rm(this),nm(this);break e}xv(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,im(this,r)}this.P?(Xv(this,t,s),mp&&this.i&&3==t&&(_v(this.S,this.T,"tick",this.hb),this.T.start())):(xv(this.j,this.m,s,null),im(this,s)),4==t&&rm(this),this.i&&!this.I&&(4==t?wy(this.l,this):(this.i=!1,Zv(this)))}else 400==r&&0<s.indexOf("Unknown SID")?(this.o=3,Rv(12)):(this.o=0,Rv(13)),rm(this),nm(this)}}}catch(t){}},Ud.hb=function(){if(this.g){var e=iy(this.g),t=this.g.fa();this.C<t.length&&(tm(this),Xv(this,e,t),this.i&&4!=e&&Zv(this))}},Ud.cancel=function(){this.I=!0,rm(this)},Ud.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Iv(),Rv(17)),rm(this),this.o=2,nm(this)):em(this,this.V-e)};var om=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sm(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof sm){this.h=void 0!==t?t:e.h,cm(this,e.j),this.s=e.s,this.g=e.g,lm(this,e.m),this.l=e.l,t=e.i;var n=new wm;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),hm(this,n),this.o=e.o}else e&&(n=String(e).match(om))?(this.h=!!t,cm(this,n[1]||"",!0),this.s=pm(n[2]||""),this.g=pm(n[3]||"",!0),lm(this,n[4]),this.l=pm(n[5]||"",!0),hm(this,n[6]||"",!0),this.o=pm(n[7]||"")):(this.h=!!t,this.i=new wm(null,this.h))}function um(e){return new sm(e)}function cm(e,t,n){e.j=n?pm(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lm(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function hm(e,t,n){t instanceof wm?(e.i=t,function(e,t){t&&!e.j&&(xm(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Sm(this,t),Cm(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=vm(t,_m)),e.i=new wm(t,e.h))}function fm(e,t,n){e.i.set(t,n)}function dm(e){return fm(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function pm(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function vm(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,mm),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function mm(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}sm.prototype.toString=function(){var e=[],t=this.j;t&&e.push(vm(t,ym,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(vm(t,ym,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(vm(n,"/"==n.charAt(0)?km:gm,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",vm(n,bm)),e.join("")};var ym=/[#\/\?@]/g,gm=/[#\?:]/g,km=/[#\?]/g,_m=/[#\?@]/g,bm=/#/g;function wm(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xm(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Sm(e,t){xm(e),t=Tm(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Em(e,t){return xm(e),t=Tm(e,t),e.g.has(t)}function Cm(e,t,n){Sm(e,t),0<n.length&&(e.i=null,e.g.set(Tm(e,t),np(n)),e.h+=n.length)}function Tm(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ud=wm.prototype).add=function(e,t){xm(this),this.i=null,e=Tm(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ud.forEach=function(e,t){xm(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Ud.oa=function(){xm(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Ud.W=function(e){xm(this);var t=[];if("string"===typeof e)Em(this,e)&&(t=t.concat(this.g.get(Tm(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Ud.set=function(e,t){return xm(this),this.i=null,Em(this,e=Tm(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ud.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Ud.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Im=S((function e(t,n){b(this,e),this.h=t,this.g=n}));function Nm(e){this.l=e||Pm,Bd.PerformanceNavigationTiming?e=0<(e=Bd.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Bd.g&&Bd.g.Ga&&Bd.g.Ga()&&Bd.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Rm,Pm=10;function Am(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Om(e){return e.h?1:e.g?e.g.size:0}function Dm(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Lm(e,t){e.g?e.g.add(t):e.h=t}function jm(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Mm(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=_(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return np(e.i)}function Fm(){}function Um(){this.g=new Fm}function Vm(e,t,n){var r=n||"";try{am(e,(function(e,n){var i=e;Kd(e)&&(i=nv(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function zm(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function qm(e){this.l=e.ac||null,this.j=e.jb||!1}function Bm(e,t){Zp.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Hm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Nm.prototype.cancel=function(){if(this.i=Mm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=_(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Fm.prototype.stringify=function(e){return Bd.JSON.stringify(e,void 0)},Fm.prototype.parse=function(e){return Bd.JSON.parse(e,void 0)},Zd(qm,Lv),qm.prototype.g=function(){return new Bm(this.l,this.j)},qm.prototype.i=(Rm={},function(){return Rm}),Zd(Bm,Zp);var Hm=0;function Wm(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Km(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Gm(e)}function Gm(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ud=Bm.prototype).open=function(e,t){if(this.readyState!=Hm)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Gm(this)},Ud.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Bd).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Ud.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Km(this)),this.readyState=Hm},Ud.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Gm(this)),this.g&&(this.readyState=3,Gm(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof Bd.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Wm(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Ud.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Km(this):Gm(this),3==this.readyState&&Wm(this)}},Ud.Va=function(e){this.g&&(this.response=this.responseText=e,Km(this))},Ud.Ua=function(e){this.g&&(this.response=e,Km(this))},Ud.ga=function(){this.g&&Km(this)},Ud.setRequestHeader=function(e,t){this.v.append(e,t)},Ud.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ud.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Bm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Qm=Bd.JSON.parse;function $m(e){Zp.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ym,this.K=this.L=!1}Zd($m,Zp);var Ym="",Xm=/^https?$/i,Jm=["POST","PUT"];function Zm(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ey(e),ny(e)}function ey(e){e.D||(e.D=!0,ev(e,"complete"),ev(e,"error"))}function ty(e){if(e.h&&"undefined"!=typeof qd&&(!e.C[1]||4!=iy(e)||2!=e.aa()))if(e.v&&4==iy(e))vv(e.Ha,0,e);else if(ev(e,"readystatechange"),4==iy(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(om)[1]||null;if(!a&&Bd.self&&Bd.self.location){var o=Bd.self.location.protocol;a=o.substr(0,o.length-1)}i=!Xm.test(a?a.toLowerCase():"")}t=i}if(t)ev(e,"complete"),ev(e,"success");else{e.m=6;try{var s=2<iy(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.aa()+"]",ey(e)}}finally{ny(e)}}}function ny(e,t){if(e.g){ry(e);var n=e.g,r=e.C[0]?Hd:null;e.g=null,e.C=null,t||ev(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function ry(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Bd.clearTimeout(e.A),e.A=null)}function iy(e){return e.g?e.g.readyState:0}function ay(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Ym:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(By){return null}}function oy(e){var t="";return Dp(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function sy(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=oy(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):fm(e,t,n))}function uy(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function cy(e){this.Ca=0,this.i=[],this.j=new wv,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=uy("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=uy("baseRetryDelayMs",5e3,e),this.bb=uy("retryDelaySeedMs",1e4,e),this.$a=uy("forwardChannelMaxRetries",2,e),this.ta=uy("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Nm(e&&e.concurrentRequestLimit),this.Fa=new Um,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ly(e){if(fy(e),3==e.G){var t=e.U++,n=um(e.F);fm(n,"SID",e.I),fm(n,"RID",t),fm(n,"TYPE","terminate"),vy(e,n),(t=new Bv(e,e.j,t,void 0)).K=2,t.v=dm(um(n)),n=!1,Bd.navigator&&Bd.navigator.sendBeacon&&(n=Bd.navigator.sendBeacon(t.v.toString(),"")),!n&&Bd.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ty(t.l,null),t.g.da(t.v)),t.F=Date.now(),Zv(t)}Ey(e)}function hy(e){e.g&&(ky(e),e.g.cancel(),e.g=null)}function fy(e){hy(e),e.u&&(Bd.clearTimeout(e.u),e.u=null),by(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Bd.clearTimeout(e.m),e.m=null)}function dy(e){Am(e.h)||e.m||(e.m=!0,cv(e.Ja,e),e.C=0)}function py(e,t){var n;n=t?t.m:e.U++;var r=um(e.F);fm(r,"SID",e.I),fm(r,"RID",n),fm(r,"AID",e.T),vy(e,r),e.o&&e.s&&sy(r,e.o,e.s),n=new Bv(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=my(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Lm(e.h,n),Qv(n,r,t)}function vy(e,t){e.ia&&Dp(e.ia,(function(e,n){fm(t,n,e)})),e.l&&am({},(function(e,n){fm(t,n,e)}))}function my(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Xd(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{Vm(l,o,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function yy(e){e.g||e.u||(e.Z=1,cv(e.Ia,e),e.A=0)}function gy(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Av(Xd(e.Ia,e),xy(e,e.A)),e.A++,!0)}function ky(e){null!=e.B&&(Bd.clearTimeout(e.B),e.B=null)}function _y(e){e.g=new Bv(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=um(e.sa);fm(t,"RID","rpc"),fm(t,"SID",e.I),fm(t,"CI",e.L?"0":"1"),fm(t,"AID",e.T),fm(t,"TYPE","xmlhttp"),vy(e,t),e.o&&e.s&&sy(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=dm(um(t)),n.s=null,n.P=!0,$v(n,e)}function by(e){null!=e.v&&(Bd.clearTimeout(e.v),e.v=null)}function wy(e,t){var n=null;if(e.g==t){by(e),ky(e),e.g=null;var r=2}else{if(!Dm(e.h,t))return;n=t.D,jm(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;ev(r=Cv(),new Pv(r,n)),dy(e)}else yy(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(Om(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=Av(Xd(e.Ja,e,t),xy(e,e.C)),e.C++,!0))}(e,t)||2==r&&gy(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Sy(e,5);break;case 4:Sy(e,10);break;case 3:Sy(e,6);break;default:Sy(e,2)}}function xy(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function Sy(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Xd(e.kb,e);n||(n=new sm("//www.google.com/images/cleardot.gif"),Bd.location&&"http"==Bd.location.protocol||cm(n,"https"),dm(n)),function(e,t){var n=new wv;if(Bd.Image){var r=new Image;r.onload=Jd(zm,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Jd(zm,n,r,"TestLoadImage: error",!1,t),r.onabort=Jd(zm,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Jd(zm,n,r,"TestLoadImage: timeout",!1,t),Bd.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Rv(2);e.G=0,e.l&&e.l.va(t),Ey(e),fy(e)}function Ey(e){if(e.G=0,e.la=[],e.l){var t=Mm(e.h);0==t.length&&0==e.i.length||(rp(e.la,t),rp(e.la,e.i),e.h.i.length=0,np(e.i),e.i.length=0),e.l.ua()}}function Cy(e,t,n){var r=n instanceof sm?um(n):new sm(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),lm(r,r.m);else{var i=Bd.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new sm(null,void 0);r&&cm(a,r),t&&(a.g=t),i&&lm(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&fm(r,n,t),fm(r,"VER",e.ma),vy(e,r),r}function Ty(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new $m(new qm({jb:!0})):new $m(e.ra)).Ka(e.H),t}function Iy(){}function Ny(){if(pp&&!(10<=Number(Tp)))throw Error("Environmental error: no available transport.")}function Ry(e,t){Zp.call(this),this.g=new cy(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!op(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!op(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Oy(this)}function Py(e){Vv.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ay(){zv.call(this),this.status=1}function Oy(e){this.g=e}(Ud=$m.prototype).Ka=function(e){this.L=e},Ud.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Fv.g(),this.C=this.u?jv(this.u):jv(Fv),this.g.onreadystatechange=Xd(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void Zm(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=_(r.keys());try{for(o.s();!(a=o.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Bd.FormData&&e instanceof Bd.FormData,!(0<=tp(Jm,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var u,c=_(n);try{for(c.s();!(u=c.n()).done;){var h=l(u.value,2),f=h[0],d=h[1];this.g.setRequestHeader(f,d)}}catch(p){c.e(p)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ry(this),0<this.B&&((this.K=function(e){return pp&&Ep()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xd(this.qa,this)):this.A=vv(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Zm(this,s)}},Ud.qa=function(){"undefined"!=typeof qd&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ev(this,"timeout"),this.abort(8))},Ud.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ev(this,"complete"),ev(this,"abort"),ny(this))},Ud.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ny(this,!0)),$m.X.M.call(this)},Ud.Ha=function(){this.s||(this.F||this.v||this.l?ty(this):this.fb())},Ud.fb=function(){ty(this)},Ud.aa=function(){try{return 2<iy(this)?this.g.status:-1}catch(Rm){return-1}},Ud.fa=function(){try{return this.g?this.g.responseText:""}catch(Rm){return""}},Ud.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Qm(t)}},Ud.Ea=function(){return this.m},Ud.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Ud=cy.prototype).ma=8,Ud.G=1,Ud.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new Bv(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Mp(n=Lp(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=my(this,t,r),fm(i=um(this.F),"RID",e),fm(i,"CVER",22),this.D&&fm(i,"X-HTTP-Session-Id",this.D),vy(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(oy(n)))+"&"+r:this.o&&sy(i,this.o,n)),Lm(this.h,t),this.Ya&&fm(i,"TYPE","init"),this.O?(fm(i,"$req",r),fm(i,"SID","null"),t.Z=!0,Qv(t,i,null)):Qv(t,i,r),this.G=2}}else 3==this.G&&(e?py(this,e):0==this.i.length||Am(this.h)||py(this))},Ud.Ia=function(){if(this.u=null,_y(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Av(Xd(this.eb,this),e)}},Ud.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Rv(10),hy(this),_y(this))},Ud.cb=function(){null!=this.v&&(this.v=null,hy(this),gy(this),Rv(19))},Ud.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Rv(2)):(this.j.info("Failed to ping google.com"),Rv(1))},(Ud=Iy.prototype).xa=function(){},Ud.wa=function(){},Ud.va=function(){},Ud.ua=function(){},Ud.Ra=function(){},Ny.prototype.g=function(e,t){return new Ry(e,t)},Zd(Ry,Zp),Ry.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Rv(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Cy(e,null,e.V),dy(e)},Ry.prototype.close=function(){ly(this.g)},Ry.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=nv(e),e=n);t.i.push(new Im(t.ab++,e)),3==t.G&&dy(t)},Ry.prototype.M=function(){this.g.l=null,delete this.j,ly(this.g),delete this.g,Ry.X.M.call(this)},Zd(Py,Vv),Zd(Ay,zv),Zd(Oy,Iy),Oy.prototype.xa=function(){ev(this.g,"a")},Oy.prototype.wa=function(e){ev(this.g,new Py(e))},Oy.prototype.va=function(e){ev(this.g,new Ay)},Oy.prototype.ua=function(){ev(this.g,"b")},Ny.prototype.createWebChannel=Ny.prototype.g,Ry.prototype.send=Ry.prototype.u,Ry.prototype.open=Ry.prototype.m,Ry.prototype.close=Ry.prototype.close,Ov.NO_ERROR=0,Ov.TIMEOUT=8,Ov.HTTP_ERROR=6,Dv.COMPLETE="complete",Mv.EventType=Uv,Uv.OPEN="a",Uv.CLOSE="b",Uv.ERROR="c",Uv.MESSAGE="d",Zp.prototype.listen=Zp.prototype.N,$m.prototype.listenOnce=$m.prototype.O,$m.prototype.getLastError=$m.prototype.Oa,$m.prototype.getLastErrorCode=$m.prototype.Ea,$m.prototype.getStatus=$m.prototype.aa,$m.prototype.getResponseJson=$m.prototype.Sa,$m.prototype.getResponseText=$m.prototype.fa,$m.prototype.send=$m.prototype.da,$m.prototype.setWithCredentials=$m.prototype.Ka;var Dy=zd.createWebChannelTransport=function(){return new Ny},Ly=zd.getStatEventTarget=function(){return Cv()},jy=zd.ErrorCode=Ov,My=zd.EventType=Dv,Fy=zd.Event=Sv,Uy=zd.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Vy=zd.FetchXmlHttpFactory=qm,zy=zd.WebChannel=Mv,qy=zd.XhrIo=$m,By="@firebase/firestore",Hy=function(){function e(t){b(this,e),this.uid=t}return S(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Hy.UNAUTHENTICATED=new Hy(null),Hy.GOOGLE_CREDENTIALS=new Hy("google-credentials-uid"),Hy.FIRST_PARTY=new Hy("first-party-uid"),Hy.MOCK_USER=new Hy("mock-user");var Wy="9.15.0",Ky=new Oe("@firebase/firestore");function Gy(){return Ky.logLevel}function Qy(e){if(Ky.logLevel<=Ce.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Xy);Ky.debug.apply(Ky,["Firestore (".concat(Wy,"): ").concat(e)].concat(E(i)))}}function $y(e){if(Ky.logLevel<=Ce.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Xy);Ky.error.apply(Ky,["Firestore (".concat(Wy,"): ").concat(e)].concat(E(i)))}}function Yy(e){if(Ky.logLevel<=Ce.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Xy);Ky.warn.apply(Ky,["Firestore (".concat(Wy,"): ").concat(e)].concat(E(i)))}}function Xy(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Jy(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Wy,") INTERNAL ASSERTION FAILED: ")+e;throw $y(t),new Error(t)}function Zy(e,t){e||Jy()}function eg(e,t){return e}var tg={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ng=function(e){m(n,e);var t=k(n);function n(e,r){var i;return b(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return S(n)}(ee),rg=S((function e(){var t=this;b(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),ig=S((function e(t,n){b(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),ag=function(){function e(){b(this,e)}return S(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Hy.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),og=function(){function e(t){b(this,e),this.token=t,this.changeListener=null}return S(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),sg=function(){function e(t){b(this,e),this.t=t,this.currentUser=Hy.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return S(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},o=new rg;this.o=function(){n.i++,n.currentUser=n.u(),o.resolve(),o=new rg,e.enqueueRetryable((function(){return i(n.currentUser)}))};var u=function(){var t=o;e.enqueueRetryable(s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},c=function(e){Qy("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),u()};this.t.onInit((function(e){return c(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?c(e):(Qy("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new rg)}}),0),u()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Qy("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Zy("string"==typeof n.accessToken),new ig(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Zy(null===e||"string"==typeof e),new Hy(e)}}]),e}(),ug=function(){function e(t,n,r,i){b(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=Hy.FIRST_PARTY,this.p=new Map}return S(e,[{key:"I",value:function(){return this.g?this.g():(Zy(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),cg=function(){function e(t,n,r,i){b(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return S(e,[{key:"getToken",value:function(){return Promise.resolve(new ug(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Hy.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),lg=S((function e(t){b(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),hg=function(){function e(t){b(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return S(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Qy("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,Qy("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Qy("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):Qy("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Zy("string"==typeof t.token),e.A=t.token,new lg(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function fg(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var dg=function(){function e(){b(this,e)}return S(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=fg(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function pg(e,t){return e<t?-1:e>t?1:0}function vg(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var mg=function(){function e(t,n){if(b(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new ng(tg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ng(tg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ng(tg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ng(tg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return S(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?pg(this.nanoseconds,e.nanoseconds):pg(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),yg=function(){function e(t){b(this,e),this.timestamp=t}return S(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new mg(0,0))}},{key:"max",value:function(){return new e(new mg(253402300799,999999999))}}]),e}(),gg=function(){function e(t,n,r){b(this,e),void 0===n?n=0:n>t.length&&Jy(),void 0===r?r=t.length-n:r>t.length-n&&Jy(),this.segments=t,this.offset=n,this.len=r}return S(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),kg=function(e){m(n,e);var t=k(n);function n(){return b(this,n),t.apply(this,arguments)}return S(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new ng(tg.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,E(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(gg),_g=/^[_a-zA-Z][_a-zA-Z0-9]*$/,bg=function(e){m(n,e);var t=k(n);function n(){return b(this,n),t.apply(this,arguments)}return S(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return _g.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new ng(tg.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new ng(tg.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ng(tg.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new ng(tg.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(gg),wg=function(){function e(t){b(this,e),this.path=t}return S(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===kg.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(kg.fromString(t))}},{key:"fromName",value:function(t){return new e(kg.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(kg.emptyPath())}},{key:"comparator",value:function(e,t){return kg.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new kg(t.slice()))}}]),e}(),xg=S((function e(t,n,r,i){b(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));xg.UNKNOWN_ID=-1;function Sg(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=yg.fromTimestamp(1e9===r?new mg(n+1,0):new mg(n,r));return new Cg(i,wg.empty(),t)}function Eg(e){return new Cg(e.readTime,e.key,-1)}var Cg=function(){function e(t,n,r){b(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return S(e,null,[{key:"min",value:function(){return new e(yg.min(),wg.empty(),-1)}},{key:"max",value:function(){return new e(yg.max(),wg.empty(),-1)}}]),e}();function Tg(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=wg.comparator(e.documentKey,t.documentKey))?n:pg(e.largestBatchId,t.largestBatchId)}var Ig="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ng=function(){function e(){b(this,e),this.onCommittedListeners=[]}return S(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Rg(e){return Pg.apply(this,arguments)}function Pg(){return Pg=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===tg.FAILED_PRECONDITION&&t.message===Ig){e.next=2;break}throw t;case 2:Qy("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Pg.apply(this,arguments)}var Ag=function(){function e(t){var n=this;b(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return S(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Jy(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=_(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(s){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s(u)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}();function Og(e){return"IndexedDbTransactionError"===e.name}var Dg=function(){function e(t,n){var r=this;b(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return S(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();Dg.at=-1;var Lg=S((function e(t,n,r,i,a,o,s,u){b(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),jg=function(){function e(t,n){b(this,e),this.projectId=t,this.database=n||"(default)"}return S(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Mg(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Fg(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ug(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Vg(e){return null==e}function zg(e){return 0===e&&1/e==-1/0}function qg(e){return"number"==typeof e&&Number.isInteger(e)&&!zg(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Bg=function(e){function t(e){b(this,t),this.binaryString=e}return S(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return pg(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Bg.EMPTY_BYTE_STRING=new Bg("");var Hg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wg(e){if(Zy(!!e),"string"==typeof e){var t=0,n=Hg.exec(e);if(Zy(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Kg(e.seconds),nanos:Kg(e.nanos)}}function Kg(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Gg(e){return"string"==typeof e?Bg.fromBase64String(e):Bg.fromUint8Array(e)}function Qg(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function $g(e){var t=e.mapValue.fields.__previous_value__;return Qg(t)?$g(t):t}function Yg(e){var t=Wg(e.mapValue.fields.__local_write_time__.timestampValue);return new mg(t.seconds,t.nanos)}var Xg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Jg(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Qg(e)?4:hk(e)?9007199254740991:10:Jy()}function Zg(e,t){if(e===t)return!0;var n=Jg(e);if(n!==Jg(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Yg(e).isEqual(Yg(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Wg(e.timestampValue),r=Wg(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Gg(e.bytesValue).isEqual(Gg(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Kg(e.geoPointValue.latitude)===Kg(t.geoPointValue.latitude)&&Kg(e.geoPointValue.longitude)===Kg(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Kg(e.integerValue)===Kg(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Kg(e.doubleValue),r=Kg(t.doubleValue);return n===r?zg(n)===zg(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return vg(e.arrayValue.values||[],t.arrayValue.values||[],Zg);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Mg(n)!==Mg(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Zg(n[i],r[i])))return!1;return!0}(e,t);default:return Jy()}}function ek(e,t){return void 0!==(e.values||[]).find((function(e){return Zg(e,t)}))}function tk(e,t){if(e===t)return 0;var n=Jg(e),r=Jg(t);if(n!==r)return pg(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pg(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Kg(e.integerValue||e.doubleValue),r=Kg(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return nk(e.timestampValue,t.timestampValue);case 4:return nk(Yg(e),Yg(t));case 5:return pg(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Gg(e),r=Gg(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=pg(n[i],r[i]);if(0!==a)return a}return pg(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=pg(Kg(e.latitude),Kg(t.latitude));return 0!==n?n:pg(Kg(e.longitude),Kg(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=tk(n[i],r[i]);if(a)return a}return pg(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Xg.mapValue&&t===Xg.mapValue)return 0;if(e===Xg.mapValue)return 1;if(t===Xg.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=pg(r[o],a[o]);if(0!==s)return s;var u=tk(n[r[o]],i[a[o]]);if(0!==u)return u}return pg(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Jy()}}function nk(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return pg(e,t);var n=Wg(e),r=Wg(t),i=pg(n.seconds,r.seconds);return 0!==i?i:pg(n.nanos,r.nanos)}function rk(e){return ik(e)}function ik(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Wg(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Gg(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,wg.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=_(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ik(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=_(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ik(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Jy();var t,n}function ak(e){return!!e&&"integerValue"in e}function ok(e){return!!e&&"arrayValue"in e}function sk(e){return!!e&&"nullValue"in e}function uk(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ck(e){return!!e&&"mapValue"in e}function lk(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Fg(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=lk(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=lk(e.arrayValue.values[r]);return n}return Object.assign({},e)}function hk(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var fk=S((function e(t,n){b(this,e),this.position=t,this.inclusive=n}));function dk(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?wg.comparator(wg.fromName(o.referenceValue),n.key):tk(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function pk(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Zg(e.position[n],t.position[n]))return!1;return!0}var vk=S((function e(){b(this,e)})),mk=function(e){m(n,e);var t=k(n);function n(e,r,i){var a;return b(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return S(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(tk(t,this.value)):null!==t&&Jg(this.value)===Jg(t)&&this.matchesComparison(tk(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Jy()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Sk(e,t,r):"array-contains"===t?new Ik(e,r):"in"===t?new Nk(e,r):"not-in"===t?new Rk(e,r):"array-contains-any"===t?new Pk(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Ek(e,n):new Ck(e,n)}}]),n}(vk),yk=function(e){m(n,e);var t=k(n);function n(e,r){var i;return b(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return S(n,[{key:"matches",value:function(e){return gk(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=_(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(vk);function gk(e){return"and"===e.op}function kk(e){return _k(e)&&gk(e)}function _k(e){var t,n=_(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof yk)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function bk(e){if(e instanceof mk)return e.field.canonicalString()+e.op.toString()+rk(e.value);var t=e.filters.map((function(e){return bk(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function wk(e,t){return e instanceof mk?function(e,t){return t instanceof mk&&e.op===t.op&&e.field.isEqual(t.field)&&Zg(e.value,t.value)}(e,t):e instanceof yk?function(e,t){return t instanceof yk&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&wk(n,t.filters[r])}),!0)}(e,t):void Jy()}function xk(e){return e instanceof mk?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(rk(e.value))}(e):e instanceof yk?function(e){return e.op.toString()+" {"+e.getFilters().map(xk).join(" ,")+"}"}(e):"Filter"}var Sk=function(e){m(n,e);var t=k(n);function n(e,r,i){var a;return b(this,n),(a=t.call(this,e,r,i)).key=wg.fromName(i.referenceValue),a}return S(n,[{key:"matches",value:function(e){var t=wg.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(mk),Ek=function(e){m(n,e);var t=k(n);function n(e,r){var i;return b(this,n),(i=t.call(this,e,"in",r)).keys=Tk("in",r),i}return S(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(mk),Ck=function(e){m(n,e);var t=k(n);function n(e,r){var i;return b(this,n),(i=t.call(this,e,"not-in",r)).keys=Tk("not-in",r),i}return S(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(mk);function Tk(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return wg.fromName(e.referenceValue)}))}var Ik=function(e){m(n,e);var t=k(n);function n(e,r){return b(this,n),t.call(this,e,"array-contains",r)}return S(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return ok(t)&&ek(t.arrayValue,this.value)}}]),n}(mk),Nk=function(e){m(n,e);var t=k(n);function n(e,r){return b(this,n),t.call(this,e,"in",r)}return S(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&ek(this.value.arrayValue,t)}}]),n}(mk),Rk=function(e){m(n,e);var t=k(n);function n(e,r){return b(this,n),t.call(this,e,"not-in",r)}return S(n,[{key:"matches",value:function(e){if(ek(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!ek(this.value.arrayValue,t)}}]),n}(mk),Pk=function(e){m(n,e);var t=k(n);function n(e,r){return b(this,n),t.call(this,e,"array-contains-any",r)}return S(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!ok(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return ek(t.value.arrayValue,e)}))}}]),n}(mk),Ak=S((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";b(this,e),this.field=t,this.dir=n}));function Ok(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Dk=function(){function e(t,n){b(this,e),this.comparator=t,this.root=n||jk.EMPTY}return S(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,jk.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,jk.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Lk(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Lk(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Lk(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Lk(this.root,e,this.comparator,!0)}}]),e}(),Lk=function(){function e(t,n,r,i){b(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return S(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),jk=function(){function e(t,n,r,i,a){b(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return S(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Jy();if(this.right.isRed())throw Jy();var e=this.left.check();if(e!==this.right.check())throw Jy();return e+(this.isRed()?0:1)}}]),e}();jk.EMPTY=null,jk.RED=!0,jk.BLACK=!1,jk.EMPTY=new(function(){function e(){b(this,e),this.size=0}return S(e,[{key:"key",get:function(){throw Jy()}},{key:"value",get:function(){throw Jy()}},{key:"color",get:function(){throw Jy()}},{key:"left",get:function(){throw Jy()}},{key:"right",get:function(){throw Jy()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new jk(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Mk=function(){function e(t){b(this,e),this.comparator=t,this.data=new Dk(this.comparator)}return S(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Fk(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Fk(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Fk=function(){function e(t){b(this,e),this.iter=t}return S(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var Uk=function(){function e(t){b(this,e),this.fields=t,t.sort(bg.comparator)}return S(e,[{key:"unionWith",value:function(t){var n,r=new Mk(bg.comparator),i=_(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,s=_(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=_(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return vg(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Vk=function(){function e(t){b(this,e),this.value=t}return S(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ck(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lk(t)}},{key:"setAll",value:function(e){var t=this,n=bg.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=lk(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());ck(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Zg(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ck(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Fg(t,(function(t,n){return e[t]=n}));var r,i=_(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(lk(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function zk(e){var t=[];return Fg(e.fields,(function(e,n){var r=new bg([e]);if(ck(n)){var i=zk(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=_(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new Uk(t)}var qk=function(){function e(t,n,r,i,a,o,s){b(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}return S(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(yg.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Vk.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Vk.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=yg.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,yg.min(),yg.min(),yg.min(),Vk.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,yg.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,yg.min(),yg.min(),Vk.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,yg.min(),yg.min(),Vk.empty(),2)}}]),e}(),Bk=S((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;b(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.ft=null}));function Hk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Bk(e,t,n,r,i,a,o)}function Wk(e){var t=eg(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return bk(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Vg(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return rk(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return rk(e)})).join(",")),t.ft=n}return t.ft}function Kk(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Ok(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!wk(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!pk(e.startAt,t.startAt)&&pk(e.endAt,t.endAt)}function Gk(e){return wg.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Qk=S((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;b(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.dt=null,this._t=null,this.startAt,this.endAt}));function $k(e,t,n,r,i,a,o,s){return new Qk(e,t,n,r,i,a,o,s)}function Yk(e){return new Qk(e)}function Xk(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Jk(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Zk(e){var t,n=_(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function e_(e){return null!==e.collectionGroup}function t_(e){var t=eg(e);if(null===t.dt){t.dt=[];var n=Zk(t),r=Jk(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new Ak(n)),t.dt.push(new Ak(bg.keyField(),"asc"));else{var i,a=!1,o=_(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.dt.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new Ak(bg.keyField(),u))}}}return t.dt}function n_(e){var t=eg(e);if(!t._t)if("F"===t.limitType)t._t=Hk(t.path,t.collectionGroup,t_(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=_(t_(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Ak(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new fk(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new fk(t.startAt.position,t.startAt.inclusive):null;t._t=Hk(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t._t}function r_(e,t,n){return new Qk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function i_(e,t){return Kk(n_(e),n_(t))&&e.limitType===t.limitType}function a_(e){return"".concat(Wk(n_(e)),"|lt:").concat(e.limitType)}function o_(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return xk(e)})).join(", "),"]")),Vg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return rk(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return rk(e)})).join(",")),"Target(".concat(t,")")}(n_(e)),"; limitType=").concat(e.limitType,")")}function s_(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):wg.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=_(t_(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=_(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=dk(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,t_(e),t))&&!(e.endAt&&!function(e,t,n){var r=dk(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,t_(e),t))}(e,t)}function u_(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function c_(e){return function(t,n){var r,i=!1,a=_(t_(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=l_(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function l_(e,t,n){var r=e.field.isKeyField()?wg.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?tk(r,i):Jy()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Jy()}}function h_(e,t){if(e.wt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zg(t)?"-0":t}}function f_(e){return{integerValue:""+e}}function d_(e,t){return qg(t)?f_(t):h_(e,t)}var p_=S((function e(){b(this,e),this._=void 0}));function v_(e,t,n){return e instanceof g_?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof k_?__(e,t):e instanceof b_?w_(e,t):function(e,t){var n=y_(e,t),r=S_(n)+S_(e.gt);return ak(n)&&ak(e.gt)?f_(r):h_(e.yt,r)}(e,t)}function m_(e,t,n){return e instanceof k_?__(e,t):e instanceof b_?w_(e,t):n}function y_(e,t){return e instanceof x_?ak(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var g_=function(e){m(n,e);var t=k(n);function n(){return b(this,n),t.apply(this,arguments)}return S(n)}(p_),k_=function(e){m(n,e);var t=k(n);function n(e){var r;return b(this,n),(r=t.call(this)).elements=e,r}return S(n)}(p_);function __(e,t){var n,r=E_(t),i=_(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Zg(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var b_=function(e){m(n,e);var t=k(n);function n(e){var r;return b(this,n),(r=t.call(this)).elements=e,r}return S(n)}(p_);function w_(e,t){var n,r=E_(t),i=_(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Zg(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var x_=function(e){m(n,e);var t=k(n);function n(e,r){var i;return b(this,n),(i=t.call(this)).yt=e,i.gt=r,i}return S(n)}(p_);function S_(e){return Kg(e.integerValue||e.doubleValue)}function E_(e){return ok(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var C_=S((function e(t,n){b(this,e),this.version=t,this.transformResults=n})),T_=function(){function e(t,n){b(this,e),this.updateTime=t,this.exists=n}return S(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function I_(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var N_=S((function e(){b(this,e)}));function R_(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new q_(e.key,T_.none()):new L_(e.key,e.data,T_.none());var n,r=e.data,i=Vk.empty(),a=new Mk(bg.comparator),o=_(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new j_(e.key,i,new Uk(a.toArray()),T_.none())}function P_(e,t,n){e instanceof L_?function(e,t,n){var r=e.value.clone(),i=F_(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof j_?function(e,t,n){if(I_(e.precondition,t)){var r=F_(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(M_(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function A_(e,t,n,r){return e instanceof L_?function(e,t,n,r){if(!I_(e.precondition,t))return n;var i=e.value.clone(),a=U_(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof j_?function(e,t,n,r){if(!I_(e.precondition,t))return n;var i=U_(e.fieldTransforms,r,t),a=t.data;return a.setAll(M_(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return I_(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function O_(e,t){var n,r=null,i=_(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=y_(a.transform,o||null);null!=s&&(null===r&&(r=Vk.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function D_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&vg(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof k_&&t instanceof k_||e instanceof b_&&t instanceof b_?vg(e.elements,t.elements,Zg):e instanceof x_&&t instanceof x_?Zg(e.gt,t.gt):e instanceof g_&&t instanceof g_}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var L_=function(e){m(n,e);var t=k(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return b(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return S(n,[{key:"getFieldMask",value:function(){return null}}]),n}(N_),j_=function(e){m(n,e);var t=k(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return b(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return S(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(N_);function M_(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function F_(e,t,n){var r=new Map;Zy(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,m_(o,s,n[i]))}return r}function U_(e,t,n){var r,i=new Map,a=_(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,v_(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var V_,z_,q_=function(e){m(n,e);var t=k(n);function n(e,r){var i;return b(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return S(n,[{key:"getFieldMask",value:function(){return null}}]),n}(N_),B_=function(e){m(n,e);var t=k(n);function n(e,r){var i;return b(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return S(n,[{key:"getFieldMask",value:function(){return null}}]),n}(N_),H_=S((function e(t){b(this,e),this.count=t}));function W_(e){switch(e){default:return Jy();case tg.CANCELLED:case tg.UNKNOWN:case tg.DEADLINE_EXCEEDED:case tg.RESOURCE_EXHAUSTED:case tg.INTERNAL:case tg.UNAVAILABLE:case tg.UNAUTHENTICATED:return!1;case tg.INVALID_ARGUMENT:case tg.NOT_FOUND:case tg.ALREADY_EXISTS:case tg.PERMISSION_DENIED:case tg.FAILED_PRECONDITION:case tg.ABORTED:case tg.OUT_OF_RANGE:case tg.UNIMPLEMENTED:case tg.DATA_LOSS:return!0}}function K_(e){if(void 0===e)return $y("GRPC error has no .code"),tg.UNKNOWN;switch(e){case V_.OK:return tg.OK;case V_.CANCELLED:return tg.CANCELLED;case V_.UNKNOWN:return tg.UNKNOWN;case V_.DEADLINE_EXCEEDED:return tg.DEADLINE_EXCEEDED;case V_.RESOURCE_EXHAUSTED:return tg.RESOURCE_EXHAUSTED;case V_.INTERNAL:return tg.INTERNAL;case V_.UNAVAILABLE:return tg.UNAVAILABLE;case V_.UNAUTHENTICATED:return tg.UNAUTHENTICATED;case V_.INVALID_ARGUMENT:return tg.INVALID_ARGUMENT;case V_.NOT_FOUND:return tg.NOT_FOUND;case V_.ALREADY_EXISTS:return tg.ALREADY_EXISTS;case V_.PERMISSION_DENIED:return tg.PERMISSION_DENIED;case V_.FAILED_PRECONDITION:return tg.FAILED_PRECONDITION;case V_.ABORTED:return tg.ABORTED;case V_.OUT_OF_RANGE:return tg.OUT_OF_RANGE;case V_.UNIMPLEMENTED:return tg.UNIMPLEMENTED;case V_.DATA_LOSS:return tg.DATA_LOSS;default:return Jy()}}(z_=V_||(V_={}))[z_.OK=0]="OK",z_[z_.CANCELLED=1]="CANCELLED",z_[z_.UNKNOWN=2]="UNKNOWN",z_[z_.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",z_[z_.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",z_[z_.NOT_FOUND=5]="NOT_FOUND",z_[z_.ALREADY_EXISTS=6]="ALREADY_EXISTS",z_[z_.PERMISSION_DENIED=7]="PERMISSION_DENIED",z_[z_.UNAUTHENTICATED=16]="UNAUTHENTICATED",z_[z_.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",z_[z_.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",z_[z_.ABORTED=10]="ABORTED",z_[z_.OUT_OF_RANGE=11]="OUT_OF_RANGE",z_[z_.UNIMPLEMENTED=12]="UNIMPLEMENTED",z_[z_.INTERNAL=13]="INTERNAL",z_[z_.UNAVAILABLE=14]="UNAVAILABLE",z_[z_.DATA_LOSS=15]="DATA_LOSS";var G_=function(){function e(t,n){b(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return S(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=_(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Fg(this.inner,(function(t,n){var r,i=_(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Ug(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Q_=new Dk(wg.comparator);function $_(){return Q_}var Y_=new Dk(wg.comparator);function X_(){for(var e=Y_,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function J_(e){var t=Y_;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Z_(){return tb()}function eb(){return tb()}function tb(){return new G_((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var nb=new Dk(wg.comparator),rb=new Mk(wg.comparator);function ib(){for(var e=rb,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var ab=new Mk(pg);function ob(){return ab}var sb=function(){function e(t,n,r,i,a){b(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return S(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,ub.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(yg.min(),i,ob(),$_(),ib())}}]),e}(),ub=function(){function e(t,n,r,i,a){b(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return S(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,ib(),ib(),ib())}}]),e}(),cb=S((function e(t,n,r,i){b(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i})),lb=S((function e(t,n){b(this,e),this.targetId=t,this.Et=n})),hb=S((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bg.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;b(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),fb=function(){function e(){b(this,e),this.At=0,this.Rt=vb(),this.bt=Bg.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}return S(e,[{key:"current",get:function(){return this.Pt}},{key:"resumeToken",get:function(){return this.bt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.vt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}},{key:"Ct",value:function(){var e=ib(),t=ib(),n=ib();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Jy()}})),new ub(this.bt,this.Pt,e,t,n)}},{key:"xt",value:function(){this.vt=!1,this.Rt=vb()}},{key:"Nt",value:function(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.vt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"Mt",value:function(){this.At-=1}},{key:"Ft",value:function(){this.vt=!0,this.Pt=!0}}]),e}(),db=function(){function e(t){b(this,e),this.$t=t,this.Bt=new Map,this.Lt=$_(),this.qt=pb(),this.Ut=new Mk(pg)}return S(e,[{key:"Kt",value:function(e){var t,n=_(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(s){n.e(s)}finally{n.f()}var i,a=_(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(s){a.e(s)}finally{a.f()}}},{key:"jt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Wt(n);switch(e.state){case 0:t.zt(n)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||t.removeTarget(n);break;case 3:t.zt(n)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:t.zt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:Jy()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.zt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t=e.targetId,n=e.Et.count,r=this.Yt(t);if(r){var i=r.target;if(Gk(i))if(0===n){var a=new wg(i.path);this.Qt(t,a,qk.newNoDocument(a,yg.min()))}else Zy(1===n);else this.Xt(t)!==n&&(this.Ht(t),this.Ut=this.Ut.add(t))}}},{key:"Zt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&Gk(a.target)){var o=new wg(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,qk.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=ib();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new sb(e,n,this.Ut,this.Lt,r);return this.Lt=$_(),this.qt=pb(),this.Ut=new Mk(pg),i}},{key:"Gt",value:function(e,t){if(this.zt(e)){var n=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.zt(e)){var r=this.Wt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Xt",value:function(e){var t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.Wt(e).Ot()}},{key:"Wt",value:function(e){var t=this.Bt.get(e);return t||(t=new fb,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new Mk(pg),this.qt=this.qt.insert(e,t)),t}},{key:"zt",value:function(e){var t=null!==this.Yt(e);return t||Qy("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new fb),this.$t.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}]),e}();function pb(){return new Dk(wg.comparator)}function vb(){return new Dk(wg.comparator)}var mb={asc:"ASCENDING",desc:"DESCENDING"},yb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gb={and:"AND",or:"OR"},kb=S((function e(t,n){b(this,e),this.databaseId=t,this.wt=n}));function _b(e,t){return e.wt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function bb(e,t){return e.wt?t.toBase64():t.toUint8Array()}function wb(e,t){return _b(e,t.toTimestamp())}function xb(e){return Zy(!!e),yg.fromTimestamp(function(e){var t=Wg(e);return new mg(t.seconds,t.nanos)}(e))}function Sb(e,t){return function(e){return new kg(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Eb(e){var t=kg.fromString(e);return Zy(Wb(t)),t}function Cb(e,t){return Sb(e.databaseId,t.path)}function Tb(e,t){var n=Eb(t);if(n.get(1)!==e.databaseId.projectId)throw new ng(tg.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ng(tg.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new wg(Pb(n))}function Ib(e,t){return Sb(e.databaseId,t)}function Nb(e){var t=Eb(e);return 4===t.length?kg.emptyPath():Pb(t)}function Rb(e){return new kg(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Pb(e){return Zy(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ab(e,t,n){return{name:Cb(e,t),fields:n.value.mapValue.fields}}function Ob(e,t){var n;if(t instanceof L_)n={update:Ab(e,t.key,t.value)};else if(t instanceof q_)n={delete:Cb(e,t.key)};else if(t instanceof j_)n={update:Ab(e,t.key,t.data),updateMask:Hb(t.fieldMask)};else{if(!(t instanceof B_))return Jy();n={verify:Cb(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof g_)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof k_)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof b_)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof x_)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Jy()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:wb(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Jy()}(e,t.precondition)),n}function Db(e,t){return{documents:[Ib(e,t.path)]}}function Lb(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Ib(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Ib(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Bb(yk.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:zb(e.field),direction:Fb(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.wt||Vg(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function jb(e){var t=Nb(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Zy(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Mb(e);return t instanceof yk&&kk(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Ak(qb(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return Vg(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new fk(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new fk(n,t)}(n.endAt)),$k(t,i,s,o,u,"F",c,l)}function Mb(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=qb(e.unaryFilter.field);return mk.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=qb(e.unaryFilter.field);return mk.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=qb(e.unaryFilter.field);return mk.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=qb(e.unaryFilter.field);return mk.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Jy()}}(e):void 0!==e.fieldFilter?function(e){return mk.create(qb(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Jy()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return yk.create(e.compositeFilter.filters.map((function(e){return Mb(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Jy()}}(e.compositeFilter.op))}(e):Jy()}function Fb(e){return mb[e]}function Ub(e){return yb[e]}function Vb(e){return gb[e]}function zb(e){return{fieldPath:e.canonicalString()}}function qb(e){return bg.fromServerFormat(e.fieldPath)}function Bb(e){return e instanceof mk?function(e){if("=="===e.op){if(uk(e.value))return{unaryFilter:{field:zb(e.field),op:"IS_NAN"}};if(sk(e.value))return{unaryFilter:{field:zb(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(uk(e.value))return{unaryFilter:{field:zb(e.field),op:"IS_NOT_NAN"}};if(sk(e.value))return{unaryFilter:{field:zb(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zb(e.field),op:Ub(e.op),value:e.value}}}(e):e instanceof yk?function(e){var t=e.getFilters().map((function(e){return Bb(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Vb(e.op),filters:t}}}(e):Jy()}function Hb(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Wb(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Kb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Gb=([].concat(E(Kb),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),Qb=Gb;[].concat(Qb,["indexConfiguration","indexState","indexEntries"]);var $b=function(){function e(t,n,r,i){b(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return S(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&P_(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=_(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=A_(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=_(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=A_(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=eb();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=R_(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(yg.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),ib())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&vg(this.mutations,e.mutations,(function(e,t){return D_(e,t)}))&&vg(this.baseMutations,e.baseMutations,(function(e,t){return D_(e,t)}))}}]),e}(),Yb=function(){function e(t,n,r,i){b(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return S(e,null,[{key:"from",value:function(t,n,r){Zy(t.mutations.length===r.length);for(var i=nb,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Xb=function(){function e(t,n){b(this,e),this.largestBatchId=t,this.mutation=n}return S(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Jb=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:yg.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:yg.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Bg.EMPTY_BYTE_STRING;b(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return S(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Zb=S((function e(t){b(this,e),this.ie=t}));function ew(e){var t=jb({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?r_(t,t.limit,"L"):t}var tw=function(){function e(){b(this,e)}return S(e,[{key:"ue",value:function(e,t){this.ce(e,t),t.ae()}},{key:"ce",value:function(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Kg(e.integerValue));else if("doubleValue"in e){var n=Kg(e.doubleValue);isNaN(n)?this.he(t,13):(this.he(t,15),zg(n)?t.le(0):t.le(n))}else if("timestampValue"in e){var r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe("".concat(r.seconds||"")),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Gg(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.he(t,45),t.le(i.latitude||0),t.le(i.longitude||0)}else"mapValue"in e?hk(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):Jy()}},{key:"de",value:function(e,t){this.he(t,25),this.pe(e,t)}},{key:"pe",value:function(e,t){t.fe(e)}},{key:"ge",value:function(e,t){var n=e.fields||{};this.he(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.de(a,t),this.ce(n[a],t)}}},{key:"ye",value:function(e,t){var n=e.values||[];this.he(t,50);var r,i=_(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ce(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"me",value:function(e,t){var n=this;this.he(t,37),wg.fromName(e).path.forEach((function(e){n.he(t,60),n.pe(e,t)}))}},{key:"he",value:function(e,t){e.le(t)}},{key:"_e",value:function(e){e.le(2)}}]),e}();tw.Ie=new tw;var nw=function(){function e(){b(this,e),this.Je=new rw}return S(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Je.add(t),Ag.resolve()}},{key:"getCollectionParents",value:function(e,t){return Ag.resolve(this.Je.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Ag.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Ag.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Ag.resolve(null)}},{key:"getIndexType",value:function(e,t){return Ag.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Ag.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Ag.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Ag.resolve(Cg.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Ag.resolve(Cg.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Ag.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Ag.resolve()}}]),e}(),rw=function(){function e(){b(this,e),this.index={}}return S(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Mk(kg.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Mk(kg.comparator)).toArray()}}]),e}();new Uint8Array(0);var iw=function(){function e(t,n,r){b(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return S(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();iw.DEFAULT_COLLECTION_PERCENTILE=10,iw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,iw.DEFAULT=new iw(41943040,iw.DEFAULT_COLLECTION_PERCENTILE,iw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),iw.DISABLED=new iw(-1,0,0);var aw=function(){function e(t){b(this,e),this.bn=t}return S(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}();var ow=function(){function e(){b(this,e),this.changes=new G_((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return S(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,qk.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ag.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var sw=S((function e(t,n){b(this,e),this.overlayedDocument=t,this.mutatedFields=n})),uw=function(){function e(t,n,r,i){b(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return S(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&A_(r.mutation,e,Uk.empty(),mg.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,ib()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ib(),i=Z_();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=X_();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Z_();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,ib())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=$_(),a=tb(),o=tb();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof j_)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),A_(o.mutation,t,o.mutation.getFieldMask(),mg.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new sw(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=tb(),i=new Dk((function(e,t){return e-t})),a=ib();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=_(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Uk.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||ib()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=eb();c.forEach((function(e){if(!a.has(e)){var n=R_(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return Ag.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return wg.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):e_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Ag.resolve(Z_()),s=-1,u=a;return o.next((function(t){return Ag.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?Ag.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,ib())})).next((function(e){return{batchId:s,changes:J_(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new wg(t)).next((function(e){var t=X_();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=X_();return this.indexManager.getCollectionParents(e,i).next((function(o){return Ag.forEach(o,(function(o){var s=function(e,t){return new Qk(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,qk.newInvalidDocument(n)))}));var n=X_();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&A_(a.mutation,i,Uk.empty(),mg.now()),s_(t,i)&&(n=n.insert(r,i))})),n}))}}]),e}(),cw=function(){function e(t){b(this,e),this.yt=t,this.Zn=new Map,this.ts=new Map}return S(e,[{key:"getBundleMetadata",value:function(e,t){return Ag.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:xb(n.createTime)}),Ag.resolve()}},{key:"getNamedQuery",value:function(e,t){return Ag.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:ew(e.bundledQuery),readTime:xb(e.readTime)}}(t)),Ag.resolve()}}]),e}(),lw=function(){function e(){b(this,e),this.overlays=new Dk(wg.comparator),this.es=new Map}return S(e,[{key:"getOverlay",value:function(e,t){return Ag.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Z_();return Ag.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.oe(e,t,i)})),Ag.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),Ag.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Z_(),i=t.length+1,a=new wg(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return Ag.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Dk((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=Z_(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=Z_(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return Ag.resolve(u)}},{key:"oe",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Xb(t,n));var a=this.es.get(t);void 0===a&&(a=ib(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),hw=function(){function e(){b(this,e),this.ns=new Mk(fw.ss),this.rs=new Mk(fw.os)}return S(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new fw(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new fw(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new wg(new kg([])),r=new fw(n,e),i=new fw(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new wg(new kg([])),n=new fw(t,e),r=new fw(t,e+1),i=ib();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new fw(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),fw=function(){function e(t,n){b(this,e),this.key=t,this._s=n}return S(e,null,[{key:"ss",value:function(e,t){return wg.comparator(e.key,t.key)||pg(e._s,t._s)}},{key:"os",value:function(e,t){return pg(e._s,t._s)||wg.comparator(e.key,t.key)}}]),e}(),dw=function(){function e(t,n){b(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Mk(fw.ss)}return S(e,[{key:"checkEmpty",value:function(e){return Ag.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new $b(i,t,n,r);this.mutationQueue.push(a);var o,s=_(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.gs=this.gs.add(new fw(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return Ag.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Ag.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return Ag.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Ag.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return Ag.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new fw(t,0),i=new fw(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),Ag.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Mk(pg);return t.forEach((function(e){var t=new fw(e,0),i=new fw(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),Ag.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;wg.isDocumentKey(i)||(i=i.child(""));var a=new fw(new wg(i),0),o=new Mk(pg);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),Ag.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Zy(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return Ag.forEach(t.mutations,(function(i){var a=new fw(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new fw(t,0),r=this.gs.firstAfterOrEqual(n);return Ag.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Ag.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),pw=function(){function e(t){b(this,e),this.Es=t,this.docs=new Dk(wg.comparator),this.size=0}return S(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Ag.resolve(n?n.document.mutableCopy():qk.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=$_();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():qk.newInvalidDocument(e))})),Ag.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=$_(),i=new wg(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||Tg(Eg(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return Ag.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Jy()}},{key:"As",value:function(e,t){return Ag.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new vw(this)}},{key:"getSize",value:function(e){return Ag.resolve(this.size)}}]),e}(),vw=function(e){m(n,e);var t=k(n);function n(e){var r;return b(this,n),(r=t.call(this)).Yn=e,r}return S(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),Ag.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(ow),mw=function(){function e(t){b(this,e),this.persistence=t,this.Rs=new G_((function(e){return Wk(e)}),Kk),this.lastRemoteSnapshotVersion=yg.min(),this.highestTargetId=0,this.bs=0,this.Ps=new hw,this.targetCount=0,this.vs=aw.Pn()}return S(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),Ag.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Ag.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Ag.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),Ag.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),Ag.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new aw(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,Ag.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),Ag.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Ag.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Ag.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Ag.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return Ag.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),Ag.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Ag.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),Ag.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return Ag.resolve(n)}},{key:"containsKey",value:function(e,t){return Ag.resolve(this.Ps.containsKey(t))}}]),e}(),yw=function(){function e(t,n){var r=this;b(this,e),this.Vs={},this.overlays={},this.Ss=new Dg(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new mw(this),this.indexManager=new nw,this.remoteDocumentCache=new pw((function(e){return r.referenceDelegate.xs(e)})),this.yt=new Zb(n),this.Ns=new cw(this.yt)}return S(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new lw,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new dw(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Qy("MemoryPersistence","Starting transaction:",e);var i=new gw(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ms",value:function(e,t){return Ag.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),gw=function(e){m(n,e);var t=k(n);function n(e){var r;return b(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return S(n)}(Ng),kw=function(){function e(t){b(this,e),this.persistence=t,this.Fs=new hw,this.$s=null}return S(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw Jy()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),Ag.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),Ag.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),Ag.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ag.forEach(this.Ls,(function(r){var i=wg.fromPath(r);return t.qs(e,i).next((function(e){e||n.removeEntry(i,yg.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.qs(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"qs",value:function(e,t){var n=this;return Ag.or([function(){return Ag.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}();var _w=function(){function e(t,n,r,i){b(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return S(e,null,[{key:"Ci",value:function(t,n){var r,i=ib(),a=ib(),o=_(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),bw=function(){function e(){b(this,e),this.xi=!1}return S(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Mi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(Xk(t))return Ag.resolve(null);var r=n_(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=r_(t,null,"F"),r=n_(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=ib.apply(void 0,E(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,r_(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return Xk(t)||r.isEqual(yg.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(Gy()<=Ce.DEBUG&&Qy("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),o_(t)),i.Bi(e,o,t,Sg(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new Mk(c_(e));return t.forEach((function(t,r){s_(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return Gy()<=Ce.DEBUG&&Qy("QueryEngine","Using full collection scan to execute query:",o_(t)),this.Ni.getDocumentsMatchingQuery(e,t,Cg.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),ww=function(){function e(t,n,r,i){b(this,e),this.persistence=t,this.Li=n,this.yt=i,this.qi=new Dk(pg),this.Ui=new G_((function(e){return Wk(e)}),Kk),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return S(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uw(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qi)}))}}]),e}();function xw(e,t,n,r){return new ww(e,t,n,r)}function Sw(e,t){return Ew.apply(this,arguments)}function Ew(){return Ew=s(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eg(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=ib(),u=_(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,h=_(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;s=s.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=_(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=_(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;s=s.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Ew.apply(this,arguments)}function Cw(e,t){var n=eg(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Ag.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Zy(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=ib(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Tw(e){var t=eg(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function Iw(e,t){var n=eg(e),r=t.snapshotVersion,i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(Bg.EMPTY_BYTE_STRING,yg.min()).withLastLimboFreeSnapshotVersion(yg.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var s=$_(),u=ib();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Nw(e,a,t.documentUpdates).next((function(e){s=e.Wi,u=e.zi}))),!r.isEqual(yg.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Ag.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.qi=i,e}))}function Nw(e,t,n){var r=ib(),i=ib();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=$_();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(yg.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Qy("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function Rw(e,t){var n=eg(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Pw(e,t){var n=eg(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,Ag.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new Jb(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qi=n.qi.insert(e.targetId,e),n.Ui.set(t,e.targetId)),e}))}function Aw(e,t,n){return Ow.apply(this,arguments)}function Ow(){return Ow=s(a().mark((function e(t,n,r){var i,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=eg(t),o=i.qi.get(n),s=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",s,(function(e){return i.persistence.referenceDelegate.removeTarget(e,o)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Og(e.t1)){e.next=12;break}throw e.t1;case 12:Qy("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qi=i.qi.remove(n),i.Ui.delete(o.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Ow.apply(this,arguments)}function Dw(e,t,n){var r=eg(e),i=yg.min(),a=ib();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=eg(e),i=r.Ui.get(n);return void 0!==i?Ag.resolve(r.qi.get(i)):r.Cs.getTargetData(t,n)}(r,e,n_(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:yg.min(),n?a:ib())})).next((function(e){return Lw(r,u_(t),e),{documents:e,Hi:a}}))}))}function Lw(e,t,n){var r=e.Ki.get(t)||yg.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}var jw=function(){function e(){b(this,e),this.activeTargetIds=ob()}return S(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Mw=function(){function e(){b(this,e),this.Lr=new jw,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return S(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new jw,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Fw=function(){function e(){b(this,e)}return S(e,[{key:"Ur",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Uw=function(){function e(){var t=this;b(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return S(e,[{key:"Ur",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){Qy("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=_(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){Qy("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=_(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Vw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},zw=function(){function e(t){b(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return S(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),qw=function(e){m(n,e);var t=k(n);function n(e){var r;return b(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return S(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new qy;o.setWithCredentials(!0),o.listenOnce(My.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case jy.NO_ERROR:var t=o.getResponseJson();Qy("Connection","XHR received:",JSON.stringify(t)),i(t);break;case jy.TIMEOUT:Qy("Connection",'RPC "'+e+'" timed out'),a(new ng(tg.DEADLINE_EXCEEDED,"Request time out"));break;case jy.HTTP_ERROR:var n=o.getStatus();if(Qy("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(tg).indexOf(t)>=0?t:tg.UNKNOWN}(s.status);a(new ng(u,s.message))}else a(new ng(tg.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new ng(tg.UNAVAILABLE,"Connection failed."));break;default:Jy()}}finally{Qy("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Dy(),a=Ly(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Vy({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var s=r.join("");Qy("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,h=new zw({Hr:function(e){l?Qy("Connection","Not sending because WebChannel is closed:",e):(c||(Qy("Connection","Opening WebChannel transport."),u.open(),c=!0),Qy("Connection","WebChannel sending:",e),u.send(e))},Jr:function(){return u.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,zy.EventType.OPEN,(function(){l||Qy("Connection","WebChannel transport opened.")})),f(u,zy.EventType.CLOSE,(function(){l||(l=!0,Qy("Connection","WebChannel transport closed"),h.io())})),f(u,zy.EventType.ERROR,(function(e){l||(l=!0,Yy("Connection","WebChannel transport errored:",e),h.io(new ng(tg.UNAVAILABLE,"The operation could not be completed")))})),f(u,zy.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Zy(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Qy("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=V_[e];if(void 0!==t)return K_(t)}(a),s=i.message;void 0===o&&(o=tg.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),l=!0,h.io(new ng(o,s)),u.close()}else Qy("Connection","WebChannel received:",n),h.ro(n)}})),f(a,Fy.STAT_EVENT,(function(e){e.stat===Uy.PROXY?Qy("Connection","Detected buffering proxy"):e.stat===Uy.NOPROXY&&Qy("Connection","Detected no buffering proxy")})),setTimeout((function(){h.so()}),0),h}}]),n}(function(){function e(t){b(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return S(e,[{key:"co",get:function(){return!1}},{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);Qy("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return Qy("RestConnection","Received: ",e),e}),(function(t){throw Yy("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=Vw[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function Bw(){return"undefined"!=typeof document?document:null}function Hw(e){return new kb(e,!0)}var Ww=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;b(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return S(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&Qy("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),Kw=function(){function e(t,n,r,i,a,o,s,u){b(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Ww(t,n)}return S(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"qo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=s(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.qo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===tg.RESOURCE_EXHAUSTED?($y(n.toString()),$y("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===tg.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Uo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.So===n&&e.Go(i,a)}),(function(n){t((function(){var t=new ng(tg.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.xo.Ro(s(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return Qy("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(Qy("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Gw=function(e){m(n,e);var t=k(n);function n(e,r,i,a,o,s){var u;return b(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).yt=o,u}return S(n,[{key:"jo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Jy()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.wt?(Zy(void 0===t||"string"==typeof t),Bg.fromBase64String(t||"")):(Zy(void 0===t||t instanceof Uint8Array),Bg.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?tg.UNKNOWN:K_(e.code);return new ng(t,e.message||"")}(o);n=new hb(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=Tb(e,u.document.name),l=xb(u.document.updateTime),h=u.document.createTime?xb(u.document.createTime):yg.min(),f=new Vk({mapValue:{fields:u.document.fields}}),d=qk.newFoundDocument(c,l,h,f),p=u.targetIds||[],v=u.removedTargetIds||[];n=new cb(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=Tb(e,m.document),g=m.readTime?xb(m.readTime):yg.min(),k=qk.newNoDocument(y,g),_=m.removedTargetIds||[];n=new cb([],_,k.key,k)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=Tb(e,b.document),x=b.removedTargetIds||[];n=new cb([],x,w,null)}else{if(!("filter"in t))return Jy();t.filter;var S=t.filter;S.targetId;var E=S.count||0,C=new H_(E),T=S.targetId;n=new lb(T,C)}return n}(this.yt,e),n=function(e){if(!("targetChange"in e))return yg.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?yg.min():t.readTime?xb(t.readTime):yg.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=Rb(this.yt),t.addTarget=function(e,t){var n,r=t.target;return(n=Gk(r)?{documents:Db(e,r)}:{query:Lb(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=bb(e,t.resumeToken):t.snapshotVersion.compareTo(yg.min())>0&&(n.readTime=_b(e,t.snapshotVersion.toTimestamp())),n}(this.yt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Jy()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.yt,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=Rb(this.yt),t.removeTarget=e,this.Bo(t)}}]),n}(Kw),Qw=function(e){m(n,e);var t=k(n);function n(e,r,i,a,o,s){var u;return b(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).yt=o,u.Jo=!1,u}return S(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,d(h(n.prototype),"start",this).call(this)}},{key:"Uo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Zy(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(Zy(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?xb(e.updateTime):xb(t);return n.isEqual(yg.min())&&(n=xb(t)),new C_(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=xb(e.commitTime);return this.listener.Zo(n,t)}return Zy(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=Rb(this.yt),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Ob(t.yt,e)}))};this.Bo(n)}}]),n}(Kw),$w=function(e){m(n,e);var t=k(n);function n(e,r,i,a){var o;return b(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.yt=a,o.nu=!1,o}return S(n,[{key:"su",value:function(){if(this.nu)throw new ng(tg.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],s=a[1];return r.connection.ao(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===tg.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new ng(tg.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=l(a,2),s=o[0],u=o[1];return i.connection._o(e,t,n,s,u,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===tg.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new ng(tg.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return S((function e(){b(this,e)}))}());var Yw=function(){function e(t,n){b(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return S(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?($y(t),this.ou=!1):Qy("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),Xw=S((function e(t,n,r,i,o){var u=this;b(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=o,this.mu.Ur((function(e){r.enqueueAndForget(s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=ux(u),!e.t0){e.next=5;break}return Qy("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=s(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=eg(t))._u.add(4),e.next=4,ex(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,Jw(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(u);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new Yw(r,i)}));function Jw(e){return Zw.apply(this,arguments)}function Zw(){return Zw=s(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ux(t)){e.next=18;break}n=_(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Zw.apply(this,arguments)}function ex(e){return tx.apply(this,arguments)}function tx(){return tx=s(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),tx.apply(this,arguments)}function nx(e,t){var n=eg(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),sx(n)?ox(n):Mx(n).ko()&&ix(n,t))}function rx(e,t){var n=eg(e),r=Mx(n);n.du.delete(t),r.ko()&&ax(n,t),0===n.du.size&&(r.ko()?r.Fo():ux(n)&&n.gu.set("Unknown"))}function ix(e,t){e.yu.Ot(t.targetId),Mx(e).zo(t)}function ax(e,t){e.yu.Ot(t),Mx(e).Ho(t)}function ox(e){e.yu=new db({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.du.get(t)||null}}),Mx(e).start(),e.gu.uu()}function sx(e){return ux(e)&&!Mx(e).No()&&e.du.size>0}function ux(e){return 0===eg(e)._u.size}function cx(e){e.yu=void 0}function lx(e){return hx.apply(this,arguments)}function hx(){return hx=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){ix(t,e)}));case 1:case"end":return e.stop()}}),e)}))),hx.apply(this,arguments)}function fx(e,t){return dx.apply(this,arguments)}function dx(){return dx=s(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cx(t),sx(t)?(t.gu.hu(n),ox(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),dx.apply(this,arguments)}function px(e,t,n){return vx.apply(this,arguments)}function vx(){return vx=s(a().mark((function e(t,n,r){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof hb&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=s(a().mark((function e(t,n){var r,i,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=_(n.targetIds),e.prev=2,i.s();case 4:if((o=i.n()).done){e.next=14;break}if(s=o.value,e.t0=t.du.has(s),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(s,r);case 10:t.du.delete(s),t.yu.removeTarget(s);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Qy("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,mx(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof cb?t.yu.Kt(n):n instanceof lb?t.yu.Jt(n):t.yu.jt(n),r.isEqual(yg.min())){e.next=29;break}return e.prev=14,e.next=17,Tw(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.Zt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(Bg.EMPTY_BYTE_STRING,n.snapshotVersion)),ax(e,t);var r=new Jb(n.target,t,1,n.sequenceNumber);ix(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Qy("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,mx(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),vx.apply(this,arguments)}function mx(e,t,n){return yx.apply(this,arguments)}function yx(){return yx=s(a().mark((function e(t,n,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Og(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,ex(t);case 5:t.gu.set("Offline"),r||(r=function(){return Tw(t.localStore)}),t.asyncQueue.enqueueRetryable(s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qy("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,Jw(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),yx.apply(this,arguments)}function gx(e,t){return t().catch((function(n){return mx(e,n,t)}))}function kx(e){return _x.apply(this,arguments)}function _x(){return _x=s(a().mark((function e(t){var n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=eg(t),r=Fx(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!bx(n)){e.next=19;break}return e.prev=3,e.next=6,Rw(n.localStore,i);case 6:if(null!==(o=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=o.batchId,wx(n,o),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,mx(n,e.t0);case 17:e.next=2;break;case 19:xx(n)&&Sx(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),_x.apply(this,arguments)}function bx(e){return ux(e)&&e.fu.length<10}function wx(e,t){e.fu.push(t);var n=Fx(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function xx(e){return ux(e)&&!Fx(e).No()&&e.fu.length>0}function Sx(e){Fx(e).start()}function Ex(e){return Cx.apply(this,arguments)}function Cx(){return Cx=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Fx(t).eu();case 1:case"end":return e.stop()}}),e)}))),Cx.apply(this,arguments)}function Tx(e){return Ix.apply(this,arguments)}function Ix(){return Ix=s(a().mark((function e(t){var n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Fx(t),r=_(t.fu);try{for(r.s();!(i=r.n()).done;)o=i.value,n.Xo(o.mutations)}catch(a){r.e(a)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Ix.apply(this,arguments)}function Nx(e,t,n){return Rx.apply(this,arguments)}function Rx(){return Rx=s(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),o=Yb.from(i,n,r),e.next=3,gx(t,(function(){return t.remoteSyncer.applySuccessfulWrite(o)}));case 3:return e.next=5,kx(t);case 5:case"end":return e.stop()}}),e)}))),Rx.apply(this,arguments)}function Px(e,t){return Ax.apply(this,arguments)}function Ax(){return Ax=s(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Fx(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=s(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W_(i=n.code)||i===tg.ABORTED){e.next=7;break}return r=t.fu.shift(),Fx(t).Mo(),e.next=5,gx(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,kx(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:xx(t)&&Sx(t);case 5:case"end":return e.stop()}}),e)}))),Ax.apply(this,arguments)}function Ox(e,t){return Dx.apply(this,arguments)}function Dx(){return Dx=s(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=eg(t)).asyncQueue.verifyOperationInProgress(),Qy("RemoteStore","RemoteStore received new credentials"),i=ux(r),r._u.add(3),e.next=6,ex(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,Jw(r);case 12:case"end":return e.stop()}}),e)}))),Dx.apply(this,arguments)}function Lx(e,t){return jx.apply(this,arguments)}function jx(){return jx=s(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eg(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,Jw(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,ex(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),jx.apply(this,arguments)}function Mx(e){return e.pu||(e.pu=function(e,t,n){var r=eg(e);return r.su(),new Gw(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:lx.bind(null,e),Zr:fx.bind(null,e),Wo:px.bind(null,e)}),e.wu.push(function(){var t=s(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Mo(),sx(e)?ox(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:cx(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function Fx(e){return e.Iu||(e.Iu=function(e,t,n){var r=eg(e);return r.su(),new Qw(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:Ex.bind(null,e),Zr:Px.bind(null,e),tu:Tx.bind(null,e),Zo:Nx.bind(null,e)}),e.wu.push(function(){var t=s(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Mo(),t.next=4,kx(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(Qy("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var Ux=function(){function e(t,n,r,i,a){b(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new rg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return S(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ng(tg.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Vx(e,t){if($y("AsyncQueue","".concat(t,": ").concat(e)),Og(e))return new ng(tg.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var zx=function(){function e(t){b(this,e),this.comparator=t?function(e,n){return t(e,n)||wg.comparator(e.key,n.key)}:function(e,t){return wg.comparator(e.key,t.key)},this.keyedMap=X_(),this.sortedSet=new Dk(this.comparator)}return S(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),qx=function(){function e(){b(this,e),this.Tu=new Dk(wg.comparator)}return S(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Jy():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Bx=function(){function e(t,n,r,i,a,o,s,u,c){b(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=c}return S(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&i_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,zx.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Hx=S((function e(){b(this,e),this.Au=void 0,this.listeners=[]})),Wx=S((function e(){b(this,e),this.queries=new G_((function(e){return a_(e)}),i_),this.onlineState="Unknown",this.Ru=new Set}));function Kx(e,t){return Gx.apply(this,arguments)}function Gx(){return Gx=s(a().mark((function e(t,n){var r,i,o,s,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eg(t),i=n.query,o=!1,(s=r.queries.get(i))||(o=!0,s=new Hx),!o){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:s.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Vx(e.t0,"Initialization of query '".concat(o_(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,s),s.listeners.push(n),n.bu(r.onlineState),s.Au&&n.Pu(s.Au)&&Jx(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Gx.apply(this,arguments)}function Qx(e,t){return $x.apply(this,arguments)}function $x(){return $x=s(a().mark((function e(t,n){var r,i,o,s,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eg(t),i=n.query,o=!1,(s=r.queries.get(i))&&(u=s.listeners.indexOf(n))>=0&&(s.listeners.splice(u,1),o=0===s.listeners.length),!o){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),$x.apply(this,arguments)}function Yx(e,t){var n,r=eg(e),i=!1,a=_(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=_(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Pu(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}u.Au=o}}}catch(h){a.e(h)}finally{a.f()}i&&Jx(r)}function Xx(e,t,n){var r=eg(e),i=r.queries.get(t);if(i){var a,o=_(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function Jx(e){e.Ru.forEach((function(e){e.next()}))}var Zx=function(){function e(t,n,r){b(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return S(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=_(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Bx(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=Bx.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}]),e}();var eS=S((function e(t){b(this,e),this.key=t})),tS=S((function e(t){b(this,e),this.key=t})),nS=function(){function e(t,n){b(this,e),this.query=t,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=ib(),this.mutatedKeys=ib(),this.Gu=c_(t),this.Qu=new zx(this.Gu)}return S(e,[{key:"ju",get:function(){return this.qu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new qx,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=s_(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Hu(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.Gu(h,u)>0||c&&n.Gu(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:s,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Jy()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],s=0===this.Ku.size&&this.current?1:0,u=s!==this.Uu;return this.Uu=s,0!==a.length||u?{snapshot:new Bx(this.query,e.Qu,i,a,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new qx,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.qu=t.qu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.qu=t.qu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=ib(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new tS(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new eS(e))})),n}},{key:"tc",value:function(e){this.qu=e.Hi,this.Ku=ib();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return Bx.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}]),e}(),rS=S((function e(t,n,r){b(this,e),this.query=t,this.targetId=n,this.view=r})),iS=S((function e(t){b(this,e),this.key=t,this.nc=!1})),aS=function(){function e(t,n,r,i,a,o){b(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new G_((function(e){return a_(e)}),i_),this.rc=new Map,this.oc=new Set,this.uc=new Dk(wg.comparator),this.cc=new Map,this.ac=new hw,this.hc={},this.lc=new Map,this.fc=aw.vn(),this.onlineState="Unknown",this.dc=void 0}return S(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function oS(e,t){return sS.apply(this,arguments)}function sS(){return sS=s(a().mark((function e(t,n){var r,i,o,s,u,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=LS(t),!(s=r.ic.get(n))){e.next=6;break}i=s.targetId,r.sharedClientState.addLocalQueryTarget(i),o=s.view.ec(),e.next=15;break;case 6:return e.next=8,Pw(r.localStore,n_(n));case 8:return u=e.sent,r.isPrimaryClient&&nx(r.remoteStore,u),c=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,uS(r,n,i,"current"===c,u.resumeToken);case 14:o=e.sent;case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)}))),sS.apply(this,arguments)}function uS(e,t,n,r,i){return cS.apply(this,arguments)}function cS(){return cS=s(a().mark((function e(t,n,r,i,o){var u,c,l,h,f,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=s(a().mark((function e(t,n,r,i){var o,s,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.view.Wu(r),e.t0=o.$i,!e.t0){e.next=6;break}return e.next=5,Dw(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,o)}));case 5:o=e.sent;case 6:return s=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(o,t.isPrimaryClient,s),e.abrupt("return",(TS(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Dw(t.localStore,n,!0);case 3:return u=e.sent,c=new nS(n,u.Hi),l=c.Wu(u.documents),h=ub.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,o),f=c.applyChanges(l,t.isPrimaryClient,h),TS(t,r,f.Xu),d=new rS(n,r,c),e.abrupt("return",(t.ic.set(n,d),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),f.snapshot));case 11:case"end":return e.stop()}}),e)}))),cS.apply(this,arguments)}function lS(e,t){return hS.apply(this,arguments)}function hS(){return hS=s(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eg(t),i=r.ic.get(n),!((o=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,o.filter((function(e){return!i_(e,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Aw(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),rx(r.remoteStore,i.targetId),ES(r,i.targetId)})).catch(Rg);case 9:e.next=14;break;case 11:return ES(r,i.targetId),e.next=14,Aw(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),hS.apply(this,arguments)}function fS(e,t,n){return dS.apply(this,arguments)}function dS(){return dS=s(a().mark((function e(t,n,r){var i,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jS(t),e.prev=1,e.next=4,function(e,t){var n,r,i=eg(e),a=mg.now(),o=t.reduce((function(e,t){return e.add(t.key)}),ib());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=$_(),u=ib();return i.Gi.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=_(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=O_(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new j_(c.key,l,zk(l.value.mapValue),T_.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:J_(n)}}))}(i.localStore,n);case 4:return o=e.sent,i.sharedClientState.addPendingMutation(o.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new Dk(pg)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,o.batchId,r),e.next=9,RS(i,o.changes);case 9:return e.next=11,kx(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),s=Vx(e.t0,"Failed to persist write"),r.reject(s);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),dS.apply(this,arguments)}function pS(e,t){return vS.apply(this,arguments)}function vS(){return vS=s(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eg(t),e.prev=1,e.next=4,Iw(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.cc.get(t);n&&(Zy(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?Zy(n.nc):e.removedDocuments.size>0&&(Zy(n.nc),n.nc=!1))})),e.next=8,RS(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Rg(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),vS.apply(this,arguments)}function mS(e,t,n){var r=eg(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=eg(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=_(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Jx(n)}(r.eventManager,t),i.length&&r.sc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function yS(e,t,n){return gS.apply(this,arguments)}function gS(){return gS=s(a().mark((function e(t,n,r){var i,o,s,u,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=eg(t)).sharedClientState.updateQueryState(n,"rejected",r),o=i.cc.get(n),!(s=o&&o.key)){e.next=14;break}return u=(u=new Dk(wg.comparator)).insert(s,qk.newNoDocument(s,yg.min())),c=ib().add(s),l=new sb(yg.min(),new Map,new Mk(pg),u,c),e.next=9,pS(i,l);case 9:i.uc=i.uc.remove(s),i.cc.delete(n),NS(i),e.next=16;break;case 14:return e.next=16,Aw(i.localStore,n,!1).then((function(){return ES(i,n,r)})).catch(Rg);case 16:case"end":return e.stop()}}),e)}))),gS.apply(this,arguments)}function kS(e,t){return _S.apply(this,arguments)}function _S(){return _S=s(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eg(t),i=n.batch.batchId,e.prev=1,e.next=4,Cw(r.localStore,n);case 4:return o=e.sent,SS(r,i,null),xS(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,RS(r,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Rg(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),_S.apply(this,arguments)}function bS(e,t,n){return wS.apply(this,arguments)}function wS(){return wS=s(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=eg(t),e.prev=1,e.next=4,function(e,t){var n=eg(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Zy(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return o=e.sent,SS(i,n,r),xS(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,RS(i,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Rg(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),wS.apply(this,arguments)}function xS(e,t){(e.lc.get(t)||[]).forEach((function(e){e.resolve()})),e.lc.delete(t)}function SS(e,t,n){var r=eg(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function ES(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=_(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((function(t){e.ac.containsKey(t)||CS(e,t)}))}function CS(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(rx(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),NS(e))}function TS(e,t,n){var r,i=_(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof eS?(e.ac.addReference(a.key,t),IS(e,a)):a instanceof tS?(Qy("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||CS(e,a.key)):Jy()}}catch(o){i.e(o)}finally{i.f()}}function IS(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(Qy("SyncEngine","New document in limbo: "+n),e.oc.add(r),NS(e))}function NS(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new wg(kg.fromString(t)),r=e.fc.next();e.cc.set(r,new iS(n)),e.uc=e.uc.insert(n,r),nx(e.remoteStore,new Jb(n_(Yk(n.path)),r,2,Dg.at))}}function RS(e,t,n){return PS.apply(this,arguments)}function PS(){return PS=s(a().mark((function e(t,n,r){var i,o,u,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=eg(t),o=[],u=[],c=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach((function(e,t){c.push(i._c(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){o.push(e);var n=_w.Ci(t.targetId,e);u.push(n)}})))})),e.next=6,Promise.all(c);case 6:return i.sc.Wo(o),e.next=9,function(){var e=s(a().mark((function e(t,n){var r,i,o,s,u,c,l,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eg(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Ag.forEach(n,(function(t){return Ag.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Ag.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Og(e.t0)){e.next=10;break}throw e.t0;case 10:Qy("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=_(n);try{for(i.s();!(o=i.n()).done;)s=o.value,u=s.targetId,s.fromCache||(c=r.qi.get(u),l=c.snapshotVersion,h=c.withLastLimboFreeSnapshotVersion(l),r.qi=r.qi.insert(u,h))}catch(a){i.e(a)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,u);case 9:case"end":return e.stop()}}),e)}))),PS.apply(this,arguments)}function AS(e,t){return OS.apply(this,arguments)}function OS(){return OS=s(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=eg(t)).currentUser.isEqual(n)){e.next=11;break}return Qy("SyncEngine","User change. New user:",n.toKey()),e.next=5,Sw(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach((function(e){e.forEach((function(e){e.reject(new ng(tg.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,RS(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),OS.apply(this,arguments)}function DS(e,t){var n=eg(e),r=n.cc.get(t);if(r&&r.nc)return ib().add(r.key);var i=ib(),a=n.rc.get(t);if(!a)return i;var o,s=_(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.ic.get(u);i=i.unionWith(c.view.ju)}}catch(l){s.e(l)}finally{s.f()}return i}function LS(e){var t=eg(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=pS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=DS.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=yS.bind(null,t),t.sc.Wo=Yx.bind(null,t.eventManager),t.sc.wc=Xx.bind(null,t.eventManager),t}function jS(e){var t=eg(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=kS.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bS.bind(null,t),t}var MS=function(){function e(){b(this,e),this.synchronizeTabs=!1}return S(e,[{key:"initialize",value:function(){var e=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yt=Hw(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return xw(this.persistence,new bw,e.initialUser,this.yt)}},{key:"yc",value:function(e){return new yw(kw.Bs,this.yt)}},{key:"gc",value:function(e){return new Mw}},{key:"terminate",value:function(){var e=s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),FS=function(){function e(){b(this,e)}return S(e,[{key:"initialize",value:function(){var e=s(a().mark((function e(t,n){var r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return mS(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=AS.bind(null,this.syncEngine),e.next=12,Lx(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Wx}},{key:"createDatastore",value:function(e){var t,n=Hw(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new qw(t));return function(e,t,n,r){return new $w(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return mS(o.syncEngine,e,0)},a=Uw.C()?new Uw:new Fw,new Xw(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new aS(e,t,n,r,i,a);return o&&(s.dc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=s(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=eg(t),Qy("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,ex(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function US(e,t,n){if(!n)throw new ng(tg.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function VS(e){if(!wg.isDocumentKey(e))throw new ng(tg.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function zS(e){if(wg.isDocumentKey(e))throw new ng(tg.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function qS(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Jy()}function BS(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ng(tg.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=qS(e);throw new ng(tg.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}var HS=new Map,WS=function(){function e(t){var n;if(b(this,e),void 0===t.host){if(void 0!==t.ssl)throw new ng(tg.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ng(tg.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new ng(tg.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return S(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),KS=function(){function e(t,n,r,i){b(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WS({}),this._settingsFrozen=!1}return S(e,[{key:"app",get:function(){if(!this._app)throw new ng(tg.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new ng(tg.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WS(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ag;switch(e.type){case"gapi":var t=e.client;return new cg(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ng(tg.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=HS.get(e);t&&(Qy("ComponentProvider","Removing Datastore"),HS.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function GS(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=BS(e,KS))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Yy("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=Hy.MOCK_USER;else{o=Z(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new ng(tg.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Hy(u)}e._authCredentials=new og(new ig(o,s))}}var QS=function(){function e(t,n,r){b(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return S(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new YS(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),$S=function(){function e(t,n,r){b(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return S(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),YS=function(e){m(n,e);var t=k(n);function n(e,r,i){var a;return b(this,n),(a=t.call(this,e,r,Yk(i)))._path=i,a.type="collection",a}return S(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new QS(this.firestore,null,new wg(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}($S);function XS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=be(e),1===arguments.length&&(t=dg.R()),US("doc","path",t),e instanceof KS){var a=kg.fromString.apply(kg,[t].concat(r));return VS(a),new QS(e,null,new wg(a))}if(!(e instanceof QS||e instanceof YS))throw new ng(tg.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(kg.fromString.apply(kg,[t].concat(r)));return VS(o),new QS(e.firestore,e instanceof YS?e.converter:null,new wg(o))}var JS=function(){function e(t){b(this,e),this.observer=t,this.muted=!1}return S(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):$y("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),ZS=function(){function e(t,n,r,i){var o=this;b(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Hy.UNAUTHENTICATED,this.clientId=dg.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qy("FirestoreClient","Received user=",t.uid),e.next=3,o.authCredentialListener(t);case 3:o.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Qy("FirestoreClient","Received new app check token=",e),o.appCheckCredentialListener(e,o.user)}))}return S(e,[{key:"getConfiguration",value:function(){var e=s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new ng(tg.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new rg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(s(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Vx(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function eE(e,t){return tE.apply(this,arguments)}function tE(){return tE=s(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Qy("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Sw(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),tE.apply(this,arguments)}function nE(e,t){return rE.apply(this,arguments)}function rE(){return rE=s(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,iE(t);case 3:return r=e.sent,Qy("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Ox(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Ox(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),rE.apply(this,arguments)}function iE(e){return aE.apply(this,arguments)}function aE(){return aE=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Qy("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,eE(t,new MS);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),aE.apply(this,arguments)}function oE(e){return sE.apply(this,arguments)}function sE(){return sE=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Qy("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,nE(t,new FS);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),sE.apply(this,arguments)}function uE(e){return oE(e).then((function(e){return e.syncEngine}))}function cE(e){return lE.apply(this,arguments)}function lE(){return lE=s(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oE(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=oS.bind(null,n.syncEngine),r.onUnlisten=lS.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),lE.apply(this,arguments)}function hE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new rg;return e.asyncQueue.enqueueAndForget(s(a().mark((function i(){return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new JS({next:function(n){t.enqueueAndForget((function(){return Qx(e,o)})),n.fromCache&&"server"===r.source?i.reject(new ng(tg.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Zx(n,a,{includeMetadataChanges:!0,Nu:!0});return Kx(e,o)},i.next=3,cE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var fE=function(){function e(){var t=this;b(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Ww(this,"async_queue_retry"),this.Wc=function(){var e=Bw();e&&Qy("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.Po()};var n=Bw();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return S(e,[{key:"isShuttingDown",get:function(){return this.qc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;var t=Bw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.qc)return new Promise((function(){}));var n=new rg;return this.Hc((function(){return t.qc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Lc.push(e),t.Jc()}))}},{key:"Jc",value:function(){var e=s(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Og(e.t0)){e.next=12;break}throw e.t0;case 12:Qy("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.xo.Ro((function(){return t.Jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then((function(){return t.Gc=!0,e().catch((function(e){t.Kc=e,t.Gc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw $y("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Gc=!1,e}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=Ux.createAndSchedule(this,e,t,n,(function(e){return r.Yc(e)}));return this.Uc.push(i),i}},{key:"zc",value:function(){this.Kc&&Jy()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=s(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=_(this.Uc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then((function(){t.Uc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=_(t.Uc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()}))}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}]),e}();var dE=function(e){m(n,e);var t=k(n);function n(e,r,i,a){var o;return b(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new fE,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return S(n,[{key:"_terminate",value:function(){return this._firestoreClient||vE(this),this._firestoreClient.terminate()}}]),n}(KS);function pE(e){return e._firestoreClient||vE(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function vE(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Lg(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new ZS(e._authCredentials,e._appCheckCredentials,e._queue,r)}var mE=function(){function e(t){b(this,e),this._byteString=t}return S(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Bg.fromBase64String(t))}catch(t){throw new ng(tg.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Bg.fromUint8Array(t))}}]),e}(),yE=function(){function e(){b(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new ng(tg.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bg(n)}return S(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var gE=S((function e(t){b(this,e),this._methodName=t})),kE=function(){function e(t,n){if(b(this,e),!isFinite(t)||t<-90||t>90)throw new ng(tg.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ng(tg.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return S(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return pg(this._lat,e._lat)||pg(this._long,e._long)}}]),e}(),_E=/^__.*__$/,bE=function(){function e(t,n,r){b(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return S(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new j_(e,this.data,this.fieldMask,t,this.fieldTransforms):new L_(e,this.data,t,this.fieldTransforms)}}]),e}();function wE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Jy()}}var xE=function(){function e(t,n,r,i,a,o){b(this,e),this.settings=t,this.databaseId=n,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return S(e,[{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}},{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return DE(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(wE(this.sa)&&_E.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}]),e}(),SE=function(){function e(t,n,r){b(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.yt=r||Hw(t)}return S(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new xE({sa:e,methodName:t,fa:n,path:bg.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}]),e}();function EE(e){var t=e._freezeSettings(),n=Hw(e._databaseId);return new SE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function CE(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);RE("Data must be an object, but it was:",o,r);var s,u,c=IE(r,o);if(a.merge)s=new Uk(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=_(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=PE(t,d,n);if(!o.contains(p))throw new ng(tg.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));LE(h,p)||h.push(p)}}catch(v){f.e(v)}finally{f.f()}s=new Uk(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new bE(new Vk(c),s,u)}function TE(e,t){if(NE(e=be(e)))return RE("Unsupported field value:",t,e),IE(e,t);if(e instanceof gE)return function(e,t){if(!wE(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=_(e);try{for(a.s();!(n=a.n()).done;){var o=TE(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=be(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return d_(t.yt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=mg.fromDate(e);return{timestampValue:_b(t.yt,n)}}if(e instanceof mg){var r=new mg(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:_b(t.yt,r)}}if(e instanceof kE)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof mE)return{bytesValue:bb(t.yt,e._byteString)};if(e instanceof QS){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Sb(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(qS(e)))}(e,t)}function IE(e,t){var n={};return Ug(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fg(e,(function(e,r){var i=TE(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function NE(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof mg||e instanceof kE||e instanceof mE||e instanceof QS||e instanceof gE)}function RE(e,t,n){if(!NE(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=qS(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function PE(e,t,n){if((t=be(t))instanceof yE)return t._internalPath;if("string"==typeof t)return OE(e,t);throw DE("Field path arguments must be of type string or ",e,!1,void 0,n)}var AE=new RegExp("[~\\*/\\[\\]]");function OE(e,t,n){if(t.search(AE)>=0)throw DE("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return T(yE,E(t.split(".")))._internalPath}catch(r){throw DE("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function DE(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new ng(tg.INVALID_ARGUMENT,s+e+u)}function LE(e,t){return e.some((function(e){return e.isEqual(t)}))}var jE=function(){function e(t,n,r,i,a){b(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return S(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new QS(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new ME(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(FE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),ME=function(e){m(n,e);var t=k(n);function n(){return b(this,n),t.apply(this,arguments)}return S(n,[{key:"data",value:function(){return d(h(n.prototype),"data",this).call(this)}}]),n}(jE);function FE(e,t){return"string"==typeof t?OE(e,t):t instanceof yE?t._internalPath:t._delegate._internalPath}function UE(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ng(tg.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var VE=function(){function e(){b(this,e)}return S(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Jg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kg(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Jy()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Fg(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new kE(Kg(e.latitude),Kg(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=$g(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Yg(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Wg(e);return new mg(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=kg.fromString(e);Zy(Wb(n));var r=new jg(n.get(1),n.get(3)),i=new wg(n.popFirst(5));return r.isEqual(t)||$y("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function zE(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var qE=function(){function e(t,n){b(this,e),this.hasPendingWrites=t,this.fromCache=n}return S(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),BE=function(e){m(n,e);var t=k(n);function n(e,r,i,a,o,s){var u;return b(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return S(n,[{key:"exists",value:function(){return d(h(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new HE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(FE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(jE),HE=function(e){m(n,e);var t=k(n);function n(){return b(this,n),t.apply(this,arguments)}return S(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d(h(n.prototype),"data",this).call(this,e)}}]),n}(BE),WE=function(){function e(t,n,r,i){b(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new qE(i.hasPendingWrites,i.fromCache),this.query=r}return S(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new HE(n._firestore,n._userDataWriter,r.key,r,new qE(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ng(tg.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new HE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new qE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new HE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new qE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:KE(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function KE(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Jy()}}var GE=function(e){m(n,e);var t=k(n);function n(e){var r;return b(this,n),(r=t.call(this)).firestore=e,r}return S(n,[{key:"convertBytes",value:function(e){return new mE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new QS(this.firestore,null,t)}}]),n}(VE);function QE(e){e=BS(e,$S);var t=BS(e.firestore,dE),n=pE(t),r=new GE(t);return UE(e._query),hE(n,e._query).then((function(n){return new WE(t,r,e,n)}))}function $E(e){return XE(BS(e.firestore,dE),[new q_(e._key,T_.none())])}function YE(e,t){var n=BS(e.firestore,dE),r=XS(e),i=zE(e.converter,t);return XE(n,[CE(EE(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,T_.exists(!1))]).then((function(){return r}))}function XE(e,t){return function(e,t){var n=new rg;return e.asyncQueue.enqueueAndForget(s(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=fS,r.next=3,uE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(pE(e),t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Wy=e}(pt),ct(new we("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new dE(new sg(e.getProvider("auth-internal")),new hg(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ng(tg.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jg(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),yt(By,"3.8.0",e),yt(By,"3.8.0","esm2017")}();var JE=vt({apiKey:"AIzaSyCO0Y41emfUWmeDTGv_2X5XthwaPEpXcWs",authDomain:"authentication-shop-project.firebaseapp.com",projectId:"authentication-shop-project",storageBucket:"authentication-shop-project.appspot.com",messagingSenderId:"106452995370",appId:"1:106452995370:web:5125458e4bc43b0c146253",measurementId:"G-SJK1288K7Y"}),ZE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt(),t=lt(e,"auth");if(t.isInitialized())return t.getImmediate();var n=Qt(e,{popupRedirectResolver:Da,persistence:[Ai,si,ci]}),r=X("authTokenSyncURL");if(r){var i=Ba(r);ei(n,i,(function(){return i(n.currentUser)})),Zr(n,(function(e){return i(e)}))}var a=Q("auth");return a&&ar(n,"http://".concat(a)),n}(JE),eC=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt(),t=arguments.length>1?arguments[1]:void 0,n=lt(e,"database").getImmediate({identifier:t}),r=$("database");return r&&Fd.apply(void 0,[n].concat(E(r))),n}(JE),tC=function(e,t){var n="string"==typeof e?e:t||"(default)",r=lt("object"==typeof e?e:mt(),"firestore").getImmediate({identifier:n});if(!r._initialized){var i=$("firestore");i&&GS.apply(void 0,[r].concat(E(i)))}return r}(JE);function nC(e){return Us({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.39 361.8l-112-48a24 24 0 0 0-28 6.9l-49.6 60.6A370.66 370.66 0 0 1 130.6 204.11l60.6-49.6a23.94 23.94 0 0 0 6.9-28l-48-112A24.16 24.16 0 0 0 122.6.61l-104 24A24 24 0 0 0 0 48c0 256.5 207.9 464 464 464a24 24 0 0 0 23.4-18.6l24-104a24.29 24.29 0 0 0-14.01-27.6z"}}]})(e)}function rC(e){return Us({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"}}]})(e)}var iC=function(){var t=to((function(e){return e.addtocart})).filter((function(e){return e.id>=0})),n=t.map((function(e){return e.price*e.count})),r=l((0,e.useState)("none"),2),i=r[0],o=r[1],u=l((0,e.useState)("none"),2),c=u[0],h=u[1],f=l((0,e.useState)("none"),2),d=f[0],p=f[1],v=us(),m=l((0,e.useState)(0),2),y=m[0],g=m[1],k=ss(),_=l((0,e.useState)({}),2),b=_[0],w=_[1],x=l((0,e.useState)(!1),2),S=x[0],E=x[1];(0,e.useEffect)((function(){var e=0;for(var t in n)e+=n[t];g(e)}),[n]),(0,e.useEffect)((function(){ti(ZE,(function(e){w(e),"admin@gmail.com"===(null===e||void 0===e?void 0:e.email)?E(!0):E(!1)}))}),[]);var C=function(){"none"===i?(o("active"),h("none")):o("none")},T=function(){"none"===c?(h("active"),o("none")):h("none")},I=function(){var e=s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ni(ZE);case 2:N(),"/Shop/userpanel"!==k.pathname&&"/Shop/admin/panel"!==k.pathname&&"/Shop/admin/panel/*/admin/orders"!==k.pathname&&"/Shop/admin/panel/*/admin/products"!==k.pathname&&"/Shop/userpanel/*/user/order"!==k.pathname?v(k.pathname):v("/Shop/");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){p("none"===d?"active":"none")};return(0,As.jsxs)("header",{children:[(0,As.jsx)("div",{className:"header"}),(0,As.jsx)("div",{className:"header__logo",children:(0,As.jsx)(Is,{to:"/Shop/",children:"Shop"})}),"active"===i?null:(0,As.jsx)(Os,{active:i}),(0,As.jsxs)("div",{className:"header__cart-login",children:[(0,As.jsxs)("div",{className:"header__cart",children:[(0,As.jsx)(tu,{className:"cart",onClick:T}),(0,As.jsxs)("p",{children:["(",t.length,")"]})]}),(0,As.jsx)("div",{className:"header__login",children:b?(0,As.jsxs)("div",{className:"user-icon "+d,children:["active"===d?(0,As.jsx)(Hs,{onClick:N}):(0,As.jsx)(rC,{onClick:N}),(0,As.jsxs)("div",{className:"user-panel "+d,children:[S?(0,As.jsx)(Is,{to:"/Shop/admin/panel/*/admin/orders",onClick:N,children:"Panel"}):(0,As.jsx)(Is,{to:"/Shop/userpanel/*/user/order",onClick:N,children:"Panel"}),(0,As.jsx)("button",{onClick:I,children:"Logout"})]})]}):(0,As.jsx)(Is,{to:"/Shop/login",children:"Login"})})]}),(0,As.jsxs)("div",{className:"cart__list "+c,children:[(0,As.jsx)("h2",{children:"Cart"}),0===t.length?(0,As.jsx)("div",{className:"empty",children:(0,As.jsx)("h2",{children:"Cart is empty"})}):(0,As.jsxs)("div",{className:"cart_cont",children:[(0,As.jsx)("div",{className:"cart__items",children:(0,As.jsx)("ul",{children:t.map((function(e,t){return(0,As.jsxs)("li",{children:[(0,As.jsx)("div",{className:"cart_left",children:(0,As.jsx)("img",{src:e.img,alt:"cart_item"})}),(0,As.jsxs)("div",{className:"cart_right",children:[(0,As.jsxs)("p",{children:[e.title," ","(".concat(e.count," pc)")]}),(0,As.jsxs)("p",{children:[e.price,"$"]})]})]},t)}))})}),(0,As.jsxs)("span",{className:"total",children:[(0,As.jsx)("p",{children:"Total amount"}),(0,As.jsxs)("p",{children:[y.toFixed(2),"$"]})]})]}),(0,As.jsx)(Gs,{className:"close_btn",onClick:T}),(0,As.jsx)(Is,{to:"/Shop/cart",onClick:T,children:"Check Out"})]}),(0,As.jsxs)("div",{className:"hamb "+i,onClick:C,children:[(0,As.jsx)("div",{className:"e_1",onClick:C}),(0,As.jsx)("div",{className:"e_2",onClick:C}),(0,As.jsx)("div",{className:"e_3",onClick:C}),(0,As.jsxs)("div",{className:"list_opt "+i+"".concat(b?"log":""),children:["active"===i?(0,As.jsx)(Os,{active:i}):null,"active"===i?b?(0,As.jsxs)("div",{className:"user-hamb",children:[(0,As.jsx)(rC,{onClick:N}),(0,As.jsxs)("div",{className:"user-panel-hamb",children:[S?(0,As.jsx)(Is,{to:"/Shop/admin/panel/*/admin/orders",children:"Panel"}):(0,As.jsx)(Is,{to:"/Shop/userpanel/*/user/order",children:"Panel"}),(0,As.jsx)("button",{onClick:I,children:"Logout"})]})]}):(0,As.jsx)(Is,{to:"/Shop/login",className:"user-login",children:"Login"}):null]})]})]})};function aC(e){return Us({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"}}]})(e)}function oC(e){return Us({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"}}]})(e)}function sC(e){return Us({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5.757 1.071a.5.5 0 0 1 .172.686L3.383 6h9.234L10.07 1.757a.5.5 0 1 1 .858-.514L13.783 6H15a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1v4.5a2.5 2.5 0 0 1-2.5 2.5h-9A2.5 2.5 0 0 1 1 13.5V9a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h1.217L5.07 1.243a.5.5 0 0 1 .686-.172zM2 9v4.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V9H2zM1 7v1h14V7H1zm3 3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0v-3A.5.5 0 0 1 4 10zm2 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0v-3A.5.5 0 0 1 6 10zm2 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0v-3A.5.5 0 0 1 8 10zm2 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 1 .5-.5zm2 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 1 .5-.5z"}}]})(e)}function uC(e){return Us({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H4.414A2 2 0 0 0 3 11.586l-2 2V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12.793a.5.5 0 0 0 .854.353l2.853-2.853A1 1 0 0 1 4.414 12H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"}},{tag:"path",attr:{d:"M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"}}]})(e)}function cC(e){return Us({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"}}]})(e)}function lC(e){return Us({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}},{tag:"path",attr:{fillRule:"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"}}]})(e)}function hC(e){return Us({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 3.5A1.5 1.5 0 0 1 1.5 2h9A1.5 1.5 0 0 1 12 3.5V5h1.02a1.5 1.5 0 0 1 1.17.563l1.481 1.85a1.5 1.5 0 0 1 .329.938V10.5a1.5 1.5 0 0 1-1.5 1.5H14a2 2 0 1 1-4 0H5a2 2 0 1 1-3.998-.085A1.5 1.5 0 0 1 0 10.5v-7zm1.294 7.456A1.999 1.999 0 0 1 4.732 11h5.536a2.01 2.01 0 0 1 .732-.732V3.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .294.456zM12 10a2 2 0 0 1 1.732 1h.768a.5.5 0 0 0 .5-.5V8.35a.5.5 0 0 0-.11-.312l-1.48-1.85A.5.5 0 0 0 13.02 6H12v4zm-9 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm9 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"}}]})(e)}function fC(e){return Us({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"title",attr:{},child:[]},{tag:"path",attr:{d:"M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L5.455 4.64 12 9.548l6.545-4.91 1.528-1.145C21.69 2.28 24 3.434 24 5.457z"}}]})(e)}var dC=function(){return(0,As.jsxs)("div",{className:"footer",id:"contact",children:[(0,As.jsxs)("div",{className:"foot_info",children:[(0,As.jsx)("h2",{children:"Shop"}),(0,As.jsx)("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Ipsum sapiente, quasi accusantium reiciendis deleniti veritatis consectetur porro sunt dicta labore explicabo necessitatibus harum impedit perspiciatis exercitationem eligendi repellendus!"})]}),(0,As.jsxs)("div",{className:"foot_nav",children:[(0,As.jsx)(Is,{to:"/Shop/",children:"Home"}),(0,As.jsx)(Is,{to:"/Shop/products",children:"Products"}),(0,As.jsx)(Is,{to:"/Shop/cart",children:"Cart"})]}),(0,As.jsxs)("div",{className:"foot_contact",children:[(0,As.jsx)("a",{href:"tel: 530786458",children:(0,As.jsxs)("p",{children:[(0,As.jsx)(nC,{}),(0,As.jsx)("i",{children:"530-786-458"})]})}),(0,As.jsx)("a",{href:"shop@gmail.com",children:(0,As.jsxs)("p",{children:[(0,As.jsx)(fC,{}),(0,As.jsx)("i",{children:" shop@gmail.com"})]})}),(0,As.jsx)("a",{href:"https://www.facebook.com/",children:(0,As.jsxs)("p",{children:[(0,As.jsx)(cC,{}),(0,As.jsx)("i",{children:"Shop"})]})}),(0,As.jsx)("a",{href:"https://www.instagram.com/",children:(0,As.jsxs)("p",{children:[(0,As.jsx)(zs,{}),(0,As.jsx)("i",{children:"Shop"})]})})]})]})},pC=n.p+"static/media/baner.639ecd8ed9865ab1ba0f.jpg",vC=[{id:0,title:"Apple iPhone 14 128GB",price:1168.86,count:1,max_count:30,promo:1168.86*.7,img:"https://f01.esfr.pl/foto/4/111512612561/fabfb6db948c962e7b838a3e8f72ed70/apple-iphone-14-128gb-polnoc,111512612561_8.jpg",category:"electronics",rating:"4.9"},{id:1,title:"Samsung Galaxy A53 5G 6/128GB",price:476.49,count:1,max_count:80,promo:333.543,img:"https://f00.esfr.pl/foto/7/101642927985/e9978789fe6bb94f5d2faa250c78bd69/samsung-smartfon-galaxy-a53-5g-6-128-bk-samsung,101642927985_8.jpg",category:"electronics",rating:"4.8"},{id:2,title:"Acer Nitro 5 AN515-57-72CC 15,6",price:1590.1,count:1,max_count:125,promo:1113.07,img:"https://f00.esfr.pl/foto/4/113046153329/7182cc2dfa0f7655f9dd6311fd927f6c/acer-laptop-nitro-5-i7-16gb-1tbssd-3070-w11,113046153329_8.jpg",category:"electronics",rating:"4.2"},{id:3,title:"HP Victus 15",price:976.69,count:1,max_count:178,promo:683.683,img:"https://f01.esfr.pl/foto/9/112216597233/d9d028ed740f45dd8c252ac50538e4ca/hp-laptop-victus-r5-16gb-512ssd-1650-w11,112216597233_8.jpg",category:"electronics",rating:"4.6"},{id:4,title:"PC Actina AMD Ryzen 5 5600X  RX6700XT ",price:1563.43,count:1,max_count:20,promo:1113.07,img:"https://f00.esfr.pl/foto/4/99378452833/c6338451ddfcaae4d45f323aa20f39e5/komputer-actin-ic-5600x-16gb-1t-6700xt-w_1,99378452833_8.jpg",category:"electronics",rating:"4.2"},{id:5,title:"Komputer ASUS ROG Strix G10CE",price:1249.26,count:1,max_count:27,promo:874.482,img:"https://f01.esfr.pl/foto/1/102824872617/a6ba0b17b3d207e476cc8d85e1825816/asus-rog-strix-g10ce-51140f1570-intel-core-i5-11400f-16gb-512gb-rtx3060,102824872617_8.jpg",category:"electronics",rating:"4.2"},{id:6,title:"MICROSOFT Xbox Series X ",price:567.39,count:1,max_count:8,promo:567.39*.7,img:"https://static.komputronik.pl/product-picture/6/XSERIESKONX-1.jpg",category:"electronics",rating:"4.9"},{id:7,title:"SAMSUNG QE65Q77B 65 QLED 4K 120HZ",price:973.81,count:1,max_count:22,promo:973.81*.7,img:"https://f01.esfr.pl/foto/2/101544603169/de0b540bbe05eeb61b60f41c684ee026/samsung-qe65q77b-qled-tv-uhd-4k,101544603169_8.jpg",category:"electronics",rating:"4.6"},{id:8,title:"Monitor iiyama G-Master G2766HSU-B1 1ms 165Hz",price:215.59,count:1,max_count:34,promo:215.59*.7,img:"https://f01.esfr.pl/foto/1/93620519521/7ef3c590f0e325ea51fdb13fc90de452/iiyama-monitor-iiyama-27-g2766hsu-b1-165hz,93620519521_8.jpg",category:"electronics",rating:"4.7"},{id:9,title:"Gigabyte GeForce RTX 3060  12GB GDDR6",price:499.78,count:1,max_count:76,promo:499.78*.7,img:"https://f00.esfr.pl/foto/6/87299091945/95aaf99ca198ceac1e9cccf72885a9a9/msi-karta-graf-msi-rtx-3060-eagle-12g-2-0,87299091945_8.jpg",category:"electronics",rating:"5"},{id:10,title:"Intel\xae Core\u2122 i7-11700K BOX",price:381.6,count:1,max_count:87,promo:267.12,img:"https://f01.esfr.pl/foto/8/79113169545/1e8e67401240293323d74fc7c2578ff6/intel-procesor-intel-core-i7-11700k-3-6ghz-box,79113169545_8.jpg",category:"electronics",rating:"4.6"},{id:11,title:"ASUS TUF Gaming F15",price:1090.69,count:1,max_count:98,promo:763.483,img:"https://f00.esfr.pl/foto/8/110482550465/87e9baa92fc3b5472f07b7d1f798730f/asus-laptop-fx506-i5-16gb-512ssd-3060-w11,110482550465_8.jpg",category:"electronics",rating:"4.5"},{id:12,title:"LEGO Technic 42141 McLaren Formula 1\u2122",price:141.04,count:1,max_count:70,promo:98.728,img:"https://cdn.al.to/i/setup/images/prod/big/product-new-big,,2022/6/pr_2022_6_8_10_34_45_764_00.jpg",category:"toys",rating:"4.8"},{id:13,title:"LEGO Technic 42145 Airbus H175",price:156.99,count:1,max_count:150,promo:109.893,img:"https://prod-api.mediamarkt.pl/api/images/gallery_545_400/thumbnails/images/23/23037449/1-helikopter-ratunkowy-airbus-h175-42145.jpg",category:"toys",rating:"4.6"},{id:14,title:"LEGO Technic 42083 Bugatti Chiron ",price:357.48,count:1,max_count:79,promo:250.236,img:"https://cdn.al.to/i/setup/images/prod/big/product-new-big,,2021/6/pr_2021_6_7_14_31_40_432_00.jpg",category:"toys",rating:"4.9"},{id:15,title:"LEGO Harry Potter 71043 Castle Hogwart",price:432.67,count:1,max_count:37,promo:432.67*.7,img:"https://cdn.al.to/i/setup/images/prod/big/product-new-big,,2021/8/pr_2021_8_16_13_37_27_740_00.jpg",category:"toys",rating:"5"},{id:16,title:"Hot Wheels cars 3 pack",price:4.53,count:1,max_count:92,promo:3.171,img:"https://cdn.al.to/i/setup/images/prod/big/product-new-big,,2017/12/pr_2017_12_21_13_59_52_717_00.jpg",category:"toys",rating:"4"},{id:17,title:"Mattel Jurassic World Rajasaurus",price:19.56,count:1,max_count:75,promo:19.56*.7,img:"https://cdn.al.to/i/setup/images/prod/big/product-new-big,,2022/4/pr_2022_4_14_15_7_44_881_00.jpg",category:"toys",rating:"4.1"},{id:18,title:"LEGO Architecture 21057 Singapur",price:50.09,count:1,max_count:178,promo:35.063,img:"https://cdn.al.to/i/setup/images/prod/big/product-new-big,,2021/12/pr_2021_12_29_15_55_41_608_00.jpg",category:"toys",rating:"4.6"},{id:19,title:"Dumel Discovery Magic Jinn",price:20.26,count:1,max_count:29,promo:14.182,img:"https://cdn.al.to/i/setup/images/prod/big/product-new-big,,2021/11/pr_2021_11_4_15_54_4_881_00.jpg",category:"toys",rating:"3.8"},{id:20,title:"LEGO ART 31203 World Map",price:247.95,count:1,max_count:131,promo:247.95*.7,img:"https://cdn.al.to/i/setup/images/prod/big/product-new-big,,2021/8/pr_2021_8_17_14_55_22_112_00.jpg",category:"toys",rating:"4.8"},{id:21,title:"Spin Master Bakugan Evolutions",price:47.58,count:1,max_count:14,promo:33.306,img:"https://cdn.al.to/i/setup/images/prod/big/product-new-big,,2022/8/pr_2022_8_22_10_39_50_680_00.jpg",category:"toys",rating:"4.2"}];function mC(e){return Us({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 8h-5.612l1.123-3.367c.202-.608.1-1.282-.275-1.802S14.253 2 13.612 2H12c-.297 0-.578.132-.769.36L6.531 8H4c-1.103 0-2 .897-2 2v9c0 1.103.897 2 2 2h13.307a2.01 2.01 0 0 0 1.873-1.298l2.757-7.351A1 1 0 0 0 22 12v-2c0-1.103-.897-2-2-2zM4 10h2v9H4v-9zm16 1.819L17.307 19H8V9.362L12.468 4h1.146l-1.562 4.683A.998.998 0 0 0 13 10h7v1.819z"}}]})(e)}function yC(e){return Us({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m15 12 5-4-5-4v2.999H2v2h13zm7 3H9v-3l-5 4 5 4v-3h13z"}}]})(e)}function gC(e){return Us({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2A10.13 10.13 0 0 0 2 12a10 10 0 0 0 4 7.92V20h.1a9.7 9.7 0 0 0 11.8 0h.1v-.08A10 10 0 0 0 22 12 10.13 10.13 0 0 0 12 2zM8.07 18.93A3 3 0 0 1 11 16.57h2a3 3 0 0 1 2.93 2.36 7.75 7.75 0 0 1-7.86 0zm9.54-1.29A5 5 0 0 0 13 14.57h-2a5 5 0 0 0-4.61 3.07A8 8 0 0 1 4 12a8.1 8.1 0 0 1 8-8 8.1 8.1 0 0 1 8 8 8 8 0 0 1-2.39 5.64z"}},{tag:"path",attr:{d:"M12 6a3.91 3.91 0 0 0-4 4 3.91 3.91 0 0 0 4 4 3.91 3.91 0 0 0 4-4 3.91 3.91 0 0 0-4-4zm0 6a1.91 1.91 0 0 1-2-2 1.91 1.91 0 0 1 2-2 1.91 1.91 0 0 1 2 2 1.91 1.91 0 0 1-2 2z"}}]})(e)}function kC(e){return Us({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}}]})(e)}function _C(e){return Us({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M11 13V9c0-.55-.45-1-1-1H6V6h5V4H8.5V3h-2v1H5c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h4v2H4v2h2.5v1h2v-1H10c.55 0 1-.45 1-1zM19.59 12.52l-5.66 5.65-2.83-2.83-1.41 1.42L13.93 21 21 13.93z"}}]})(e)}var bC=function(e){var t=e.addanim,n=e.text;return(0,As.jsx)("div",{className:"addAnim "+t,children:(0,As.jsx)("div",{children:(0,As.jsx)("p",{children:n})})})},wC=function(){var t=vC,n=l((0,e.useState)(Math.round(9*Math.random())),1)[0],r=t.filter((function(e){return e===t[n]})),i=to((function(e){return e.addtocart})),a=i.filter((function(e){return e.id>=0})),o=l((0,e.useState)("none"),2),s=o[0],u=o[1],c=ho(),h=function(e){if(u("active"),setTimeout((function(){u("none")}),1900),i.filter((function(t){return t.id===e.id})).length>0){var t=a.findIndex((function(t){return t.title===e.title}));e.count=e.count+1,a.splice(t,1,e),c({type:"UPDATE_ITEM",payload:a})}else c({type:"ADD_TO_CART",payload:e})};return(0,As.jsxs)("div",{className:"home",children:[(0,As.jsx)("div",{className:"baner",children:(0,As.jsx)("img",{src:pC,alt:"baner"})}),(0,As.jsxs)("div",{className:"recommended",children:[(0,As.jsx)("div",{className:"sec_one",children:r.map((function(e,t){return(0,As.jsxs)("div",{className:"el1",children:[(0,As.jsxs)("div",{className:"el2",children:[(0,As.jsx)("p",{children:"Recomended"}),(0,As.jsx)(Is,{to:"/Shop/products/".concat(e.id),children:(0,As.jsx)("img",{src:e.img,alt:"item"})})]}),(0,As.jsx)("div",{className:"el3",children:(0,As.jsxs)("ul",{children:[(0,As.jsx)("li",{children:e.title}),(0,As.jsxs)("li",{children:["Rating : ",e.rating,"/5 ",(0,As.jsx)(qs,{className:"star"})]}),(0,As.jsx)("li",{className:"price",children:(0,As.jsxs)("p",{children:[e.price.toFixed(2),"$"]})}),(0,As.jsx)("button",{onClick:function(){h(e)},children:(0,As.jsx)("i",{className:"fa-solid fa-cart-plus hot_shot"})})]})})]},t)}))}),(0,As.jsx)("div",{className:"sec_two",children:(0,As.jsxs)("div",{className:"wrapper",children:[(0,As.jsxs)("div",{children:[(0,As.jsx)("span",{children:(0,As.jsx)(mC,{})}),(0,As.jsx)("span",{children:"Easy and convenient shopping."})]}),(0,As.jsxs)("div",{children:[(0,As.jsx)("span",{children:(0,As.jsx)(_C,{})}),(0,As.jsx)("span",{children:"Competitive prices."})]}),(0,As.jsxs)("div",{children:[(0,As.jsx)("span",{children:(0,As.jsx)(hC,{})}),(0,As.jsx)("span",{children:"Fast delivery with many options."})]}),(0,As.jsxs)("div",{children:[(0,As.jsx)("span",{children:(0,As.jsx)(uC,{})}),(0,As.jsx)("span",{children:"Customer Service in the foreground."})]})]})})]}),(0,As.jsx)(bC,{addanim:s,text:"Product add to cart!"})]})},xC=function(e){var t=e.all,n=e.addToCart;return t.map((function(e,t){return(0,As.jsxs)("div",{className:"item",children:[(0,As.jsx)("div",{className:"image",children:(0,As.jsx)(Is,{to:"/Shop/products/".concat(e.id),children:(0,As.jsx)("img",{src:e.img,alt:"item"})})}),(0,As.jsxs)("div",{className:"info",children:[(0,As.jsxs)("ul",{children:[(0,As.jsx)("li",{children:e.title}),(0,As.jsxs)("li",{children:["Rating : ",e.rating,"/5 ",(0,As.jsx)(qs,{className:"star"})]}),(0,As.jsxs)("li",{children:["Price : ",e.price,"$"]})]}),(0,As.jsx)("button",{onClick:function(){n(e)},children:(0,As.jsx)("i",{className:"fa-solid fa-cart-plus"})})]})]},t)}))},SC=function(e){var t=e.electro,n=e.addToCart;return t.map((function(e,t){return(0,As.jsxs)("div",{className:"item",children:[(0,As.jsx)("div",{className:"image",children:(0,As.jsx)(Is,{to:"/Shop/products/".concat(e.id),children:(0,As.jsx)("img",{src:e.img,alt:"item"})})}),(0,As.jsxs)("div",{className:"info",children:[(0,As.jsxs)("ul",{children:[(0,As.jsx)("li",{children:e.title}),(0,As.jsxs)("li",{children:["Rating : ",e.rating,"/5 ",(0,As.jsx)(qs,{className:"star"})]}),(0,As.jsxs)("li",{children:["Price : ",e.price,"$"]})]}),(0,As.jsx)("button",{onClick:function(){n(e)},children:(0,As.jsx)("i",{className:"fa-solid fa-cart-plus"})})]})]},t)}))},EC=function(e){var t=e.toys,n=e.addToCart;return t.map((function(e,t){return(0,As.jsxs)("div",{className:"item",children:[(0,As.jsx)("div",{className:"image",children:(0,As.jsx)(Is,{to:"/Shop/products/".concat(e.id),children:(0,As.jsx)("img",{src:e.img,alt:"item"})})}),(0,As.jsxs)("div",{className:"info",children:[(0,As.jsxs)("ul",{children:[(0,As.jsx)("li",{children:e.title}),(0,As.jsxs)("li",{children:["Rating : ",e.rating,"/5 ",(0,As.jsx)(qs,{className:"star"})]}),(0,As.jsxs)("li",{children:["Price : ",e.price,"$"]})]}),(0,As.jsx)("button",{onClick:function(){n(e)},children:(0,As.jsx)("i",{className:"fa-solid fa-cart-plus"})})]})]},t)}))},CC=function(e){var t=e.search_data,n=e.addToCart;return t.map((function(e,t){return(0,As.jsxs)("div",{className:"item",children:[(0,As.jsx)("div",{className:"image",children:(0,As.jsx)(Is,{to:"/Shop/products/".concat(e.id),children:(0,As.jsx)("img",{src:e.img,alt:"item"})})}),(0,As.jsxs)("div",{className:"info",children:[(0,As.jsxs)("ul",{children:[(0,As.jsx)("li",{children:e.title}),(0,As.jsxs)("li",{children:["Rating : ",e.rating,"/5 ",(0,As.jsx)(qs,{className:"star"})]}),(0,As.jsxs)("li",{children:["Price : ",e.price,"$"]})]}),(0,As.jsx)("button",{onClick:function(){n(e)},children:(0,As.jsx)("i",{className:"fa-solid fa-cart-plus"})})]})]},t)}))},TC=function(e){var t=e.search;return(0,As.jsx)("div",{className:"error_search",children:(0,As.jsxs)("h3",{children:['No product : "',t,'"']})})},IC=function(){var t=vC.filter((function(e){return"electronics"===e.category})),n=vC.filter((function(e){return"toys"===e.category})),r=l((0,e.useState)(0),2),i=r[0],a=r[1],o=l((0,e.useState)(""),2),s=o[0],u=o[1],c=l((0,e.useState)("none"),2),h=c[0],f=c[1],d=vC.filter((function(e){return e.title.toLocaleLowerCase().includes(s.toLocaleLowerCase())})),p=to((function(e){return e.addtocart})),v=p.filter((function(e){return e.id>=0})),m=function(e){a(Number(e.target.id)),u("")},y=ho(),g=function(e){if(f("active"),setTimeout((function(){f("none")}),1900),p.filter((function(t){return t.id===e.id})).length>0){var t=v.findIndex((function(t){return t.title===e.title}));e.count=e.count+1,v.splice(t,1,e),y({type:"UPDATE_ITEM",payload:v})}else y({type:"ADD_TO_CART",payload:e})};return(0,As.jsxs)("div",{className:"products",children:[(0,As.jsxs)("div",{className:"prod__container",children:[(0,As.jsxs)("div",{className:"search__prod",children:[(0,As.jsxs)("div",{className:"search__bar",children:[(0,As.jsx)(Zs,{className:"search-icon"}),(0,As.jsx)("input",{value:s,type:"text",placeholder:"Search...",onKeyUp:function(){a(""!==s?"":0)},onChange:function(e){u(e.target.value),a("")}})]}),(0,As.jsx)("div",{className:"select__prod",children:[{id:0,name:"All"},{id:1,name:"Electronics"},{id:2,name:"Toys"}].map((function(e,t){return(0,As.jsx)("button",{id:e.id,className:i===e.id?"active":"none",onClick:m,children:e.name},t)}))})]}),vC.length>=0?(0,As.jsxs)("div",{className:"prod_list",children:[0===i?(0,As.jsx)(xC,{all:vC,addToCart:g}):null,1===i?(0,As.jsx)(SC,{electro:t,addToCart:g}):null,2===i?(0,As.jsx)(EC,{toys:n,addToCart:g}):null,0!==i&&1!==i&&2!==i?d.length>0?(0,As.jsx)(CC,{search_data:d,addToCart:g}):(0,As.jsx)(TC,{search:s}):null]}):(0,As.jsx)("div",{className:"prod_list",children:(0,As.jsx)("h2",{children:"Loading..."})})]}),(0,As.jsx)(bC,{addanim:h,text:"Product added to cart!"})]})},NC=function(t){var n=t.cart_items,r=n.map((function(e){return e.price*e.count})),i=l((0,e.useState)("none"),2),a=i[0],o=i[1],s=l((0,e.useState)(0),2),u=s[0],c=s[1],h=l((0,e.useState)({}),2),f=h[0],d=h[1],p=ho();(0,e.useEffect)((function(){var e=0;for(var t in r)e+=r[t];c(e)}),[r]);var v=function(e){n.splice(n.indexOf(e),1),p({type:"REMOVE_ITEM",payload:n}),o("active"),setTimeout((function(){o("none")}),1900)},m=function(e,t){if("increment"===t){var r=n.indexOf(e);e.max_count>e.count&&(e.count=e.count+1),n.splice(r,1,e),p({type:"UPDATE_ITEM",payload:n})}else if("decrement"===t){var i=n.indexOf(e);e.count>=1&&(e.count=e.count-1),n.splice(i,1,e),p({type:"UPDATE_ITEM",payload:n}),e.count<=0&&v(e)}};return(0,e.useEffect)((function(){ti(ZE,(function(e){d(e)}))}),[]),(0,As.jsxs)("div",{className:"cart_page",children:[(0,As.jsx)("div",{className:"cart_container",children:0===n.length?(0,As.jsxs)("div",{className:"cart_empty",children:[(0,As.jsx)("h2",{children:"Your cart is empty"}),(0,As.jsx)(Is,{to:"/Shop/",children:"Go to home page"})]}):(0,As.jsxs)("div",{className:"cart_full",children:[(0,As.jsxs)("div",{className:"cart_products",children:[(0,As.jsxs)("div",{className:"top",children:[(0,As.jsxs)("span",{children:[(0,As.jsx)("h3",{children:"Cart"}),(0,As.jsxs)("p",{children:["(",n.length,")"]})]}),(0,As.jsxs)("button",{onClick:function(){p({type:"CLEAR_CART",payload:[]})},children:[(0,As.jsx)(lC,{})," \xa0 Clear cart"]})]}),(0,As.jsx)("div",{className:"bottom",children:(0,As.jsx)("ul",{children:n.map((function(e,t){return(0,As.jsxs)("li",{children:[(0,As.jsx)("div",{className:"item_img",children:(0,As.jsx)(Is,{to:"/Shop/products/".concat(e.id),children:(0,As.jsx)("img",{src:e.img,alt:"item"})})}),(0,As.jsxs)("div",{className:"item_info",children:[(0,As.jsx)("div",{className:"item_info-left",children:(0,As.jsx)("p",{children:e.title})}),(0,As.jsxs)("div",{className:"item_info-right",children:[(0,As.jsxs)("p",{children:[Number(e.price).toFixed(2),"$"]}),(0,As.jsxs)("div",{className:"select-counter",children:[(0,As.jsx)("button",{onClick:function(){return m(e,"increment")},children:"+"}),(0,As.jsx)("p",{children:e.count}),(0,As.jsx)("button",{onClick:function(){return m(e,"decrement")},children:"-"})]}),(0,As.jsx)("button",{className:"trash",onClick:function(){return v(e)},children:(0,As.jsx)(lC,{})})]})]})]},t)}))})})]}),(0,As.jsxs)("div",{className:"cart_pay",children:[(0,As.jsxs)("span",{children:[(0,As.jsx)("p",{children:"Total amount "})," ",(0,As.jsxs)("p",{children:[u.toFixed(2),"$"]})]}),f?(0,As.jsx)(Is,{to:"/Shop/payDelivery",children:"Go to delivery"}):(0,As.jsx)(Is,{to:"/Shop/login",children:"Go to delivery"}),(0,As.jsx)("p",{className:"cart_pay-info",children:"Finish placing orders - Products added to the basket do not mean that they have been reserved."})]})]})}),(0,As.jsx)(bC,{addanim:a,text:"Product removed"})]})},RC=function(){var t=l((0,e.useState)(!1),2),n=t[0],r=t[1],i=l((0,e.useState)(!1),2),o=i[0],u=i[1],c=l((0,e.useState)(""),2),h=c[0],f=c[1],d=us(),p=l((0,e.useState)(""),2),v=p[0],m=p[1],y=l((0,e.useState)({email:"",password:""}),2),g=y[0],k=y[1],_=function(e){f(""),k(Le(Le({},g),{},C({},e.target.name,e.target.value)))};(0,e.useEffect)((function(){ti(ZE,(function(e){m(e)}))}),[]),(0,e.useEffect)((function(){""!==v&&null!==v&&d("/Shop/")}),[v,d]);var b=function(){var e=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),w(),""===g.email||""===g.password){e.next=12;break}return e.prev=3,e.next=6,Jr(ZE,g.email,g.password);case 6:f(""),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),f((function(){return console.log(e.t0.message),e.t0.message.includes("user-not-found")?"User not found":e.t0.message.includes("wrong-password")?"Wrong password":e.t0.message.includes("too-many-requests")?"Too many requests try again later or reset password":"Something went wrong"}));case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}();console.log(h);var w=function(){""===g.email?r(!0):r(!1),""===g.password?u(!0):u(!1)},x=function(){var e=s(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ni(ZE);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,As.jsx)("div",{className:"loginPage",children:(0,As.jsxs)("div",{className:"form_login",children:[v?(0,As.jsx)("button",{onClick:x,children:"Logout"}):(0,As.jsxs)("div",{className:"login",children:[(0,As.jsx)("h2",{children:"Login"}),(0,As.jsxs)("form",{children:[(0,As.jsxs)("div",{children:[(0,As.jsx)("input",{type:"email",placeholder:"E-mail",value:g.email,onChange:_,name:"email"}),n?(0,As.jsx)("span",{children:"Enter your email"}):null]}),(0,As.jsxs)("div",{children:[(0,As.jsx)("input",{type:"password",placeholder:"Password",value:g.password,onChange:_,name:"password"}),o?(0,As.jsx)("span",{children:"Enter the password. The field cannot be empty"}):null,""!==h?(0,As.jsx)("span",{children:h}):null]}),(0,As.jsx)("button",{onClick:b,children:(0,As.jsx)(Is,{children:"Login"})})]})]}),(0,As.jsx)("div",{className:"register",children:(0,As.jsxs)("div",{children:[(0,As.jsx)("p",{children:"You do not have an account?"}),(0,As.jsx)("button",{children:v?(0,As.jsx)(Is,{children:"Create an account"}):(0,As.jsx)(Is,{to:"/Shop/register",children:"Create an account"})})]})})]})})},PC=function(){return(0,As.jsxs)("div",{className:"no",children:[(0,As.jsx)("h1",{children:"Error!!!"}),(0,As.jsx)("h2",{children:"Page not found!"})]})};function AC(e){return Us({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"}},{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"}},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"}}]})(e)}for(var OC,DC=256,LC=[];DC--;)LC[DC]=(DC+256).toString(16).substring(1);var jC=function(e){var t=e.addanim;return(0,As.jsx)("div",{className:"SuccesAnim "+t,children:(0,As.jsxs)("div",{children:[(0,As.jsx)(nu,{}),(0,As.jsx)("h2",{children:"Thanks You For Your Order!"}),(0,As.jsx)(kC,{})]})})},MC=function(t){var n=t.cart_items,r=n.map((function(e){return e.price*e.count})),i=ho(),a=us(),o=l((0,e.useState)(0),2),s=o[0],u=o[1];(0,e.useEffect)((function(){var e=0;for(var t in r)e+=r[t];u(e)}),[r]);var c=l((0,e.useState)({name:"Choose delivery method",price:0}),2),h=c[0],f=c[1],d=l((0,e.useState)({name:"pay method",price:0}),2),p=d[0],v=d[1],m=l((0,e.useState)(!1),2),y=m[0],g=m[1],k=l((0,e.useState)(!1),2),_=k[0],b=k[1],w=l((0,e.useState)(!1),2),x=w[0],S=w[1],E=l((0,e.useState)(!1),2),C=E[0],T=E[1],I=l((0,e.useState)(!1),2),N=I[0],R=I[1],P=l((0,e.useState)(!1),2),A=P[0],O=P[1],D=l((0,e.useState)(!1),2),L=D[0],j=D[1],M=l((0,e.useState)(!1),2),F=M[0],U=M[1],V=l((0,e.useState)("none"),2),z=V[0],q=V[1],B={name:"Delivery man",price:4.57},H={name:"In-store pickup",price:0},W={name:"Parcel post",price:2.29},K={name:"Pay online",price:0},G={name:"Credit card online",price:0},Q={name:"Traditional transfer",price:0},$={name:"On delivery",price:5},Y={name:"Installments",price:0},X=function(e){e.target.name===B.name?(f(B),g(!0),b(!1),S(!1)):e.target.name===H.name?(f(H),g(!1),b(!0),S(!1)):e.target.name===W.name&&(f(W),g(!1),b(!1),S(!0))},J=function(e){e.target.name===K.name?(v(K),T(!0),R(!1),O(!1),j(!1),U(!1)):e.target.name===G.name?(v(G),T(!1),R(!0),O(!1),j(!1),U(!1)):e.target.name===Q.name?(v(Q),T(!1),R(!1),O(!0),j(!1),U(!1)):e.target.name===$.name?(v($),T(!1),R(!1),O(!1),j(!0),U(!1)):e.target.name===Y.name&&(v(Y),T(!1),R(!1),O(!1),j(!1),U(!0))},Z=function(){q("active"),setTimeout((function(){a("/Shop/"),q("none")}),1800)};return(0,As.jsxs)("div",{className:"pay_delivery",children:[(0,As.jsxs)("div",{className:"p_d_container",children:[(0,As.jsxs)("div",{className:"delivery",children:[(0,As.jsx)("h2",{children:"Delivery"}),(0,As.jsx)("div",{className:"delivery_opt",children:(0,As.jsxs)("ul",{children:[(0,As.jsxs)("li",{children:[(0,As.jsx)("label",{children:(0,As.jsxs)("span",{children:[(0,As.jsx)("input",{type:"checkbox",name:"Delivery man",onChange:X,checked:!!y}),(0,As.jsx)("p",{children:"Delivery man "})]})}),(0,As.jsx)(hC,{className:"delivery_icon"})]}),(0,As.jsxs)("li",{children:[(0,As.jsx)("label",{children:(0,As.jsxs)("span",{children:[(0,As.jsx)("input",{type:"checkbox",name:"In-store pickup",onChange:X,checked:!!_}),(0,As.jsx)("p",{children:"In-store pickup"})]})}),(0,As.jsx)(eu,{className:"delivery_icon"})]}),(0,As.jsxs)("li",{children:[(0,As.jsx)("label",{children:(0,As.jsxs)("span",{children:[(0,As.jsx)("input",{type:"checkbox",name:"Parcel post",onChange:X,checked:!!x}),(0,As.jsx)("p",{children:"Parcel post 24/7"})]})}),(0,As.jsx)(AC,{className:"delivery_icon"})]})]})})]}),(0,As.jsxs)("div",{className:"pay",children:[(0,As.jsx)("h2",{children:"Pay"}),(0,As.jsx)("div",{className:"pay_opt",children:(0,As.jsxs)("ul",{children:[(0,As.jsxs)("li",{children:[(0,As.jsx)("label",{children:(0,As.jsxs)("span",{children:[(0,As.jsx)("input",{type:"checkbox",name:"Pay online",onChange:J,checked:!!C}),(0,As.jsx)("p",{children:"Pay online"})]})}),(0,As.jsx)(Ys,{className:"delivery_icon"})]}),(0,As.jsxs)("li",{children:[(0,As.jsx)("label",{children:(0,As.jsxs)("span",{children:[(0,As.jsx)("input",{type:"checkbox",name:"Credit card online",onChange:J,checked:!!N}),(0,As.jsx)("p",{children:"Credit card online"})]})}),(0,As.jsx)(Qs,{className:"delivery_icon"})]}),(0,As.jsxs)("li",{children:[(0,As.jsx)("label",{children:(0,As.jsxs)("span",{children:[(0,As.jsx)("input",{type:"checkbox",name:"Traditional transfer",onChange:J,checked:!!A}),(0,As.jsx)("p",{children:"Traditional transfer"})]})}),(0,As.jsx)(yC,{className:"delivery_icon"})]}),(0,As.jsxs)("li",{children:[(0,As.jsx)("label",{children:(0,As.jsxs)("span",{children:[(0,As.jsx)("input",{type:"checkbox",name:"On delivery",onChange:J,checked:!!L}),(0,As.jsx)("p",{children:"On delivery (5$)"})]})}),(0,As.jsx)(ru,{className:"delivery_icon"})]}),(0,As.jsxs)("li",{children:[(0,As.jsx)("label",{children:(0,As.jsxs)("span",{children:[(0,As.jsx)("input",{type:"checkbox",name:"Installments",onChange:J,checked:!!F}),(0,As.jsx)("p",{children:"Installments"})]})}),(0,As.jsx)(Bs,{className:"delivery_icon"})]})]})})]})]}),(0,As.jsx)("div",{className:"p_d_cart",children:(0,As.jsxs)("div",{className:"p_d_cart_container",children:[(0,As.jsx)("div",{className:"cart_items",children:(0,As.jsx)("ul",{children:n.map((function(e,t){return(0,As.jsxs)("li",{children:[(0,As.jsx)("div",{children:(0,As.jsx)("img",{src:e.img,alt:"cart_item"})}),(0,As.jsxs)("div",{className:"p_d_cart_info",children:[(0,As.jsx)("p",{className:"p1",children:e.title}),(0,As.jsxs)("span",{children:[(0,As.jsxs)("p",{children:[e.count," pc."]}),(0,As.jsxs)("p",{children:[e.price,"$"]})]})]})]},t)}))})}),(0,As.jsx)("div",{className:"delivery_selected",children:(0,As.jsxs)("div",{className:"how_delivery",children:[(0,As.jsx)(hC,{className:"del_icon"}),(0,As.jsxs)("div",{children:[(0,As.jsx)("p",{children:"Delivery method:"}),(0,As.jsx)("span",{children:h.name})]})]})}),(0,As.jsxs)("div",{className:"cart_sum",children:[(0,As.jsxs)("div",{children:[(0,As.jsxs)("span",{children:[(0,As.jsx)("p",{children:"Cart value"}),(0,As.jsxs)("p",{children:[s.toFixed(2),"$"]})]}),(0,As.jsxs)("span",{children:[(0,As.jsx)("p",{children:"Delivery"}),(0,As.jsx)("p",{children:0===p.price?0!==h.price?h.price+"$":"Free":0!==h.price?h.price+"$ + "+p.price+"$":"Free + "+p.price+"$"})]})]}),(0,As.jsxs)("div",{children:[(0,As.jsxs)("span",{children:[(0,As.jsx)("p",{children:"For payment"}),(0,As.jsxs)("p",{children:[(Number(s)+Number(h.price+Number(p.price))).toFixed(2),"$"]})]}),(0,As.jsx)("button",{onClick:function(){if("Choose delivery method"!==h.name&&"pay method"!==p.name){var e=new Date,t=function(e){var t=0,n=e||11;if(!OC||DC+n>512)for(OC="",DC=0;t<256;t++)OC+=LC[256*Math.random()|0];return OC.substring(DC,DC+++n)}();Id(Cd(eC,"/".concat(ZE.currentUser.uid,"/").concat(t)),{Cart:n,pay:p,delivery:h,price:s,time:e.toLocaleString(),uid:t}),i({type:"CLEAR_CART",payload:[]}),f({name:"Choose delivery method",price:0}),Z()}},children:"Place an order"})]})]})]})}),(0,As.jsx)(jC,{addanim:z})]})};var FC=function(){var t=l((0,e.useState)(""),2),n=t[0],r=t[1],i=l((0,e.useState)(""),2),o=i[0],u=i[1],c=l((0,e.useState)(!1),2),h=c[0],f=c[1],d=l((0,e.useState)(!1),2),p=d[0],v=d[1],m=function(){var e=s(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),b(),""===n||""===o){e.next=11;break}return e.prev=3,e.next=6,Yr(ZE,n,o);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),y=l((0,e.useState)(""),2),g=y[0],k=y[1],_=us();(0,e.useEffect)((function(){ti(ZE,(function(e){k(e)}))}),[]),(0,e.useEffect)((function(){""!==g&&null!==g&&_("/Shop/")}),[g,_]);var b=function(){f(""===n),v(""===o)};return(0,As.jsxs)("div",{className:"register_page",children:[(0,As.jsx)("h1",{children:"Register"}),(0,As.jsx)("div",{className:"register_form",children:(0,As.jsxs)("form",{children:[(0,As.jsxs)("div",{children:[(0,As.jsx)("input",{type:"email",placeholder:"Email",value:n,onChange:function(e){r(e.target.value)}}),h?(0,As.jsx)("span",{children:"Enter your email"}):null]}),(0,As.jsxs)("div",{children:[(0,As.jsx)("input",{type:"password",placeholder:"Password",value:o,onChange:function(e){u(e.target.value)}}),p?(0,As.jsx)("span",{children:"Enter the password. The field cannot be empty"}):null]}),(0,As.jsx)("button",{onClick:m,children:"Register"})]})})]})};function UC(e){return Us({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M20 22H4a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1zm-1-2V4H5v16h14zM8 7h8v2H8V7zm0 4h8v2H8v-2zm0 4h5v2H8v-2z"}}]}]})(e)}var VC=function(e){var t=e.myOrders,n=null===t||void 0===t?void 0:t.map((function(e){return e.Cart})),r=null===t||void 0===t?void 0:t.map((function(e){return e.delivery})),i=null===t||void 0===t?void 0:t.map((function(e){return e.pay})),a=null===t||void 0===t?void 0:t.map((function(e){return e.time})),o=null===t||void 0===t?void 0:t.map((function(e){return e.price}));return(0,As.jsx)("div",{className:"order",children:(0,As.jsx)("div",{className:"order_list",children:(0,As.jsx)("ul",{children:t?null===n||void 0===n?void 0:n.map((function(e,t){return(0,As.jsxs)("li",{children:[(0,As.jsxs)("div",{className:"order_left",children:[(0,As.jsxs)("h3",{children:["Order (",t+1,")"]}),(0,As.jsxs)("span",{children:[(0,As.jsx)("p",{children:"Delivery method:"})," ",(0,As.jsx)("p",{children:r[t].name})]}),(0,As.jsxs)("span",{children:[(0,As.jsx)("p",{children:" Pay method:"})," ",(0,As.jsx)("p",{children:i[t].name})]}),(0,As.jsxs)("span",{children:[(0,As.jsx)("p",{children:"Order date:"})," ",(0,As.jsx)("p",{children:a[t]})]}),(0,As.jsxs)("span",{children:[(0,As.jsx)("p",{children:"Price:"}),(0,As.jsxs)("p",{children:[(o[t]+r[t].price+i[t].price).toFixed(2),"$"]})]})]}),(0,As.jsx)("div",{className:"order_right",children:e.map((function(e,t){return(0,As.jsxs)("div",{children:[(0,As.jsx)("p",{children:e.title}),(0,As.jsxs)("p",{children:[e.count,"pc."]}),(0,As.jsx)("img",{src:e.img,alt:"orderProduct"})]},t)}))})]},t)})):(0,As.jsx)("h2",{children:"No order"})})})})},zC=function(){var t=l((0,e.useState)("none"),2),n=t[0],r=t[1],i=l((0,e.useState)(),2),a=i[0],o=i[1],s=l((0,e.useState)({}),2),u=s[0],c=s[1],h=function(){r("none"===n?"active":"none")};return(0,e.useEffect)((function(){ti(ZE,(function(e){e&&Ad(Cd(eC,"/".concat(ZE.currentUser.uid)),(function(e){var t=e.val();if(null!==t){var n=Object.values(t);console.log(n),o(n)}})),c(e)}))}),[]),(0,As.jsxs)("div",{className:"user_panel",children:[(0,As.jsxs)("div",{className:"user_panel_menu "+n,children:[(0,As.jsxs)("div",{className:"user_menu "+n,children:[(0,As.jsx)("button",{onClick:h,children:(0,As.jsx)(aC,{})}),(0,As.jsxs)("span",{children:[(0,As.jsxs)("p",{children:[(0,As.jsx)(rC,{})," \xa0Hello,"]}),(0,As.jsx)("p",{children:u.email})]}),(0,As.jsx)("p",{className:"menu_order",children:(0,As.jsxs)(Ns,{to:"*user/order",children:[(0,As.jsx)(UC,{}),"Orders"]})})]}),(0,As.jsxs)("div",{className:"user_small_menu "+n,children:[(0,As.jsx)("button",{onClick:h,children:(0,As.jsx)(oC,{})}),(0,As.jsx)("p",{children:(0,As.jsx)(rC,{})}),(0,As.jsx)("p",{children:(0,As.jsx)(Ns,{to:"*/user/order",children:(0,As.jsx)(UC,{})})})]})]}),(0,As.jsx)("div",{className:"user_panel_reasult "+n,children:(0,As.jsx)(_s,{children:(0,As.jsx)(gs,{path:"*/user/order",element:(0,As.jsx)(VC,{myOrders:a})})})})]})};var qC=function(){var t=l((0,e.useState)("none"),2),n=t[0],r=t[1],i=l((0,e.useState)({id:vC.length,title:"",price:"",count:1,max_count:"",promo:null,img:"",category:"",rating:""}),2),a=i[0],o=i[1],s=function(e){o(Le(Le({},a),{},C({},e.target.name,e.target.value)))},u=function(){r("active"),setTimeout((function(){r("none")}),1900)};return(0,As.jsxs)("div",{className:"admin_products",children:[(0,As.jsx)("div",{className:"add_products",children:(0,As.jsxs)("form",{children:[(0,As.jsx)("h2",{children:"Add Product"}),(0,As.jsx)("input",{type:"text",placeholder:"Title",name:"title",value:a.title,onChange:s}),(0,As.jsx)("input",{type:"number",placeholder:"Price",name:"price",value:a.price,onChange:s}),(0,As.jsx)("input",{type:"number",placeholder:"Max_count",name:"max_count",value:a.max_count,onChange:s}),(0,As.jsx)("input",{type:"text",placeholder:"Image",name:"img",value:a.img,onChange:s}),(0,As.jsx)("input",{type:"text",placeholder:"Category",name:"category",value:a.category,onChange:s}),(0,As.jsx)("input",{type:"number",placeholder:"Rating",name:"rating",value:a.rating,onChange:s}),(0,As.jsx)("button",{onClick:function(e){e.preventDefault(),""!==a.title&&(vC.push(a),u(),o({id:vC.length,title:"",price:"",count:1,max_count:"",promo:null,img:"",category:"",rating:""}))},children:"Add Product"})]})}),(0,As.jsx)(bC,{addanim:n,text:"Product add to shop!"})]})},BC=function(){var t=l((0,e.useState)("none"),2),n=t[0],r=t[1],i=l((0,e.useState)(),2),a=i[0],o=i[1],s=function(){r("none"===n?"active":"none")},u=l((0,e.useState)({}),2),c=u[0],h=u[1];return(0,e.useEffect)((function(){ti(ZE,(function(e){e&&Ad(Cd(eC,"/".concat(ZE.currentUser.uid)),(function(e){var t=e.val();if(null!==t){var n=Object.values(t);o(n)}})),h(e)}))}),[]),(0,As.jsxs)("div",{className:"admin_panel",children:[(0,As.jsxs)("div",{className:"admin_panel_menu "+n,children:[(0,As.jsxs)("div",{className:"admin_menu "+n,children:[(0,As.jsx)("button",{onClick:s,children:(0,As.jsx)(aC,{})}),(0,As.jsxs)("span",{children:[(0,As.jsxs)("p",{children:[(0,As.jsx)(rC,{})," \xa0Hello,"]}),(0,As.jsx)("p",{children:c.email})]}),(0,As.jsx)("p",{className:"menu_order",children:(0,As.jsxs)(Ns,{to:"*/admin/orders",onClick:s,children:[(0,As.jsx)(UC,{}),"Orders"]})}),(0,As.jsx)("p",{className:"menu_order",children:(0,As.jsxs)(Ns,{to:"*/admin/products",onClick:s,children:[(0,As.jsx)(sC,{}),"Products"]})})]}),(0,As.jsxs)("div",{className:"admin_small_menu "+n,children:[(0,As.jsx)("button",{onClick:s,children:(0,As.jsx)(oC,{})}),(0,As.jsx)("p",{children:(0,As.jsx)(rC,{})}),(0,As.jsx)("p",{children:(0,As.jsx)(Ns,{to:"*/admin/orders",children:(0,As.jsx)(UC,{})})}),(0,As.jsx)("p",{children:(0,As.jsx)(Ns,{to:"*/admin/products",children:(0,As.jsx)(sC,{})})})]})]}),(0,As.jsx)("div",{className:"admin_panel_reasult "+n,children:(0,As.jsxs)(_s,{children:[(0,As.jsx)(gs,{path:"*/admin/orders",element:(0,As.jsx)(VC,{myOrders:a})}),(0,As.jsx)(gs,{path:"*/admin/products",element:(0,As.jsx)(qC,{})})]})})]})},HC=function(){var t=l((0,e.useState)(1),2),n=t[0],r=t[1],i=l((0,e.useState)("none"),2),o=i[0],u=i[1],c=l((0,e.useState)([]),2),h=c[0],f=c[1],d=l((0,e.useState)(""),2),p=d[0],v=d[1],m=l((0,e.useState)(""),2),y=m[0],g=m[1],k=l((0,e.useState)(!1),2),_=k[0],b=k[1],w=ho(),x=function(){var t=e.useContext(is).matches,n=t[t.length-1];return n?n.params:{}}().productId,S=l((0,e.useState)([]),2),E=S[0],C=S[1];(0,e.useEffect)((function(){ti(ZE,(function(e){g(e)}))}),[]);var T=vC.find((function(e){return e.id===parseInt(x)})),I=function(e){n<T.max_count&&"increment"===e&&r(n+1),n>1&&"decrement"===e&&r(n-1)},N=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=be(e),US("collection","path",t),e instanceof KS){var a=kg.fromString.apply(kg,[t].concat(r));return zS(a),new YS(e,null,a)}if(!(e instanceof QS||e instanceof YS))throw new ng(tg.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(kg.fromString.apply(kg,[t].concat(r)));return zS(o),new YS(e.firestore,null,o)}(tC,"comment"),R=function(){var e=s(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new Date,""===p){e.next=4;break}return e.next=4,YE(N,{prodId:x,com:p,user:y.email,date:t.toLocaleString()});case 4:b(!_),v("");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,e.useEffect)((function(){var e=function(){var e=s(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,QE(N);case 2:t=e.sent,n=t.docs.map((function(e){return Le(Le({},e.data()),{},{id:e.id})})),r=n.filter((function(e){return e.prodId===x})),C(r.splice(0,10)),f(r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[_]);var P=function(){var e=s(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=XS(tC,"comment",t),e.next=3,$E(n);case 3:b(!_);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=T.id,O=T.title,D=T.price,L=T.img,j=T.rating;return T.count=n,(0,As.jsxs)("div",{className:"SingleProduct",children:[(0,As.jsxs)("div",{className:"single_product_container",children:[(0,As.jsx)("div",{className:"single_product_top_title",children:(0,As.jsx)("h2",{children:O})}),(0,As.jsx)("div",{className:"single_product_img",children:(0,As.jsx)("img",{src:L,alt:"product nr."+x})}),(0,As.jsxs)("div",{className:"single_product_info",children:[(0,As.jsx)("div",{className:"single_product_title",children:(0,As.jsx)("h2",{children:O})}),(0,As.jsxs)("div",{className:"single_product_panel",children:[(0,As.jsx)("div",{className:"spp1",children:(0,As.jsxs)("span",{children:[(0,As.jsxs)("p",{children:[j,"/5",(0,As.jsx)(qs,{})]}),(0,As.jsxs)("p",{children:[D.toFixed(2),"$"]})]})}),(0,As.jsxs)("div",{className:"spp2",children:[(0,As.jsxs)("span",{children:[(0,As.jsx)(Js,{onClick:function(){return I("increment")}}),(0,As.jsx)("p",{children:n}),(0,As.jsx)(Xs,{onClick:function(){return I("decrement")}})]}),(0,As.jsx)("button",{onClick:function(){u("active"),setTimeout((function(){u("none")}),1900),w({type:"ADD_TO_CART",payload:T})},children:"Add to cart"})]}),(0,As.jsxs)("div",{className:"spp3",children:[(0,As.jsxs)("span",{children:[(0,As.jsx)(Ws,{}),(0,As.jsx)("p",{children:"Available"})]}),(0,As.jsxs)("span",{children:[(0,As.jsx)(Ks,{}),(0,As.jsx)("p",{children:"Buy now and receive tomorrow"})]})]})]})]})]}),(0,As.jsxs)("div",{className:"single_product_full_desc",children:[(0,As.jsx)("div",{children:(0,As.jsx)("img",{src:L,alt:"product nr."+A})}),(0,As.jsx)("div",{children:(0,As.jsx)("p",{children:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Maiores vero illo esse voluptatum eum, quaerat nobis ipsum necessitatibus nihil assumenda quod placeat porro repellat et aliquam possimus sapiente distinctio quibusd. Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquam enim veniam cupiditate ad voluptas mollitia, tempora voluptates optio earum quidem quisquam vero beatae ipsam repellendus reiciendis cum quos perspiciatis. Quis?"})})]}),(0,As.jsxs)("div",{className:"single_product_comment",children:[(0,As.jsx)("div",{className:"opinion",children:(0,As.jsx)("h2",{children:"Opinion"})}),(0,As.jsxs)("div",{className:"comment",children:[y?(0,As.jsxs)("div",{className:"add_comment",children:[(0,As.jsx)("textarea",{onChange:function(e){v(e.target.value)},value:p,placeholder:"Write your opinion",maxLength:"200"}),(0,As.jsx)("button",{onClick:R,children:"Add comment"})]}):(0,As.jsx)("div",{style:{marginBottom:"30px"},children:(0,As.jsx)("p",{style:{fontWeight:"500"},children:"Sign in to add a comment"})}),(0,As.jsxs)("div",{className:"show_comment",children:[(0,As.jsx)("ul",{children:E.length>0?E.map((function(e,t){return(0,As.jsxs)("li",{children:[(0,As.jsxs)("div",{className:"com_user",children:[(0,As.jsxs)("span",{children:[(0,As.jsx)(gC,{}),e.user]}),(0,As.jsx)("p",{className:"com_date",children:e.date}),e.user===(null===y||void 0===y?void 0:y.email)||"admin@gmail.com"===(null===y||void 0===y?void 0:y.email)?(0,As.jsx)($s,{onClick:function(){return P(e.id)}}):null]}),(0,As.jsx)("div",{className:"com_text",children:(0,As.jsx)("p",{children:e.com})})]},t)})):(0,As.jsx)("p",{style:{position:"relative",top:"50px"},children:"There are no comments"})}),E.length>0?h.length<1?(0,As.jsx)("div",{className:"com_end",children:(0,As.jsx)("p",{children:"End of comments"})}):(0,As.jsx)("div",{className:"com_end",onClick:function(){C(E.concat(h.splice(0,10)))},style:{cursor:"pointer"},children:(0,As.jsx)("p",{children:"Show more comments"})}):null]})]})]}),(0,As.jsx)(bC,{addanim:o,text:"Product added to cart!"})]})},WC=function(){var e=to((function(e){return e.addtocart})).filter((function(e){return e.id>=0}));return(0,As.jsx)(As.Fragment,{children:(0,As.jsxs)(_s,{children:[(0,As.jsx)(gs,{path:"/Shop/",element:(0,As.jsx)(wC,{})}),(0,As.jsx)(gs,{path:"/Shop/products",element:(0,As.jsx)(IC,{})}),(0,As.jsx)(gs,{path:"/Shop/cart",element:(0,As.jsx)(NC,{cart_items:e})}),(0,As.jsx)(gs,{path:"/Shop/login",element:(0,As.jsx)(RC,{})}),(0,As.jsx)(gs,{path:"/Shop/register",element:(0,As.jsx)(FC,{})}),(0,As.jsx)(gs,{path:"/Shop/payDelivery",element:(0,As.jsx)(MC,{cart_items:e})}),(0,As.jsx)(gs,{path:"/Shop/products/:productId",element:(0,As.jsx)(HC,{})}),(0,As.jsx)(gs,{path:"/Shop/userpanel/*",element:(0,As.jsx)(zC,{})}),(0,As.jsx)(gs,{path:"/Shop/admin/panel/*",element:(0,As.jsx)(BC,{})}),(0,As.jsx)(gs,{path:"*",element:(0,As.jsx)(PC,{})})]})})};var KC=function(){return(0,As.jsx)(As.Fragment,{children:(0,As.jsxs)(Ts,{children:[(0,As.jsx)(iC,{}),(0,As.jsx)(WC,{}),(0,As.jsx)(dC,{})]})})},GC=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};function QC(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var $C="function"===typeof Symbol&&Symbol.observable||"@@observable",YC=function(){return Math.random().toString(36).substring(7).split("").join(".")},XC={INIT:"@@redux/INIT"+YC(),REPLACE:"@@redux/REPLACE"+YC(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+YC()}};function JC(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function ZC(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(QC(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(QC(1));return n(ZC)(e,t)}if("function"!==typeof e)throw new Error(QC(2));var i=e,a=t,o=[],s=o,u=!1;function c(){s===o&&(s=o.slice())}function l(){if(u)throw new Error(QC(3));return a}function h(e){if("function"!==typeof e)throw new Error(QC(4));if(u)throw new Error(QC(5));var t=!0;return c(),s.push(e),function(){if(t){if(u)throw new Error(QC(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),o=null}}}function f(e){if(!JC(e))throw new Error(QC(7));if("undefined"===typeof e.type)throw new Error(QC(8));if(u)throw new Error(QC(9));try{u=!0,a=i(a,e)}finally{u=!1}for(var t=o=s,n=0;n<t.length;n++){(0,t[n])()}return e}function d(e){if("function"!==typeof e)throw new Error(QC(10));i=e,f({type:XC.REPLACE})}function p(){var e,t=h;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(QC(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[$C]=function(){return this},e}return f({type:XC.INIT}),(r={dispatch:f,subscribe:h,getState:l,replaceReducer:d})[$C]=p,r}var eT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":return[].concat(E(e),[Le({},t.payload)]);case"CLEAR_CART":case"REMOVE_ITEM":case"UPDATE_ITEM":return E(t.payload);default:return e}},tT=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:XC.INIT}))throw new Error(QC(12));if("undefined"===typeof n(void 0,{type:XC.PROBE_UNKNOWN_ACTION()}))throw new Error(QC(13))}))}(n)}catch(s){a=s}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},s=0;s<o.length;s++){var u=o[s],c=n[u],l=e[u],h=c(l,t);if("undefined"===typeof h){t&&t.type;throw new Error(QC(14))}i[u]=h,r=r||h!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}({addtocart:eT}),nT=ZC(tT);r.createRoot(document.getElementById("root")).render((0,As.jsx)(ao,{store:nT,children:(0,As.jsx)(KC,{})})),GC()}()}();
//# sourceMappingURL=main.abb19825.js.map